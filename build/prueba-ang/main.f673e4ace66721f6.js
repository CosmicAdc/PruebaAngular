"use strict";(self.webpackChunkpruebaAng=self.webpackChunkpruebaAng||[]).push([[179],{2011:(lt,Te,O)=>{O.d(Te,{Dh:()=>Ce,GT:()=>we,cc:()=>Oe,on:()=>Ne,pX:()=>oe,xv:()=>fe});var y=O(4650),U=O(127);lt=O.hmd(lt);const P=["ngOnDestroy"],oe=(re,ue,Ke,Ze={})=>new Proxy(re,{get:(Pe,ve)=>Ke.runOutsideAngular(()=>{var le;if(re[ve])return!(null===(le=Ze?.spy)||void 0===le)&&le.get&&Ze.spy.get(ve,re[ve]),re[ve];if(P.indexOf(ve)>-1)return()=>{};const Le=ue.toPromise().then(J=>{const ee=J&&J[ve];return"function"==typeof ee?ee.bind(J):ee&&ee.then?ee.then(ce=>Ke.run(()=>ce)):Ke.run(()=>ee)});return new Proxy(()=>{},{get:(J,ee)=>Le[ee],apply:(J,ee,ce)=>Le.then(W=>{var q;const ie=W&&W(...ce);return!(null===(q=Ze?.spy)||void 0===q)&&q.apply&&Ze.spy.apply(ve,ce,ie),ie})})})}),we=(re,ue)=>{ue.forEach(Ke=>{Object.getOwnPropertyNames(Ke.prototype||Ke).forEach(Ze=>{Object.defineProperty(re.prototype,Ze,Object.getOwnPropertyDescriptor(Ke.prototype||Ke,Ze))})})};class me{constructor(ue){return ue}}const Ce=new y.OlP("angularfire2.app.options"),fe=new y.OlP("angularfire2.app.name");function Ne(re,ue,Ke){const Pe="object"==typeof Ke&&Ke||{};Pe.name=Pe.name||"string"==typeof Ke&&Ke||"[DEFAULT]";const le=U.Z.apps.filter(Le=>Le&&Le.name===Pe.name)[0]||ue.runOutsideAngular(()=>U.Z.initializeApp(re,Pe));try{JSON.stringify(re)!==JSON.stringify(le.options)&&$("error",`${le.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new me(le)}const $=(re,...ue)=>{(0,y.X6Q)()&&typeof console<"u"&&console[re](...ue)};function Oe(re,ue,Ke,Ze,Pe){const[,ve,le]=globalThis.\u0275AngularfireInstanceCache.find(Le=>Le[0]===re)||[];if(ve)return function ke(re,ue){try{return re.toString()===ue.toString()}catch{return re===ue}}(Pe,le)||(He("error",`${ue} was already initialized on the ${Ke} Firebase App with different settings.${ye?" You may need to reload as Firebase is not HMR aware.":""}`),He("warn",{is:Pe,was:le})),ve;{const Le=Ze();return globalThis.\u0275AngularfireInstanceCache.push([re,Le,Pe]),Le}}const ye=!!lt.hot,He=(re,...ue)=>{(0,y.X6Q)()&&typeof console<"u"&&console[re](...ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},8247:(lt,Te,O)=>{O.d(Te,{$:()=>xa,A:()=>j,B:()=>ke,G:()=>ws,H:()=>Vr,J:()=>Ri,L:()=>V,M:()=>Nh,N:()=>Ph,P:()=>um,Q:()=>fl,R:()=>Y_,T:()=>pl,U:()=>As,V:()=>xs,W:()=>Fg,X:()=>H_,Y:()=>Sa,Z:()=>Et,_:()=>z_,a:()=>Qi,a0:()=>W_,a1:()=>Bn,a2:()=>Fu,a3:()=>wl,a4:()=>Hg,a5:()=>G_,a6:()=>On,a7:()=>vi,a8:()=>Ra,a9:()=>Yi,aA:()=>L,aB:()=>ri,aC:()=>jn,aD:()=>jl,aE:()=>ot,aI:()=>Io,aL:()=>vo,aa:()=>q_,ab:()=>El,ac:()=>bl,af:()=>Gg,ag:()=>qg,ah:()=>Vh,ak:()=>Ca,al:()=>Jg,an:()=>Xg,ao:()=>$h,ap:()=>ce,aq:()=>Ae,ar:()=>qe,as:()=>Ze,at:()=>zs,au:()=>ii,av:()=>wt,aw:()=>Pe,ax:()=>J,ay:()=>za,az:()=>q,b:()=>Ns,c:()=>ir,d:()=>ef,e:()=>Xh,f:()=>Hn,g:()=>tf,h:()=>zr,i:()=>Yu,j:()=>Vi,k:()=>Gr,l:()=>Oi,m:()=>Zl,n:()=>Yl,o:()=>fe,r:()=>Li,s:()=>ki,u:()=>Yh});var y=O(5861),U=O(2090),P=O(9681),oe=O(1877),we=O(655),me=O(4859);const fe={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},j={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const ke=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},ye=function Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},He=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ue=new oe.Yd("@firebase/auth");function Ke(_,...f){ue.logLevel<=oe.in.ERROR&&ue.error(`Auth (${P.SDK_VERSION}): ${_}`,...f)}function Ze(_,...f){throw Le(_,...f)}function Pe(_,...f){return Le(_,...f)}function ve(_,f,g){const I=Object.assign(Object.assign({},ye()),{[f]:g});return new U.LL("auth","Firebase",I).create(f,{appName:_.name})}function le(_,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Ze(_,"argument-error"),ve(_,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Le(_,...f){if("string"!=typeof _){const g=f[0],I=[...f.slice(1)];return I[0]&&(I[0].appName=_.name),_._errorFactory.create(g,...I)}return He.create(_,...f)}function J(_,f,...g){if(!_)throw Le(f,...g)}function ee(_){const f="INTERNAL ASSERTION FAILED: "+_;throw Ke(f),new Error(f)}function ce(_,f){_||ee(f)}const W=new Map;function q(_){ce(_ instanceof Function,"Expected a class definition");let f=W.get(_);return f?(ce(f instanceof _,"Instance stored in cache mismatched with class"),f):(f=new _,W.set(_,f),f)}function xe(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function Me(){return"http:"===et()||"https:"===et()}function et(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Fe{constructor(f,g){this.shortDelay=f,this.longDelay=g,ce(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function jt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Me()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Jt(_,f){ce(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class An{static initialize(f,g,I){this.fetchImpl=f,g&&(this.headersImpl=g),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Ht=new Fe(3e4,6e4);function Ot(_,f){return _.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:_.tenantId}):f}function St(_,f,g,I){return wr.apply(this,arguments)}function wr(){return(wr=(0,y.Z)(function*(_,f,g,I,T={}){return fi(_,T,(0,y.Z)(function*(){let M={},Z={};I&&("GET"===f?Z=I:M={body:JSON.stringify(I)});const de=(0,U.xO)(Object.assign({key:_.config.apiKey},Z)).slice(1),$e=yield _._getAdditionalHeaders();return $e["Content-Type"]="application/json",_.languageCode&&($e["X-Firebase-Locale"]=_.languageCode),An.fetch()(Ai(_,_.config.apiHost,g,de),Object.assign({method:f,headers:$e,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function fi(_,f,g){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,y.Z)(function*(_,f,g){_._canInitEmulator=!1;const I=Object.assign(Object.assign({},Xt),f);try{const T=new Ir(_),M=yield Promise.race([g(),T.promise]);T.clearNetworkTimeout();const Z=yield M.json();if("needConfirmation"in Z)throw Er(_,"account-exists-with-different-credential",Z);if(M.ok&&!("errorMessage"in Z))return Z;{const de=M.ok?Z.errorMessage:Z.error.message,[$e,it]=de.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===$e)throw Er(_,"credential-already-in-use",Z);if("EMAIL_EXISTS"===$e)throw Er(_,"email-already-in-use",Z);if("USER_DISABLED"===$e)throw Er(_,"user-disabled",Z);const Rt=I[$e]||$e.toLowerCase().replace(/[_\s]+/g,"-");if(it)throw ve(_,Rt,it);Ze(_,Rt)}}catch(T){if(T instanceof U.ZR)throw T;Ze(_,"network-request-failed")}})).apply(this,arguments)}function Dn(_,f,g,I){return qi.apply(this,arguments)}function qi(){return(qi=(0,y.Z)(function*(_,f,g,I,T={}){const M=yield St(_,f,g,I,T);return"mfaPendingCredential"in M&&Ze(_,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function Ai(_,f,g,I){const T=`${f}${g}?${I}`;return _.config.emulator?Jt(_.config,T):`${_.config.apiScheme}://${T}`}class Ir{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,I)=>{this.timer=setTimeout(()=>I(Pe(this.auth,"network-request-failed")),Ht.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Er(_,f,g){const I={appName:_.name};g.email&&(I.email=g.email),g.phoneNumber&&(I.phoneNumber=g.phoneNumber);const T=Pe(_,f,I);return T.customData._tokenResponse=g,T}function vs(){return(vs=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function ze(_,f){return qn.apply(this,arguments)}function qn(){return(qn=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Un(_,f){return dn.apply(this,arguments)}function dn(){return(dn=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function Nr(_){if(_)try{const f=new Date(Number(_));if(!isNaN(f.getTime()))return f.toUTCString()}catch{}}function yn(){return(yn=(0,y.Z)(function*(_,f=!1){const g=(0,U.m9)(_),I=yield g.getIdToken(f),T=tt(I);J(T&&T.exp&&T.auth_time&&T.iat,g.auth,"internal-error");const M="object"==typeof T.firebase?T.firebase:void 0,Z=M?.sign_in_provider;return{claims:T,token:I,authTime:Nr(nn(T.auth_time)),issuedAtTime:Nr(nn(T.iat)),expirationTime:Nr(nn(T.exp)),signInProvider:Z||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function nn(_){return 1e3*Number(_)}function tt(_){var f;const[g,I,T]=_.split(".");if(void 0===g||void 0===I||void 0===T)return Ke("JWT malformed, contained fewer than 3 sections"),null;try{const M=(0,U.tV)(I);return M?JSON.parse(M):(Ke("Failed to decode base64 JWT payload"),null)}catch(M){return Ke("Caught error parsing JWT payload as JSON",null===(f=M)||void 0===f?void 0:f.toString()),null}}function Dt(_,f){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,y.Z)(function*(_,f,g=!1){if(g)return f;try{return yield f}catch(I){throw I instanceof U.ZR&&Kn(I)&&_.auth.currentUser===_&&(yield _.auth.signOut()),I}})).apply(this,arguments)}function Kn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Dr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const T=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,T)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const I=this.getInterval(f);this.timerId=setTimeout((0,y.Z)(function*(){yield g.iteration()}),I)}iteration(){var f=this;return(0,y.Z)(function*(){var g;try{yield f.user.getIdToken(!0)}catch(I){return void("auth/network-request-failed"===(null===(g=I)||void 0===g?void 0:g.code)&&f.schedule(!0))}f.schedule()})()}}class yt{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nr(this.lastLoginAt),this.creationTime=Nr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function br(_){return bt.apply(this,arguments)}function bt(){return(bt=(0,y.Z)(function*(_){var f;const g=_.auth,I=yield _.getIdToken(),T=yield Dt(_,Un(g,{idToken:I}));J(T?.users.length,g,"internal-error");const M=T.users[0];_._notifyReloadListener(M);const Z=null!==(f=M.providerUserInfo)&&void 0!==f&&f.length?In(M.providerUserInfo):[],de=tr(_.providerData,Z),Rt=!!_.isAnonymous&&!(_.email&&M.passwordHash||de?.length),Qt={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:de,metadata:new yt(M.createdAt,M.lastLoginAt),isAnonymous:Rt};Object.assign(_,Qt)})).apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(_){const f=(0,U.m9)(_);yield br(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function tr(_,f){return[..._.filter(I=>!f.some(T=>T.providerId===I.providerId)),...f]}function In(_){return _.map(f=>{var{providerId:g}=f,I=(0,we._T)(f,["providerId"]);return{providerId:g,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function pe(){return(pe=(0,y.Z)(function*(_,f){const g=yield fi(_,{},(0,y.Z)(function*(){const I=(0,U.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:T,apiKey:M}=_.config,Z=Ai(_,T,"/v1/token",`key=${M}`),de=yield _._getAdditionalHeaders();return de["Content-Type"]="application/x-www-form-urlencoded",An.fetch()(Z,{method:"POST",headers:de,body:I})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class We{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){J(f.idToken,"internal-error"),J(typeof f.idToken<"u","internal-error"),J(typeof f.refreshToken<"u","internal-error");const g="expiresIn"in f&&typeof f.expiresIn<"u"?Number(f.expiresIn):function nt(_){const f=tt(_);return J(f,"internal-error"),J(typeof f.exp<"u","internal-error"),J(typeof f.iat<"u","internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var I=this;return(0,y.Z)(function*(){return J(!I.accessToken||I.refreshToken,f,"user-token-expired"),g||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(f,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var I=this;return(0,y.Z)(function*(){const{accessToken:T,refreshToken:M,expiresIn:Z}=yield function je(_,f){return pe.apply(this,arguments)}(f,g);I.updateTokensAndExpiration(T,M,Number(Z))})()}updateTokensAndExpiration(f,g,I){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(f,g){const{refreshToken:I,accessToken:T,expirationTime:M}=g,Z=new We;return I&&(J("string"==typeof I,"internal-error",{appName:f}),Z.refreshToken=I),T&&(J("string"==typeof T,"internal-error",{appName:f}),Z.accessToken=T),M&&(J("number"==typeof M,"internal-error",{appName:f}),Z.expirationTime=M),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new We,this.toJSON())}_performRefresh(){return ee("not implemented")}}function ut(_,f){J("string"==typeof _||typeof _>"u","internal-error",{appName:f})}class ht{constructor(f){var{uid:g,auth:I,stsTokenManager:T}=f,M=(0,we._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=I,this.stsTokenManager=T,this.accessToken=T.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new yt(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,y.Z)(function*(){const I=yield Dt(g,g.stsTokenManager.getToken(g.auth,f));return J(I,g.auth,"internal-error"),g.accessToken!==I&&(g.accessToken=I,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),I})()}getIdTokenResult(f){return function mn(_){return yn.apply(this,arguments)}(this,f)}reload(){return function pi(_){return Vt.apply(this,arguments)}(this)}_assign(f){this!==f&&(J(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new ht(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var I=this;return(0,y.Z)(function*(){let T=!1;f.idToken&&f.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(f),T=!0),g&&(yield br(I)),yield I.auth._persistUserIfCurrent(I),T&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var f=this;return(0,y.Z)(function*(){const g=yield f.getIdToken();return yield Dt(f,function xi(_,f){return vs.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var I,T,M,Z,de,$e,it,Rt;const Qt=null!==(I=g.displayName)&&void 0!==I?I:void 0,Cr=null!==(T=g.email)&&void 0!==T?T:void 0,Lr=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,Gs=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,Ka=null!==(de=g.tenantId)&&void 0!==de?de:void 0,nc=null!==($e=g._redirectEventId)&&void 0!==$e?$e:void 0,ns=null!==(it=g.createdAt)&&void 0!==it?it:void 0,hf=null!==(Rt=g.lastLoginAt)&&void 0!==Rt?Rt:void 0,{uid:qs,emailVerified:Ql,isAnonymous:ff,providerData:Ks,stsTokenManager:rs}=g;J(qs&&rs,f,"internal-error");const pf=We.fromJSON(this.name,rs);J("string"==typeof qs,f,"internal-error"),ut(Qt,f.name),ut(Cr,f.name),J("boolean"==typeof Ql,f,"internal-error"),J("boolean"==typeof ff,f,"internal-error"),ut(Lr,f.name),ut(Gs,f.name),ut(Ka,f.name),ut(nc,f.name),ut(ns,f.name),ut(hf,f.name);const rc=new ht({uid:qs,auth:f,email:Cr,emailVerified:Ql,displayName:Qt,isAnonymous:ff,photoURL:Gs,phoneNumber:Lr,tenantId:Ka,stsTokenManager:pf,createdAt:ns,lastLoginAt:hf});return Ks&&Array.isArray(Ks)&&(rc.providerData=Ks.map(Fo=>Object.assign({},Fo))),nc&&(rc._redirectEventId=nc),rc}static _fromIdTokenResponse(f,g,I=!1){return(0,y.Z)(function*(){const T=new We;T.updateFromServerResponse(g);const M=new ht({uid:g.localId,auth:f,stsTokenManager:T,isAnonymous:I});return yield br(M),M})()}}const V=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,y.Z)(function*(){return!0})()}_set(g,I){var T=this;return(0,y.Z)(function*(){T.storage[g]=I})()}_get(g){var I=this;return(0,y.Z)(function*(){const T=I.storage[g];return void 0===T?null:T})()}_remove(g){var I=this;return(0,y.Z)(function*(){delete I.storage[g]})()}_addListener(g,I){}_removeListener(g,I){}}return _.type="NONE",_})();function L(_,f,g){return`firebase:${_}:${f}:${g}`}class H{constructor(f,g,I){this.persistence=f,this.auth=g,this.userKey=I;const{config:T,name:M}=this.auth;this.fullUserKey=L(this.userKey,T.apiKey,M),this.fullPersistenceKey=L("persistence",T.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,y.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?ht._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,y.Z)(function*(){if(g.persistence===f)return;const I=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,I?g.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,I="authUser"){return(0,y.Z)(function*(){if(!g.length)return new H(q(V),f,I);const T=(yield Promise.all(g.map(function(){var it=(0,y.Z)(function*(Rt){if(yield Rt._isAvailable())return Rt});return function(Rt){return it.apply(this,arguments)}}()))).filter(it=>it);let M=T[0]||q(V);const Z=L(I,f.config.apiKey,f.name);let de=null;for(const it of g)try{const Rt=yield it._get(Z);if(Rt){const Qt=ht._fromJSON(f,Rt);it!==M&&(de=Qt),M=it;break}}catch{}const $e=T.filter(it=>it._shouldAllowMigration);return M._shouldAllowMigration&&$e.length?(M=$e[0],de&&(yield M._set(Z,de.toJSON())),yield Promise.all(g.map(function(){var it=(0,y.Z)(function*(Rt){if(Rt!==M)try{yield Rt._remove(Z)}catch{}});return function(Rt){return it.apply(this,arguments)}}())),new H(M,f,I)):new H(M,f,I)})()}}function k(_){const f=_.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(De(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(x(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(Ye(f))return"Blackberry";if(he(f))return"Webos";if(N(f))return"Safari";if((f.includes("chrome/")||Q(f))&&!f.includes("edge/"))return"Chrome";if(qe(f))return"Android";{const I=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===I?.length)return I[1]}return"Other"}function x(_=(0,U.z$)()){return/firefox\//i.test(_)}function N(_=(0,U.z$)()){const f=_.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Q(_=(0,U.z$)()){return/crios\//i.test(_)}function De(_=(0,U.z$)()){return/iemobile/i.test(_)}function qe(_=(0,U.z$)()){return/android/i.test(_)}function Ye(_=(0,U.z$)()){return/blackberry/i.test(_)}function he(_=(0,U.z$)()){return/webos/i.test(_)}function Ae(_=(0,U.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function wt(_=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function Yt(_=(0,U.z$)()){return Ae(_)||qe(_)||he(_)||Ye(_)||/windows phone/i.test(_)||De(_)}function un(_,f=[]){let g;switch(_){case"Browser":g=k((0,U.z$)());break;case"Worker":g=`${k((0,U.z$)())}-${_}`;break;default:g=_}const I=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${P.SDK_VERSION}/${I}`}class va{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const I=M=>new Promise((Z,de)=>{try{Z(f(M))}catch($e){de($e)}});I.onAbort=g,this.queue.push(I);const T=this.queue.length-1;return()=>{this.queue[T]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,y.Z)(function*(){var I;if(g.auth.currentUser===f)return;const T=[];try{for(const M of g.queue)yield M(f),M.onAbort&&T.push(M.onAbort)}catch(M){T.reverse();for(const Z of T)try{Z()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:null===(I=M)||void 0===I?void 0:I.message})}})()}}class _a{constructor(f,g,I){this.app=f,this.heartbeatServiceProvider=g,this.config=I,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _s(this),this.idTokenSubscription=new _s(this),this.beforeStateQueue=new va(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=He,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=I.sdkClientVersion}_initializeWithPersistence(f,g){var I=this;return g&&(this._popupRedirectResolver=q(g)),this._initializationPromise=this.queue((0,y.Z)(function*(){var T,M;if(!I._deleted&&(I.persistenceManager=yield H.create(I,f),!I._deleted)){if(null!==(T=I._popupRedirectResolver)&&void 0!==T&&T._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch{}yield I.initializeCurrentUser(g),I.lastNotifiedUid=(null===(M=I.currentUser)||void 0===M?void 0:M.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,y.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,y.Z)(function*(){var I;const T=yield g.assertedPersistence.getCurrentUser();let M=T,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const de=null===(I=g.redirectUser)||void 0===I?void 0:I._redirectEventId,$e=M?._redirectEventId,it=yield g.tryRedirectSignIn(f);(!de||de===$e)&&it?.user&&(M=it.user,Z=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(M)}catch(de){M=T,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(de))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return J(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(f){var g=this;return(0,y.Z)(function*(){let I=null;try{I=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch{yield g._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,y.Z)(function*(){var I;try{yield br(f)}catch(T){if("auth/network-request-failed"!==(null===(I=T)||void 0===I?void 0:I.code))return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function kt(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var f=this;return(0,y.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,y.Z)(function*(){const I=f?(0,U.m9)(f):null;return I&&J(I.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(I&&I._clone(g))})()}_updateCurrentUser(f,g=!1){var I=this;return(0,y.Z)(function*(){if(!I._deleted)return f&&J(I.tenantId===f.tenantId,I,"tenant-id-mismatch"),g||(yield I.beforeStateQueue.runMiddleware(f)),I.queue((0,y.Z)(function*(){yield I.directlySetCurrentUser(f),I.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,y.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,y.Z)(function*(){yield g.assertedPersistence.setPersistence(q(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new U.LL("auth","Firebase",f())}onAuthStateChanged(f,g,I){return this.registerStateListener(this.authStateSubscription,f,g,I)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,I){return this.registerStateListener(this.idTokenSubscription,f,g,I)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var I=this;return(0,y.Z)(function*(){const T=yield I.getOrInitRedirectPersistenceManager(g);return null===f?T.removeCurrentUser():T.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,y.Z)(function*(){if(!g.redirectPersistenceManager){const I=f&&q(f)||g._popupRedirectResolver;J(I,g,"argument-error"),g.redirectPersistenceManager=yield H.create(g,[q(I._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,y.Z)(function*(){var I,T;return g._isInitialized&&(yield g.queue((0,y.Z)(function*(){}))),(null===(I=g._currentUser)||void 0===I?void 0:I._redirectEventId)===f?g._currentUser:(null===(T=g.redirectUser)||void 0===T?void 0:T._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,y.Z)(function*(){if(f===g.currentUser)return g.queue((0,y.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,I,T){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return J(Z,this,"internal-error"),Z.then(()=>M(this.currentUser)),"function"==typeof g?f.addObserver(g,I,T):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,y.Z)(function*(){g.currentUser&&g.currentUser!==f&&g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh(),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=un(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,y.Z)(function*(){var g;const I={"X-Client-Version":f.clientVersion};f.app.options.appId&&(I["X-Firebase-gmpid"]=f.app.options.appId);const T=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return T&&(I["X-Firebase-Client"]=T),I})()}}function ot(_){return(0,U.m9)(_)}class _s{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,U.ne)(g=>this.observer=g)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ws(_,f,g){const I=ot(_);J(I._canInitEmulator,I,"emulator-config-failed"),J(/^https?:\/\//.test(f),I,"invalid-emulator-scheme");const T=!!g?.disableWarnings,M=Mu(f),{host:Z,port:de}=function Is(_){const f=Mu(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(f.length));if(!g)return{host:"",port:null};const I=g[2].split("@").pop()||"",T=/^(\[[^\]]+\])(:|$)/.exec(I);if(T){const M=T[1];return{host:M,port:kn(I.substr(M.length+1))}}{const[M,Z]=I.split(":");return{host:M,port:kn(Z)}}}(f);I.config.emulator={url:`${M}//${Z}${null===de?"":`:${de}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:Z,port:de,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:T})}),T||function Es(){function _(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function Mu(_){const f=_.indexOf(":");return f<0?"":_.substr(0,f+1)}function kn(_){if(!_)return null;const f=Number(_);return isNaN(f)?null:f}class Vr{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return ee("not implemented")}_getIdTokenResponse(f){return ee("not implemented")}_linkToIdToken(f,g){return ee("not implemented")}_getReauthenticationResolver(f){return ee("not implemented")}}function Br(_,f){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:resetPassword",Ot(_,f))})).apply(this,arguments)}function ll(_,f){return en.apply(this,arguments)}function en(){return(en=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Pg(_,f){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",Ot(_,f))})).apply(this,arguments)}function Ia(){return(Ia=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithPassword",Ot(_,f))})).apply(this,arguments)}function Mi(_,f){return bs.apply(this,arguments)}function bs(){return(bs=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:sendOobCode",Ot(_,f))})).apply(this,arguments)}function Cs(_,f){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,y.Z)(function*(_,f){return Mi(_,f)})).apply(this,arguments)}function kg(_,f){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,y.Z)(function*(_,f){return Mi(_,f)})).apply(this,arguments)}function kr(_,f){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,y.Z)(function*(_,f){return Mi(_,f)})).apply(this,arguments)}function Nu(_,f){return go.apply(this,arguments)}function go(){return(go=(0,y.Z)(function*(_,f){return Mi(_,f)})).apply(this,arguments)}function Pu(){return(Pu=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithEmailLink",Ot(_,f))})).apply(this,arguments)}function dl(){return(dl=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithEmailLink",Ot(_,f))})).apply(this,arguments)}class Ea extends Vr{constructor(f,g,I,T=null){super("password",I),this._email=f,this._password=g,this._tenantId=T}static _fromEmailAndPassword(f,g){return new Ea(f,g,"password")}static _fromEmailAndCode(f,g,I=null){return new Ea(f,g,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,y.Z)(function*(){switch(g.signInMethod){case"password":return function wa(_,f){return Ia.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function mi(_,f){return Pu.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Ze(f,"internal-error")}})()}_linkToIdToken(f,g){var I=this;return(0,y.Z)(function*(){switch(I.signInMethod){case"password":return ll(f,{idToken:g,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function F_(_,f){return dl.apply(this,arguments)}(f,{idToken:g,email:I._email,oobCode:I._password});default:Ze(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Ss(_,f){return $r.apply(this,arguments)}function $r(){return($r=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithIdp",Ot(_,f))})).apply(this,arguments)}class Ri extends Vr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new Ri(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Ze("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:T}=g,M=(0,we._T)(g,["providerId","signInMethod"]);if(!I||!T)return null;const Z=new Ri(I,T);return Z.idToken=M.idToken||void 0,Z.accessToken=M.accessToken||void 0,Z.secret=M.secret,Z.nonce=M.nonce,Z.pendingToken=M.pendingToken||null,Z}_getIdTokenResponse(f){return Ss(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,Ss(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ss(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,U.xO)(g)}return f}}function V_(_,f){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:sendVerificationCode",Ot(_,f))})).apply(this,arguments)}function Ah(){return(Ah=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,f))})).apply(this,arguments)}function xh(){return(xh=(0,y.Z)(function*(_,f){const g=yield Dn(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,f));if(g.temporaryProof)throw Er(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const $_={USER_NOT_FOUND:"user-not-found"};function Mh(){return(Mh=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithPhoneNumber",Ot(_,Object.assign(Object.assign({},f),{operation:"REAUTH"})),$_)})).apply(this,arguments)}class mo extends Vr{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new mo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new mo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Og(_,f){return Ah.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function B_(_,f){return xh.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function j_(_,f){return Mh.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:I,verificationCode:T}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:I,code:T}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:I,phoneNumber:T,temporaryProof:M}=f;return I||g||T||M?new mo({verificationId:g,verificationCode:I,phoneNumber:T,temporaryProof:M}):null}}class ku{constructor(f){var g,I,T,M,Z,de;const $e=(0,U.zd)((0,U.pd)(f)),it=null!==(g=$e.apiKey)&&void 0!==g?g:null,Rt=null!==(I=$e.oobCode)&&void 0!==I?I:null,Qt=function Rh(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(T=$e.mode)&&void 0!==T?T:null);J(it&&Rt&&Qt,"argument-error"),this.apiKey=it,this.operation=Qt,this.code=Rt,this.continueUrl=null!==(M=$e.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==(Z=$e.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(de=$e.tenantId)&&void 0!==de?de:null}static parseLink(f){const g=function hl(_){const f=(0,U.zd)((0,U.pd)(_)).link,g=f?(0,U.zd)((0,U.pd)(f)).deep_link_id:null,I=(0,U.zd)((0,U.pd)(_)).deep_link_id;return(I?(0,U.zd)((0,U.pd)(I)).link:null)||I||g||f||_}(f);try{return new ku(g)}catch{return null}}}let Nh=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,I){return Ea._fromEmailAndPassword(g,I)}static credentialWithLink(g,I){const T=ku.parseLink(I);return J(T,"argument-error"),Ea._fromEmailAndCode(g,T.code,T.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class nr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class yo extends nr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class As extends yo{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return J("providerId"in g&&"signInMethod"in g,"argument-error"),Ri._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return J(f.idToken||f.accessToken,"argument-error"),Ri._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return As.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return As.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:I,oauthTokenSecret:T,pendingToken:M,nonce:Z,providerId:de}=f;if(!I&&!T&&!g&&!M||!de)return null;try{return new As(de)._credential({idToken:g,accessToken:I,nonce:Z,pendingToken:M})}catch{return null}}}let Ph=(()=>{class _ extends yo{constructor(){super("facebook.com")}static credential(g){return Ri._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),fl=(()=>{class _ extends yo{constructor(){super("google.com"),this.addScope("profile")}static credential(g,I){return Ri._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:I,oauthAccessToken:T}=g;if(!I&&!T)return null;try{return _.credential(I,T)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),pl=(()=>{class _ extends yo{constructor(){super("github.com")}static credential(g){return Ri._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class vo extends Vr{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Ss(f,this.buildRequest())}_linkToIdToken(f,g){const I=this.buildRequest();return I.idToken=g,Ss(f,I)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Ss(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:I,signInMethod:T,pendingToken:M}=g;return I&&T&&M&&I===T?new vo(I,M):null}static _create(f,g){return new vo(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class xs extends nr{constructor(f){J(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return xs.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return xs.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=vo.fromJSON(f);return J(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:I}=f;if(!g||!I)return null;try{return vo._create(I,g)}catch{return null}}}let Fg=(()=>{class _ extends yo{constructor(){super("twitter.com")}static credential(g,I){return Ri._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:I})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:I,oauthTokenSecret:T}=g;if(!I||!T)return null;try{return _.credential(I,T)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Or(_,f){return Da.apply(this,arguments)}function Da(){return(Da=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signUp",Ot(_,f))})).apply(this,arguments)}class Xr{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,I,T=!1){return(0,y.Z)(function*(){const M=yield ht._fromIdTokenResponse(f,I,T),Z=ba(I);return new Xr({user:M,providerId:Z,_tokenResponse:I,operationType:g})})()}static _forOperation(f,g,I){return(0,y.Z)(function*(){yield f._updateTokensIfNecessary(I,!0);const T=ba(I);return new Xr({user:f,providerId:T,_tokenResponse:I,operationType:g})})()}}function ba(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function H_(_){return Ug.apply(this,arguments)}function Ug(){return(Ug=(0,y.Z)(function*(_){var f;const g=ot(_);if(yield g._initializationPromise,null!==(f=g.currentUser)&&void 0!==f&&f.isAnonymous)return new Xr({user:g.currentUser,providerId:null,operationType:"signIn"});const I=yield Or(g,{returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(g,"signIn",I,!0);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class En extends U.ZR{constructor(f,g,I,T){var M;super(g.code,g.message),this.operationType=I,this.user=T,Object.setPrototypeOf(this,En.prototype),this.customData={appName:f.name,tenantId:null!==(M=f.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(f,g,I,T){return new En(f,g,I,T)}}function Oh(_,f,g,I){return("reauthenticate"===f?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?En._fromErrorAndOperation(_,M,f,I):M})}function Vg(_){return new Set(_.map(({providerId:f})=>f).filter(f=>!!f))}function Ca(_,f){return hr.apply(this,arguments)}function hr(){return(hr=(0,y.Z)(function*(_,f){const g=(0,U.m9)(_);yield Ki(!0,g,f);const{providerUserInfo:I}=yield ze(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),T=Vg(I||[]);return g.providerData=g.providerData.filter(M=>T.has(M.providerId)),T.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Lh(_,f){return Ta.apply(this,arguments)}function Ta(){return(Ta=(0,y.Z)(function*(_,f,g=!1){const I=yield Dt(_,f._linkToIdToken(_.auth,yield _.getIdToken()),g);return Xr._forOperation(_,"link",I)})).apply(this,arguments)}function Ki(_,f,g){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,y.Z)(function*(_,f,g){yield br(f);const T=!1===_?"provider-already-linked":"no-such-provider";J(Vg(f.providerData).has(g)===_,f.auth,T)})).apply(this,arguments)}function Bg(_,f){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,y.Z)(function*(_,f,g=!1){var I;const{auth:T}=_,M="reauthenticate";try{const Z=yield Dt(_,Oh(T,M,f,_),g);J(Z.idToken,T,"internal-error");const de=tt(Z.idToken);J(de,T,"internal-error");const{sub:$e}=de;return J(_.uid===$e,T,"user-mismatch"),Xr._forOperation(_,M,Z)}catch(Z){throw"auth/user-not-found"===(null===(I=Z)||void 0===I?void 0:I.code)&&Ze(T,"user-mismatch"),Z}})).apply(this,arguments)}function $g(_,f){return yi.apply(this,arguments)}function yi(){return(yi=(0,y.Z)(function*(_,f,g=!1){const I="signIn",T=yield Oh(_,I,f),M=yield Xr._fromIdTokenResponse(_,I,T);return g||(yield _._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Sa(_,f){return Aa.apply(this,arguments)}function Aa(){return(Aa=(0,y.Z)(function*(_,f){return $g(ot(_),f)})).apply(this,arguments)}function Et(_,f){return gl.apply(this,arguments)}function gl(){return(gl=(0,y.Z)(function*(_,f){const g=(0,U.m9)(_);return yield Ki(!1,g,f.providerId),Lh(g,f)})).apply(this,arguments)}function z_(_,f){return ml.apply(this,arguments)}function ml(){return(ml=(0,y.Z)(function*(_,f){return Bg((0,U.m9)(_),f)})).apply(this,arguments)}function jg(_,f){return yl.apply(this,arguments)}function yl(){return(yl=(0,y.Z)(function*(_,f){return Dn(_,"POST","/v1/accounts:signInWithCustomToken",Ot(_,f))})).apply(this,arguments)}function xa(_,f){return vl.apply(this,arguments)}function vl(){return(vl=(0,y.Z)(function*(_,f){const g=ot(_),I=yield jg(g,{token:f,returnSecureToken:!0}),T=yield Xr._fromIdTokenResponse(g,"signIn",I);return yield g._updateCurrentUser(T.user),T})).apply(this,arguments)}class Ou{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?_e._fromServerResponse(f,g):Ze(f,"internal-error")}}class _e extends Ou{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new _e(g)}}function Ft(_,f,g){var I;J((null===(I=g.url)||void 0===I?void 0:I.length)>0,_,"invalid-continue-uri"),J(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(J(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&(J(g.android.packageName.length>0,_,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function W_(_,f,g){return _l.apply(this,arguments)}function _l(){return(_l=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_),T={requestType:"PASSWORD_RESET",email:f};g&&Ft(I,T,g),yield kg(I,T)})).apply(this,arguments)}function Bn(_,f,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,y.Z)(function*(_,f,g){yield Br((0,U.m9)(_),{oobCode:f,newPassword:g})})).apply(this,arguments)}function Fu(_,f){return jr.apply(this,arguments)}function jr(){return(jr=(0,y.Z)(function*(_,f){yield Pg((0,U.m9)(_),{oobCode:f})})).apply(this,arguments)}function wl(_,f){return Uu.apply(this,arguments)}function Uu(){return(Uu=(0,y.Z)(function*(_,f){const g=(0,U.m9)(_),I=yield Br(g,{oobCode:f}),T=I.requestType;switch(J(T,g,"internal-error"),T){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":J(I.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":J(I.mfaInfo,g,"internal-error");default:J(I.email,g,"internal-error")}let M=null;return I.mfaInfo&&(M=Ou._fromServerResponse(ot(g),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:M},operation:T}})).apply(this,arguments)}function Hg(_,f){return Il.apply(this,arguments)}function Il(){return(Il=(0,y.Z)(function*(_,f){const{data:g}=yield wl((0,U.m9)(_),f);return g.email})).apply(this,arguments)}function G_(_,f,g){return _o.apply(this,arguments)}function _o(){return(_o=(0,y.Z)(function*(_,f,g){const I=ot(_),T=yield Or(I,{returnSecureToken:!0,email:f,password:g}),M=yield Xr._fromIdTokenResponse(I,"signIn",T);return yield I._updateCurrentUser(M.user),M})).apply(this,arguments)}function On(_,f,g){return Sa((0,U.m9)(_),Nh.credential(f,g))}function vi(_,f,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_),T={requestType:"EMAIL_SIGNIN",email:f};J(g.handleCodeInApp,I,"argument-error"),g&&Ft(I,T,g),yield kr(I,T)})).apply(this,arguments)}function Ra(_,f){return"EMAIL_SIGNIN"===ku.parseLink(f)?.operation}function Yi(_,f,g){return Fh.apply(this,arguments)}function Fh(){return(Fh=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_),T=Nh.credentialWithLink(f,g||xe());return J(T._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),Sa(I,T)})).apply(this,arguments)}function zg(_,f){return Uh.apply(this,arguments)}function Uh(){return(Uh=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:createAuthUri",Ot(_,f))})).apply(this,arguments)}function q_(_,f){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,y.Z)(function*(_,f){const I={identifier:f,continueUri:Me()?xe():"http://localhost"},{signinMethods:T}=yield zg((0,U.m9)(_),I);return T||[]})).apply(this,arguments)}function El(_,f){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,y.Z)(function*(_,f){const g=(0,U.m9)(_),T={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};f&&Ft(g.auth,T,f);const{email:M}=yield Cs(g.auth,T);M!==_.email&&(yield _.reload())})).apply(this,arguments)}function bl(_,f,g){return Cl.apply(this,arguments)}function Cl(){return(Cl=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:f};g&&Ft(I.auth,M,g);const{email:Z}=yield Nu(I.auth,M);Z!==_.email&&(yield _.reload())})).apply(this,arguments)}function Wg(_,f){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,y.Z)(function*(_,f){return St(_,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Gg(_,f){return Tl.apply(this,arguments)}function Tl(){return(Tl=(0,y.Z)(function*(_,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const I=(0,U.m9)(_),M={idToken:yield I.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield Dt(I,Wg(I.auth,M));I.displayName=Z.displayName||null,I.photoURL=Z.photoUrl||null;const de=I.providerData.find(({providerId:$e})=>"password"===$e);de&&(de.displayName=I.displayName,de.photoURL=I.photoURL),yield I._updateTokensIfNecessary(Z)})).apply(this,arguments)}function qg(_,f){return wo((0,U.m9)(_),f,null)}function Vh(_,f){return wo((0,U.m9)(_),null,f)}function wo(_,f,g){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,y.Z)(function*(_,f,g){const{auth:I}=_,M={idToken:yield _.getIdToken(),returnSecureToken:!0};f&&(M.email=f),g&&(M.password=g);const Z=yield Dt(_,ll(I,M));yield _._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class vn{constructor(f,g,I={}){this.isNewUser=f,this.providerId=g,this.profile=I}}class Ni extends vn{constructor(f,g,I,T){super(f,g,I),this.username=T}}class hn extends vn{constructor(f,g){super(f,"facebook.com",g)}}class Zg extends Ni{constructor(f,g){super(f,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Yg extends vn{constructor(f,g){super(f,"google.com",g)}}class Qg extends Ni{constructor(f,g,I){super(f,"twitter.com",g,I)}}function Jg(_){const{user:f,_tokenResponse:g}=_;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Kg(_){var f,g;if(!_)return null;const{providerId:I}=_,T=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},M=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!I&&_?.idToken){const Z=null===(g=null===(f=tt(_.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new vn(M,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!I)return null;switch(I){case"facebook.com":return new hn(M,T);case"github.com":return new Zg(M,T);case"google.com":return new Yg(M,T);case"twitter.com":return new Qg(M,T,_.screenName||null);case"custom":case"anonymous":return new vn(M,null);default:return new vn(M,I,T)}}(g)}class Hr{constructor(f,g,I){this.type=f,this.credential=g,this.auth=I}static _fromIdtoken(f,g){return new Hr("enroll",f,g)}static _fromMfaPendingCredential(f){return new Hr("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,I;if(f?.multiFactorSession){if(null!==(g=f.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Hr._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null!==(I=f.multiFactorSession)&&void 0!==I&&I.idToken)return Hr._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Ml{constructor(f,g,I){this.session=f,this.hints=g,this.signInResolver=I}static _fromError(f,g){const I=ot(f),T=g.customData._serverResponse,M=(T.mfaInfo||[]).map(de=>Ou._fromServerResponse(I,de));J(T.mfaPendingCredential,I,"internal-error");const Z=Hr._fromMfaPendingCredential(T.mfaPendingCredential);return new Ml(Z,M,function(){var de=(0,y.Z)(function*($e){const it=yield $e._process(I,Z);delete T.mfaInfo,delete T.mfaPendingCredential;const Rt=Object.assign(Object.assign({},T),{idToken:it.idToken,refreshToken:it.refreshToken});switch(g.operationType){case"signIn":const Qt=yield Xr._fromIdTokenResponse(I,g.operationType,Rt);return yield I._updateCurrentUser(Qt.user),Qt;case"reauthenticate":return J(g.user,I,"internal-error"),Xr._forOperation(g.user,g.operationType,Rt);default:Ze(I,"internal-error")}});return function($e){return de.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,y.Z)(function*(){return g.signInResolver(f)})()}}function Xg(_,f){var g;const I=(0,U.m9)(_),T=f;return J(f.customData.operationType,I,"argument-error"),J(null===(g=T.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,I,"argument-error"),Ml._fromError(I,T)}function Pa(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:start",Ot(_,f))}class zu{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(I=>Ou._fromServerResponse(f.auth,I)))})}static _fromUser(f){return new zu(f)}getSession(){var f=this;return(0,y.Z)(function*(){return Hr._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,g){var I=this;return(0,y.Z)(function*(){const T=f,M=yield I.getSession(),Z=yield Dt(I.user,T._process(I.user.auth,M,g));return yield I.user._updateTokensIfNecessary(Z),I.user.reload()})()}unenroll(f){var g=this;return(0,y.Z)(function*(){var I;const T="string"==typeof f?f:f.uid,M=yield g.user.getIdToken(),Z=yield Dt(g.user,function Hu(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:withdraw",Ot(_,f))}(g.user.auth,{idToken:M,mfaEnrollmentId:T}));g.enrolledFactors=g.enrolledFactors.filter(({uid:de})=>de!==T),yield g.user._updateTokensIfNecessary(Z);try{yield g.user.reload()}catch(de){if("auth/user-token-expired"!==(null===(I=de)||void 0===I?void 0:I.code))throw de}})()}}const em=new WeakMap;function $h(_){const f=(0,U.m9)(_);return em.has(f)||em.set(f,zu._fromUser(f)),em.get(f)}const Pi="__sak";class Nl{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Pi,"1"),this.storage.removeItem(Pi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Ns=(()=>{class _ extends Nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,I)=>this.onStorageEvent(g,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Pl(){const _=(0,U.z$)();return N(_)||Ae(_)}()&&function gi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Yt(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const I of Object.keys(this.listeners)){const T=this.storage.getItem(I),M=this.localCache[I];T!==M&&g(I,M,T)}}onStorageEvent(g,I=!1){if(!g.key)return void this.forAllChangedKeys((de,$e,it)=>{this.notifyListeners(de,it)});const T=g.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const de=this.storage.getItem(T);if(g.newValue!==de)null!==g.newValue?this.storage.setItem(T,g.newValue):this.storage.removeItem(T);else if(this.localCache[T]===g.newValue&&!I)return}const M=()=>{const de=this.storage.getItem(T);!I&&this.localCache[T]===de||this.notifyListeners(T,de)},Z=this.storage.getItem(T);!function At(){return(0,U.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,I){this.localCache[g]=I;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,I,T)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:I,newValue:T}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,I){var T=()=>super._set,M=this;return(0,y.Z)(function*(){yield T().call(M,g,I),M.localCache[g]=JSON.stringify(I)})()}_get(g){var I=()=>super._get,T=this;return(0,y.Z)(function*(){const M=yield I().call(T,g);return T.localCache[g]=JSON.stringify(M),M})()}_remove(g){var I=()=>super._remove,T=this;return(0,y.Z)(function*(){yield I().call(T,g),delete T.localCache[g]})()}}return _.type="LOCAL",_})(),Qi=(()=>{class _ extends Nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,I){}_removeListener(g,I){}}return _.type="SESSION",_})();let Wu=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const I=this.receivers.find(M=>M.isListeningto(g));if(I)return I;const T=new _(g);return this.receivers.push(T),T}isListeningto(g){return this.eventTarget===g}handleEvent(g){var I=this;return(0,y.Z)(function*(){const T=g,{eventId:M,eventType:Z,data:de}=T.data,$e=I.handlersMap[Z];if(!$e?.size)return;T.ports[0].postMessage({status:"ack",eventId:M,eventType:Z});const it=Array.from($e).map(function(){var Qt=(0,y.Z)(function*(Cr){return Cr(T.origin,de)});return function(Cr){return Qt.apply(this,arguments)}}()),Rt=yield function kl(_){return Promise.all(_.map(function(){var f=(0,y.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(I){return{fulfilled:!1,reason:I}}});return function(g){return f.apply(this,arguments)}}()))}(it);T.ports[0].postMessage({status:"done",eventId:M,eventType:Z,response:Rt})})()}_subscribe(g,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(I)}_unsubscribe(g,I){this.handlersMap[g]&&I&&this.handlersMap[g].delete(I),(!I||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function Io(_="",f=10){let g="";for(let I=0;I<f;I++)g+=Math.floor(10*Math.random());return _+g}class rm{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,I=50){var T=this;return(0,y.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let Z,de;return new Promise(($e,it)=>{const Rt=Io("",20);M.port1.start();const Qt=setTimeout(()=>{it(new Error("unsupported_event"))},I);de={messageChannel:M,onMessage(Cr){const Lr=Cr;if(Lr.data.eventId===Rt)switch(Lr.data.status){case"ack":clearTimeout(Qt),Z=setTimeout(()=>{it(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),$e(Lr.data.response);break;default:clearTimeout(Qt),clearTimeout(Z),it(new Error("invalid_response"))}}},T.handlers.add(de),M.port1.addEventListener("message",de.onMessage),T.target.postMessage({eventType:f,eventId:Rt,data:g},[M.port2])}).finally(()=>{de&&T.removeMessageHandler(de)})})()}}function Ln(){return window}function ti(){return typeof Ln().WorkerGlobalScope<"u"&&"function"==typeof Ln().importScripts}function Ps(){return(Ps=(0,y.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Oa="firebaseLocalStorageDb",Fa="firebaseLocalStorage",qu="fbase_key";class Eo{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function Ku(_,f){return _.transaction([Fa],f?"readwrite":"readonly").objectStore(Fa)}function Wh(){const _=indexedDB.open(Oa,1);return new Promise((f,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const I=_.result;try{I.createObjectStore(Fa,{keyPath:qu})}catch(T){g(T)}}),_.addEventListener("success",(0,y.Z)(function*(){const I=_.result;I.objectStoreNames.contains(Fa)?f(I):(I.close(),yield function zh(){const _=indexedDB.deleteDatabase(Oa);return new Eo(_).toPromise()}(),f(yield Wh()))}))})}function Ua(_,f,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,y.Z)(function*(_,f,g){const I=Ku(_,!0).put({[qu]:f,value:g});return new Eo(I).toPromise()})).apply(this,arguments)}function Zu(){return(Zu=(0,y.Z)(function*(_,f){const g=Ku(_,!1).get(f),I=yield new Eo(g).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function Gh(_,f){const g=Ku(_,!0).delete(f);return new Eo(g).toPromise()}const Yu=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,y.Z)(function*(){return g.db||(g.db=yield Wh()),g.db})()}_withRetries(g){var I=this;return(0,y.Z)(function*(){let T=0;for(;;)try{const M=yield I._openDb();return yield g(M)}catch(M){if(T++>3)throw M;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,y.Z)(function*(){return ti()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,y.Z)(function*(){g.receiver=Wu._getInstance(function Gu(){return ti()?self:null}()),g.receiver._subscribe("keyChanged",function(){var I=(0,y.Z)(function*(T,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(T,M){return I.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var I=(0,y.Z)(function*(T,M){return["keyChanged"]});return function(T,M){return I.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,y.Z)(function*(){var I,T;if(g.activeServiceWorker=yield function im(){return Ps.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new rm(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(I=M[0])||void 0===I?void 0:I.fulfilled)&&(null===(T=M[0])||void 0===T?void 0:T.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var I=this;return(0,y.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function Ol(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:g},I.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,y.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Wh();return yield Ua(g,Pi,"1"),yield Gh(g,Pi),!0}catch{}return!1})()}_withPendingWrite(g){var I=this;return(0,y.Z)(function*(){I.pendingWrites++;try{yield g()}finally{I.pendingWrites--}})()}_set(g,I){var T=this;return(0,y.Z)(function*(){return T._withPendingWrite((0,y.Z)(function*(){return yield T._withRetries(M=>Ua(M,g,I)),T.localCache[g]=I,T.notifyServiceWorker(g)}))})()}_get(g){var I=this;return(0,y.Z)(function*(){const T=yield I._withRetries(M=>function sm(_,f){return Zu.apply(this,arguments)}(M,g));return I.localCache[g]=T,T})()}_remove(g){var I=this;return(0,y.Z)(function*(){return I._withPendingWrite((0,y.Z)(function*(){return yield I._withRetries(T=>Gh(T,g)),delete I.localCache[g],I.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,y.Z)(function*(){const I=yield g._withRetries(Z=>{const de=Ku(Z,!1).getAll();return new Eo(de).toPromise()});if(!I)return[];if(0!==g.pendingWrites)return[];const T=[],M=new Set;for(const{fbase_key:Z,value:de}of I)M.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(de)&&(g.notifyListeners(Z,de),T.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!M.has(Z)&&(g.notifyListeners(Z,null),T.push(Z));return T})()}notifyListeners(g,I){this.localCache[g]=I;const T=this.listeners[g];if(T)for(const M of Array.from(T))M(I)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,y.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(I)}_removeListener(g,I){this.listeners[g]&&(this.listeners[g].delete(I),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function om(_,f){return St(_,"POST","/v2/accounts/mfaSignIn:start",Ot(_,f))}function Os(){return(Os=(0,y.Z)(function*(_){return(yield St(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Do(_){return new Promise((f,g)=>{const I=document.createElement("script");I.setAttribute("src",_),I.onload=f,I.onerror=T=>{const M=Pe("internal-error");M.customData=T,g(M)},I.type="text/javascript",I.charset="UTF-8",function Ba(){var _,f;return null!==(f=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==f?f:document}().appendChild(I)})}function Ll(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Zh=1e12;class K_{constructor(f){this.auth=f,this.counter=Zh,this._widgets=new Map}render(f,g){const I=this.counter;return this._widgets.set(I,new sn(f,this.auth.name,g||{})),this.counter++,I}reset(f){var g;const I=f||Zh;null===(g=this._widgets.get(I))||void 0===g||g.delete(),this._widgets.delete(I)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Zh))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,y.Z)(function*(){var I;return null===(I=g._widgets.get(f||Zh))||void 0===I||I.execute(),""})()}}class sn{constructor(f,g,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const T="string"==typeof f?document.getElementById(f):f;J(T,"argument-error",{appName:g}),this.container=T,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Z_(_){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<_;I++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const am=Ll("rcb"),yD=new Fe(3e4,6e4);class _D{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(f=Ln().grecaptcha)||void 0===f||!f.render)}load(f,g=""){return J(function wD(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(Ln().grecaptcha):new Promise((I,T)=>{const M=Ln().setTimeout(()=>{T(Pe(f,"network-request-failed"))},yD.get());Ln()[am]=()=>{Ln().clearTimeout(M),delete Ln()[am];const de=Ln().grecaptcha;if(!de)return void T(Pe(f,"internal-error"));const $e=de.render;de.render=(it,Rt)=>{const Qt=$e(it,Rt);return this.counter++,Qt},this.hostLanguage=g,I(de)},Do(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:am,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),T(Pe(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var g;return!(null===(g=Ln().grecaptcha)||void 0===g||!g.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ID{load(f){return(0,y.Z)(function*(){return new K_(f)})()}clearedOneInstance(){}}const ja="recaptcha",ED={theme:"light",type:"image"};class Y_{constructor(f,g=Object.assign({},ED),I){this.parameters=g,this.type=ja,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ot(I),this.isInvisible="invisible"===this.parameters.size,J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const T="string"==typeof f?document.getElementById(f):f;J(T,this.auth,"argument-error"),this.container=T,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ID:new _D,this.validateStartingState()}verify(){var f=this;return(0,y.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),I=f.getAssertedRecaptcha();return I.getResponse(g)||new Promise(M=>{const Z=de=>{!de||(f.tokenChangeListeners.delete(Z),M(de))};f.tokenChangeListeners.add(Z),f.isInvisible&&I.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){J(!this.parameters.sitekey,this.auth,"argument-error"),J(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),J(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(I=>I(g)),"function"==typeof f)f(g);else if("string"==typeof f){const I=Ln()[f];"function"==typeof I&&I(g)}}}assertNotDestroyed(){J(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,y.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const I=document.createElement("div");g.appendChild(I),g=I}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,y.Z)(function*(){J(Me()&&!ti(),f.auth,"internal-error"),yield function $n(){let _=null;return new Promise(f=>{"complete"!==document.readyState?(_=()=>f(),window.addEventListener("load",_)):f()}).catch(f=>{throw _&&window.removeEventListener("load",_),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ju(_){return Os.apply(this,arguments)}(f.auth);J(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return J(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class tn{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=mo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function ki(_,f,g){return Je.apply(this,arguments)}function Je(){return(Je=(0,y.Z)(function*(_,f,g){const I=ot(_),T=yield rr(I,f,(0,U.m9)(g));return new tn(T,M=>Sa(I,M))})).apply(this,arguments)}function Oi(_,f,g){return cn.apply(this,arguments)}function cn(){return(cn=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_);yield Ki(!1,I,"phone");const T=yield rr(I.auth,f,(0,U.m9)(g));return new tn(T,M=>Et(I,M))})).apply(this,arguments)}function Li(_,f,g){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_),T=yield rr(I.auth,f,(0,U.m9)(g));return new tn(T,M=>z_(I,M))})).apply(this,arguments)}function rr(_,f,g){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,y.Z)(function*(_,f,g){var I;const T=yield g.verify();try{let M;if(J("string"==typeof T,_,"argument-error"),J(g.type===ja,_,"argument-error"),M="string"==typeof f?{phoneNumber:f}:f,"session"in M){const Z=M.session;if("phoneNumber"in M)return J("enroll"===Z.type,_,"internal-error"),(yield Pa(_,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:T}})).phoneSessionInfo.sessionInfo;{J("signin"===Z.type,_,"internal-error");const de=(null===(I=M.multiFactorHint)||void 0===I?void 0:I.uid)||M.multiFactorUid;return J(de,_,"missing-multi-factor-info"),(yield om(_,{mfaPendingCredential:Z.credential,mfaEnrollmentId:de,phoneSignInInfo:{recaptchaToken:T}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield V_(_,{phoneNumber:M.phoneNumber,recaptchaToken:T});return Z}}finally{g._reset()}})).apply(this,arguments)}function Yh(_,f){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,y.Z)(function*(_,f){yield Lh((0,U.m9)(_),f)})).apply(this,arguments)}let um=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=ot(g)}verifyPhoneNumber(g,I){return rr(this.auth,g,(0,U.m9)(I))}static credential(g,I){return mo._fromVerification(g,I)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:I,temporaryProof:T}=g;return I&&T?mo._fromTokenResponse(I,T):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function bo(_,f){return f?q(f):(J(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Qh extends Vr{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Ss(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Ss(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Ss(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Us(_){return $g(_.auth,new Qh(_),_.bypassAuthState)}function rt(_){const{auth:f,user:g}=_;return J(g,f,"internal-error"),Bg(g,new Qh(_),_.bypassAuthState)}function Ul(_){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,y.Z)(function*(_){const{auth:f,user:g}=_;return J(g,f,"internal-error"),Lh(g,new Qh(_),_.bypassAuthState)})).apply(this,arguments)}class cm{constructor(f,g,I,T,M=!1){this.auth=f,this.resolver=I,this.user=T,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,y.Z)(function*(I,T){f.pendingPromise={resolve:I,reject:T};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(M){f.reject(M)}});return function(I,T){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,y.Z)(function*(){const{urlResponse:I,sessionId:T,postBody:M,tenantId:Z,error:de,type:$e}=f;if(de)return void g.reject(de);const it={auth:g.auth,requestUri:I,sessionId:T,tenantId:Z||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask($e)(it))}catch(Rt){g.reject(Rt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Us;case"linkViaPopup":case"linkViaRedirect":return Ul;case"reauthViaPopup":case"reauthViaRedirect":return rt;default:Ze(this.auth,"internal-error")}}resolve(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){ce(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Jh=new Fe(2e3,1e4);function ir(_,f,g){return Vl.apply(this,arguments)}function Vl(){return(Vl=(0,y.Z)(function*(_,f,g){const I=ot(_);le(_,f,nr);const T=bo(I,g);return new Ha(I,"signInViaPopup",f,T).executeNotNull()})).apply(this,arguments)}function Xh(_,f,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_);le(I.auth,f,nr);const T=bo(I.auth,g);return new Ha(I.auth,"reauthViaPopup",f,T,I).executeNotNull()})).apply(this,arguments)}function ef(_,f,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_);le(I.auth,f,nr);const T=bo(I.auth,g);return new Ha(I.auth,"linkViaPopup",f,T,I).executeNotNull()})).apply(this,arguments)}let Ha=(()=>{class _ extends cm{constructor(g,I,T,M,Z){super(g,I,M,Z),this.provider=T,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,y.Z)(function*(){const I=yield g.execute();return J(I,g.auth,"internal-error"),I})()}onExecution(){var g=this;return(0,y.Z)(function*(){ce(1===g.filter.length,"Popup operations only handle one event");const I=Io();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],I),g.authWindow.associatedEvent=I,g.resolver._originValidation(g.auth).catch(T=>{g.reject(T)}),g.resolver._isIframeWebStorageSupported(g.auth,T=>{T||g.reject(Pe(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var I,T;this.pollId=null!==(T=null===(I=this.authWindow)||void 0===I?void 0:I.window)&&void 0!==T&&T.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Jh.get())};g()}}return _.currentPopupAction=null,_})();const To=new Map;class So extends cm{constructor(f,g,I=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,I),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,y.Z)(function*(){let I=To.get(g.auth._key());if(!I){try{const M=(yield function $l(_,f){return Fi.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;I=()=>Promise.resolve(M)}catch(T){I=()=>Promise.reject(T)}To.set(g.auth._key(),I)}return g.bypassAuthState||To.set(g.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,I=this;return(0,y.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(I,f);if("unknown"!==f.type){if(f.eventId){const T=yield I.auth._redirectUserForId(f.eventId);if(T)return I.user=T,g().call(I,f);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,y.Z)(function*(){})()}cleanUp(){}}function Fi(){return(Fi=(0,y.Z)(function*(_,f){const g=ts(f),I=es(_);if(!(yield I._isAvailable()))return!1;const T="true"===(yield I._get(g));return yield I._remove(g),T})).apply(this,arguments)}function Bs(_,f){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,y.Z)(function*(_,f){return es(_)._set(ts(f),"true")})).apply(this,arguments)}function jl(){To.clear()}function jn(_,f){To.set(_._key(),f)}function es(_){return q(_._redirectPersistence)}function ts(_){return L("pendingRedirect",_.config.apiKey,_.name)}function Hn(_,f,g){return function fn(_,f,g){return $s.apply(this,arguments)}(_,f,g)}function $s(){return($s=(0,y.Z)(function*(_,f,g){const I=ot(_);le(_,f,nr);const T=bo(I,g);return yield Bs(T,I),T._openRedirect(I,f,"signInViaRedirect")})).apply(this,arguments)}function zr(_,f,g){return function Yn(_,f,g){return _i.apply(this,arguments)}(_,f,g)}function _i(){return(_i=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_);le(I.auth,f,nr);const T=bo(I.auth,g);yield Bs(T,I.auth);const M=yield Ao(I);return T._openRedirect(I.auth,f,"reauthViaRedirect",M)})).apply(this,arguments)}function tf(_,f,g){return function lm(_,f,g){return ni.apply(this,arguments)}(_,f,g)}function ni(){return(ni=(0,y.Z)(function*(_,f,g){const I=(0,U.m9)(_);le(I.auth,f,nr);const T=bo(I.auth,g);yield Ki(!1,I,f.providerId),yield Bs(T,I.auth);const M=yield Ao(I);return T._openRedirect(I.auth,f,"linkViaRedirect",M)})).apply(this,arguments)}function Vi(_,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,y.Z)(function*(_,f){return yield ot(_)._initializationPromise,ri(_,f,!1)})).apply(this,arguments)}function ri(_,f){return js.apply(this,arguments)}function js(){return(js=(0,y.Z)(function*(_,f,g=!1){const I=ot(_),T=bo(I,f),Z=yield new So(I,T,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield I._persistUserIfCurrent(Z.user),yield I._setRedirectUser(null,f)),Z})).apply(this,arguments)}function Ao(_){return xo.apply(this,arguments)}function xo(){return(xo=(0,y.Z)(function*(_){const f=Io(`${_.uid}:::`);return _._redirectEventId=f,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),f})).apply(this,arguments)}class za{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(f,I)&&(g=!0,this.sendToConsumer(f,I),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Nt(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Xu(_);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var I;if(f.error&&!Xu(f)){const T=(null===(I=f.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";g.onError(Pe(this.auth,T))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const I=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&I}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Hl(f))}saveEventToCache(f){this.cachedEventUids.add(Hl(f)),this.lastProcessedEventTime=Date.now()}}function Hl(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(f=>f).join("-")}function Xu({type:_,error:f}){return"unknown"===_&&"auth/no-auth-event"===f?.code}function ii(_){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,y.Z)(function*(_,f={}){return St(_,"GET","/v1/projects",f)})).apply(this,arguments)}const Ro=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q_=/^https?/;function Wr(){return(Wr=(0,y.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:f}=yield ii(_);for(const g of f)try{if(dm(g))return}catch{}Ze(_,"unauthorized-domain")})).apply(this,arguments)}function dm(_){const f=xe(),{protocol:g,hostname:I}=new URL(f);if(_.startsWith("chrome-extension://")){const Z=new URL(_);return""===Z.hostname&&""===I?"chrome-extension:"===g&&_.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===I}if(!Q_.test(g))return!1;if(Ro.test(_))return I===_;const T=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+T+"|"+T+")$","i").test(I)}const rf=new Fe(3e4,6e4);function zl(){const _=Ln().___jsl;if(_?.H)for(const f of Object.keys(_.H))if(_.H[f].r=_.H[f].r||[],_.H[f].L=_.H[f].L||[],_.H[f].r=[..._.H[f].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let wn=null;function Bi(_){return wn=wn||function J_(_){return new Promise((f,g)=>{var I,T,M;function Z(){zl(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{zl(),g(Pe(_,"network-request-failed"))},timeout:rf.get()})}if(null!==(T=null===(I=Ln().gapi)||void 0===I?void 0:I.iframes)&&void 0!==T&&T.Iframe)f(gapi.iframes.getContext());else{if(null===(M=Ln().gapi)||void 0===M||!M.load){const de=Ll("iframefcb");return Ln()[de]=()=>{gapi.load?Z():g(Pe(_,"network-request-failed"))},Do(`https://apis.google.com/js/api.js?onload=${de}`).catch($e=>g($e))}Z()}}).catch(f=>{throw wn=null,f})}(_),wn}const Wl=new Fe(5e3,15e3),Gl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function fm(_){const f=_.config;J(f.authDomain,_,"auth-domain-config-required");const g=f.emulator?Jt(f,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,I={apiKey:f.apiKey,appName:_.name,v:P.SDK_VERSION},T=hm.get(_.config.apiHost);T&&(I.eid=T);const M=_._getFrameworks();return M.length&&(I.fw=M.join(",")),`${g}?${(0,U.xO)(I).slice(1)}`}function Wa(){return Wa=(0,y.Z)(function*(_){const f=yield Bi(_),g=Ln().gapi;return J(g,_,"internal-error"),f.open({where:document.body,url:fm(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Gl,dontclear:!0},I=>new Promise(function(){var T=(0,y.Z)(function*(M,Z){yield I.restyle({setHideOnLeave:!1});const de=Pe(_,"network-request-failed"),$e=Ln().setTimeout(()=>{Z(de)},Wl.get());function it(){Ln().clearTimeout($e),M(I)}I.ping(it).then(it,()=>{Z(de)})});return function(M,Z){return T.apply(this,arguments)}}()))}),Wa.apply(this,arguments)}const pm={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ga{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zs(_,f,g,I,T,M){J(_.config.authDomain,_,"auth-domain-config-required"),J(_.config.apiKey,_,"invalid-api-key");const Z={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:I,v:P.SDK_VERSION,eventId:T};if(f instanceof nr){f.setDefaultLanguage(_.languageCode),Z.providerId=f.providerId||"",(0,U.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[$e,it]of Object.entries(M||{}))Z[$e]=it}if(f instanceof yo){const $e=f.getScopes().filter(it=>""!==it);$e.length>0&&(Z.scopes=$e.join(","))}_.tenantId&&(Z.tid=_.tenantId);const de=Z;for(const $e of Object.keys(de))void 0===de[$e]&&delete de[$e];return`${function uf({config:_}){return _.emulator?Jt(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,U.xO)(de).slice(1)}`}const Ws="webStorageSupport",Gr=class Oo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qi,this._completeRedirectFn=ri,this._overrideRedirectResult=jn}_openPopup(f,g,I,T){var M=this;return(0,y.Z)(function*(){var Z;ce(null===(Z=M.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const de=zs(f,g,I,xe(),T);return function e0(_,f,g,I=500,T=600){const M=Math.max((window.screen.availHeight-T)/2,0).toString(),Z=Math.max((window.screen.availWidth-I)/2,0).toString();let de="";const $e=Object.assign(Object.assign({},pm),{width:I.toString(),height:T.toString(),top:M,left:Z}),it=(0,U.z$)().toLowerCase();g&&(de=Q(it)?"_blank":g),x(it)&&(f=f||"http://localhost",$e.scrollbars="yes");const Rt=Object.entries($e).reduce((Cr,[Lr,Gs])=>`${Cr}${Lr}=${Gs},`,"");if(function Zt(_=(0,U.z$)()){var f;return Ae(_)&&!(null===(f=window.navigator)||void 0===f||!f.standalone)}(it)&&"_self"!==de)return function ko(_,f){const g=document.createElement("a");g.href=_,g.target=f;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(I)}(f||"",de),new Ga(null);const Qt=window.open(f||"",de,Rt);J(Qt,_,"popup-blocked");try{Qt.focus()}catch{}return new Ga(Qt)}(f,de,Io())})()}_openRedirect(f,g,I,T){var M=this;return(0,y.Z)(function*(){return yield M._originValidation(f),function Hh(_){Ln().location.href=_}(zs(f,g,I,xe(),T)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:T,promise:M}=this.eventManagers[g];return T?Promise.resolve(T):(ce(M,"If manager is not set, promise should be"),M)}const I=this.initAndGetManager(f);return this.eventManagers[g]={promise:I},I.catch(()=>{delete this.eventManagers[g]}),I}initAndGetManager(f){var g=this;return(0,y.Z)(function*(){const I=yield function af(_){return Wa.apply(this,arguments)}(f),T=new za(f);return I.register("authEvent",M=>(J(M?.authEvent,f,"invalid-auth-event"),{status:T.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:T},g.iframes[f._key()]=I,T})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(Ws,{type:Ws},T=>{var M;const Z=null===(M=T?.[0])||void 0===M?void 0:M[Ws];void 0!==Z&&g(!!Z),Ze(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function nf(_){return Wr.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Yt()||N()||Ae()}};class Kl extends class ec{constructor(f){this.factorId=f}_process(f,g,I){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,I);case"signin":return this._finalizeSignIn(f,g.credential);default:return ee("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Kl(f)}_finalizeEnroll(f,g,I){return function Rl(_,f){return St(_,"POST","/v2/accounts/mfaEnrollment:finalize",Ot(_,f))}(f,{idToken:g,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Qu(_,f){return St(_,"POST","/v2/accounts/mfaSignIn:finalize",Ot(_,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zl=(()=>{class _{constructor(){}static assertion(g){return Kl._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var Lo="@firebase/auth",qa="0.20.11";class cf{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,y.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(I=>{var T;f((null===(T=I)||void 0===T?void 0:T.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const tc=(0,U.Pz)("authIdTokenMaxAge")||300;let df=null;const fr=_=>function(){var f=(0,y.Z)(function*(g){const I=g&&(yield g.getIdTokenResult()),T=I&&((new Date).getTime()-Date.parse(I.issuedAtTime))/1e3;if(T&&T>tc)return;const M=I?.token;df!==M&&(df=M,yield fetch(_,{method:M?"POST":"DELETE",headers:M?{Authorization:`Bearer ${M}`}:{}}))});return function(g){return f.apply(this,arguments)}}();function Yl(_=(0,P.getApp)()){const f=(0,P._getProvider)(_,"auth");if(f.isInitialized())return f.getImmediate();const g=function ie(_,f){const g=(0,P._getProvider)(_,"auth");if(g.isInitialized()){const T=g.getImmediate(),M=g.getOptions();if((0,U.vZ)(M,f??{}))return T;Ze(T,"already-initialized")}return g.initialize({options:f})}(_,{popupRedirectResolver:Gr,persistence:[Yu,Ns,Qi]}),I=(0,U.Pz)("authTokenSyncURL");if(I){const M=fr(I);(function Na(_,f,g){(0,U.m9)(_).beforeAuthStateChanged(f,g)})(g,M,()=>M(g.currentUser)),function $u(_,f,g,I){(0,U.m9)(_).onIdTokenChanged(f,g,I)}(g,Z=>M(Z))}const T=(0,U.q4)("auth");return T&&ws(g,`http://${T}`),g}!function vm(_){(0,P._registerComponent)(new me.wA("auth",(f,{options:g})=>{const I=f.getProvider("app").getImmediate(),T=f.getProvider("heartbeat"),{apiKey:M,authDomain:Z}=I.options;return((de,$e)=>{J(M&&!M.includes(":"),"invalid-api-key",{appName:de.name}),J(!Z?.includes(":"),"argument-error",{appName:de.name});const it={apiKey:M,authDomain:Z,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:un(_)},Rt=new _a(de,$e,it);return function X(_,f){const g=f?.persistence||[],I=(Array.isArray(g)?g:[g]).map(q);f?.errorMap&&_._updateErrorMap(f.errorMap),_._initializeWithPersistence(I,f?.popupRedirectResolver)}(Rt,g),Rt})(I,T)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,I)=>{f.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new me.wA("auth-internal",f=>{const g=ot(f.getProvider("auth").getImmediate());return new cf(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(Lo,qa,function ym(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,P.registerVersion)(Lo,qa,"esm2017")}("Browser")},2090:(lt,Te,O)=>{O.d(Te,{$s:()=>We,BH:()=>kt,G6:()=>le,L:()=>fe,LL:()=>Xt,P0:()=>Me,Pz:()=>jt,Sg:()=>Fe,UG:()=>ye,US:()=>me,ZB:()=>j,ZR:()=>An,aH:()=>et,b$:()=>ue,eu:()=>J,hl:()=>Le,jU:()=>He,m9:()=>Bt,ne:()=>yn,pd:()=>ya,q4:()=>xe,r3:()=>Ir,ru:()=>re,tV:()=>Ne,uI:()=>ke,vZ:()=>ze,w1:()=>Ze,xO:()=>dn,xb:()=>xi,z$:()=>Oe,zI:()=>ee,zd:()=>Nr});const oe=function(V){const L=[];let H=0;for(let k=0;k<V.length;k++){let x=V.charCodeAt(k);x<128?L[H++]=x:x<2048?(L[H++]=x>>6|192,L[H++]=63&x|128):55296==(64512&x)&&k+1<V.length&&56320==(64512&V.charCodeAt(k+1))?(x=65536+((1023&x)<<10)+(1023&V.charCodeAt(++k)),L[H++]=x>>18|240,L[H++]=x>>12&63|128,L[H++]=x>>6&63|128,L[H++]=63&x|128):(L[H++]=x>>12|224,L[H++]=x>>6&63|128,L[H++]=63&x|128)}return L},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(V,L){if(!Array.isArray(V))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=L?this.byteToCharMapWebSafe_:this.byteToCharMap_,k=[];for(let x=0;x<V.length;x+=3){const N=V[x],Q=x+1<V.length,De=Q?V[x+1]:0,qe=x+2<V.length,Ye=qe?V[x+2]:0;let wt=(15&De)<<2|Ye>>6,Zt=63&Ye;qe||(Zt=64,Q||(wt=64)),k.push(H[N>>2],H[(3&N)<<4|De>>4],H[wt],H[Zt])}return k.join("")},encodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?btoa(V):this.encodeByteArray(oe(V),L)},decodeString(V,L){return this.HAS_NATIVE_SUPPORT&&!L?atob(V):function(V){const L=[];let H=0,k=0;for(;H<V.length;){const x=V[H++];if(x<128)L[k++]=String.fromCharCode(x);else if(x>191&&x<224){const N=V[H++];L[k++]=String.fromCharCode((31&x)<<6|63&N)}else if(x>239&&x<365){const qe=((7&x)<<18|(63&V[H++])<<12|(63&V[H++])<<6|63&V[H++])-65536;L[k++]=String.fromCharCode(55296+(qe>>10)),L[k++]=String.fromCharCode(56320+(1023&qe))}else{const N=V[H++],Q=V[H++];L[k++]=String.fromCharCode((15&x)<<12|(63&N)<<6|63&Q)}}return L.join("")}(this.decodeStringToByteArray(V,L))},decodeStringToByteArray(V,L){this.init_();const H=L?this.charToByteMapWebSafe_:this.charToByteMap_,k=[];for(let x=0;x<V.length;){const N=H[V.charAt(x++)],De=x<V.length?H[V.charAt(x)]:0;++x;const Ye=x<V.length?H[V.charAt(x)]:64;++x;const Ae=x<V.length?H[V.charAt(x)]:64;if(++x,null==N||null==De||null==Ye||null==Ae)throw Error();k.push(N<<2|De>>4),64!==Ye&&(k.push(De<<4&240|Ye>>2),64!==Ae&&k.push(Ye<<6&192|Ae))}return k},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let V=0;V<this.ENCODED_VALS.length;V++)this.byteToCharMap_[V]=this.ENCODED_VALS.charAt(V),this.charToByteMap_[this.byteToCharMap_[V]]=V,this.byteToCharMapWebSafe_[V]=this.ENCODED_VALS_WEBSAFE.charAt(V),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[V]]=V,V>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(V)]=V,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(V)]=V)}}},fe=function(V){return function(V){const L=oe(V);return me.encodeByteArray(L,!0)}(V).replace(/\./g,"")},Ne=function(V){try{return me.decodeString(V,!0)}catch(L){console.error("base64Decode failed: ",L)}return null};function j(V,L){if(!(L instanceof Object))return L;switch(L.constructor){case Date:return new Date(L.getTime());case Object:void 0===V&&(V={});break;case Array:V=[];break;default:return L}for(const H in L)!L.hasOwnProperty(H)||!K(H)||(V[H]=j(V[H],L[H]));return V}function K(V){return"__proto__"!==V}function Oe(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ke(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Oe())}function ye(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function He(){return"object"==typeof self&&self.self===self}function re(){const V="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof V&&void 0!==V.id}function ue(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ze(){const V=Oe();return V.indexOf("MSIE ")>=0||V.indexOf("Trident/")>=0}function le(){return!ye()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Le(){return"object"==typeof indexedDB}function J(){return new Promise((V,L)=>{try{let H=!0;const k="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(k);x.onsuccess=()=>{x.result.close(),H||self.indexedDB.deleteDatabase(k),V(!0)},x.onupgradeneeded=()=>{H=!1},x.onerror=()=>{var N;L((null===(N=x.error)||void 0===N?void 0:N.message)||"")}}catch(H){L(H)}})}function ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const X=()=>{try{return function ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const V=process.env.__FIREBASE_DEFAULTS__;return V?JSON.parse(V):void 0})()||(()=>{if(typeof document>"u")return;let V;try{V=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const L=V&&Ne(V[1]);return L&&JSON.parse(L)})()}catch(V){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${V}`)}},xe=V=>{var L,H;return null===(H=null===(L=X())||void 0===L?void 0:L.emulatorHosts)||void 0===H?void 0:H[V]},Me=V=>{const L=xe(V);if(!L)return;const H=L.lastIndexOf(":");if(H<=0||H+1===L.length)throw new Error(`Invalid host ${L} with no separate hostname and port!`);const k=parseInt(L.substring(H+1),10);return"["===L[0]?[L.substring(1,H-1),k]:[L.substring(0,H),k]},et=()=>{var V;return null===(V=X())||void 0===V?void 0:V.config},jt=V=>{var L;return null===(L=X())||void 0===L?void 0:L[`_${V}`]};class kt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((L,H)=>{this.resolve=L,this.reject=H})}wrapCallback(L){return(H,k)=>{H?this.reject(H):this.resolve(k),"function"==typeof L&&(this.promise.catch(()=>{}),1===L.length?L(H):L(H,k))}}}function Fe(V,L){if(V.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const k=L||"demo-project",x=V.iat||0,N=V.sub||V.user_id;if(!N)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Q=Object.assign({iss:`https://securetoken.google.com/${k}`,aud:k,iat:x,exp:x+3600,auth_time:x,sub:N,user_id:N,firebase:{sign_in_provider:"custom",identities:{}}},V);return[fe(JSON.stringify({alg:"none",type:"JWT"})),fe(JSON.stringify(Q)),""].join(".")}class An extends Error{constructor(L,H,k){super(H),this.code=L,this.customData=k,this.name="FirebaseError",Object.setPrototypeOf(this,An.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xt.prototype.create)}}class Xt{constructor(L,H,k){this.service=L,this.serviceName=H,this.errors=k}create(L,...H){const k=H[0]||{},x=`${this.service}/${L}`,N=this.errors[L],Q=N?function Ht(V,L){return V.replace(Ot,(H,k)=>{const x=L[k];return null!=x?String(x):`<${k}?>`})}(N,k):"Error";return new An(x,`${this.serviceName}: ${Q} (${x}).`,k)}}const Ot=/\{\$([^}]+)}/g;function Ir(V,L){return Object.prototype.hasOwnProperty.call(V,L)}function xi(V){for(const L in V)if(Object.prototype.hasOwnProperty.call(V,L))return!1;return!0}function ze(V,L){if(V===L)return!0;const H=Object.keys(V),k=Object.keys(L);for(const x of H){if(!k.includes(x))return!1;const N=V[x],Q=L[x];if(qn(N)&&qn(Q)){if(!ze(N,Q))return!1}else if(N!==Q)return!1}for(const x of k)if(!H.includes(x))return!1;return!0}function qn(V){return null!==V&&"object"==typeof V}function dn(V){const L=[];for(const[H,k]of Object.entries(V))Array.isArray(k)?k.forEach(x=>{L.push(encodeURIComponent(H)+"="+encodeURIComponent(x))}):L.push(encodeURIComponent(H)+"="+encodeURIComponent(k));return L.length?"&"+L.join("&"):""}function Nr(V){const L={};return V.replace(/^\?/,"").split("&").forEach(k=>{if(k){const[x,N]=k.split("=");L[decodeURIComponent(x)]=decodeURIComponent(N)}}),L}function ya(V){const L=V.indexOf("?");if(!L)return"";const H=V.indexOf("#",L);return V.substring(L,H>0?H:void 0)}function yn(V,L){const H=new nn(V,L);return H.subscribe.bind(H)}class nn{constructor(L,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{L(this)}).catch(k=>{this.error(k)})}next(L){this.forEachObserver(H=>{H.next(L)})}error(L){this.forEachObserver(H=>{H.error(L)}),this.close(L)}complete(){this.forEachObserver(L=>{L.complete()}),this.close()}subscribe(L,H,k){let x;if(void 0===L&&void 0===H&&void 0===k)throw new Error("Missing Observer.");x=function nt(V,L){if("object"!=typeof V||null===V)return!1;for(const H of L)if(H in V&&"function"==typeof V[H])return!0;return!1}(L,["next","error","complete"])?L:{next:L,error:H,complete:k},void 0===x.next&&(x.next=Dt),void 0===x.error&&(x.error=Dt),void 0===x.complete&&(x.complete=Dt);const N=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),N}unsubscribeOne(L){void 0===this.observers||void 0===this.observers[L]||(delete this.observers[L],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(L){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,L)}sendOne(L,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[L])try{H(this.observers[L])}catch(k){typeof console<"u"&&console.error&&console.error(k)}})}close(L){this.finalized||(this.finalized=!0,void 0!==L&&(this.finalError=L),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Dt(){}function We(V,L=1e3,H=2){const k=L*Math.pow(H,V),x=Math.round(.5*k*(Math.random()-.5)*2);return Math.min(144e5,k+x)}function Bt(V){return V&&V._delegate?V._delegate:V}},3654:(lt,Te,O)=>{var y=O(4650);let U=null;function P(){return U}const Ce=new y.OlP("DocumentToken");let fe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Ne(){return(0,y.LFG)(j)}()},providedIn:"platform"}),n})();const $=new y.OlP("Location Initialized");let j=(()=>{class n extends fe{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=P().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ce))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function Oe(){return new j((0,y.LFG)(Ce))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ye(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function He(n){return n&&"?"!==n[0]?"?"+n:n}let re=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(Ke)},providedIn:"root"}),n})();const ue=new y.OlP("appBaseHref");let Ke=(()=>{class n extends re{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,y.f3M)(Ce).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+He(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){const l=this.prepareExternalUrl(o+He(u));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(fe),y.LFG(ue,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ze=(()=>{class n extends re{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,o,u){let l=this.prepareExternalUrl(o+He(u));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(fe),y.LFG(ue,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new y.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=ye(Le(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+He(r))}normalize(t){return n.stripTrailingSlash(function le(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Le(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+He(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=He,n.joinWithSlash=ke,n.stripTrailingSlash=ye,n.\u0275fac=function(t){return new(t||n)(y.LFG(re))},n.\u0275prov=y.Yz7({token:n,factory:function(){return function ve(){return new Pe((0,y.LFG)(re))}()},providedIn:"root"}),n})();function Le(n){return n.replace(/\/index.html$/,"")}class Ia{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Mi=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,l)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ia(o.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===u?void 0:u);else if(null!==u){const p=r.get(u);r.move(p,l),bs(p,o)}});for(let o=0,u=r.length;o<u;o++){const p=r.get(o).context;p.index=o,p.count=u,p.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{bs(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.s_b),y.Y36(y.Rgc),y.Y36(y.ZZ4))},n.\u0275dir=y.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function bs(n,e){n.context.$implicit=e.item}class U_{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class Ri{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const V_=new Ri,Sh=new U_;let Og=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,y.QGY)(t))return V_;if((0,y.F4k)(t))return Sh;throw function $r(n,e){return new y.vHH(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(y.sBO,16))},n.\u0275pipe=y.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})(),Lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({}),n})();function ba(n){return"server"===n}let Oh=(()=>{class n{}return n.\u0275prov=(0,y.Yz7)({token:n,providedIn:"root",factory:()=>new Vg((0,y.LFG)(Ce),window)}),n})();class Vg{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function hr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const l=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(l)return l}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ca(this.window.history)||Ca(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ca(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class wo extends class Vh extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function we(n){U||(U=n)}(new wo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Kg(){return Ms=Ms||document.querySelector("base"),Ms?Ms.getAttribute("href"):null}();return null==t?null:function Ni(n){vn=vn||document.createElement("a"),vn.setAttribute("href",n);const e=vn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ms=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function ll(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let vn,Ms=null;const hn=new y.OlP("TRANSITION_ID"),Yg=[{provide:y.ip1,useFactory:function Zg(n,e,t){return()=>{t.get(y.CZH).donePromise.then(()=>{const r=P(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[hn,Ce,y.zs3],multi:!0}];let Jg=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Sl=new y.OlP("EventManagerPlugins");let $u=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const l=o[u];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Sl),y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Na{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=P().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let ju=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})(),Rs=(()=>{class n extends ju{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const l=this._doc.createElement("style");l.textContent=u,o.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Al),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Al))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function Al(n){P().remove(n)}const xl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Bh=/%COMP%/g;function Hu(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Hu(n,o,t):(o=o.replace(Bh,n),t.push(o))}return t}function zu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let $h=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Pi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case y.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new jh(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case y.ifc.ShadowDom:return new tm(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Hu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(y.LFG($u),y.LFG(Rs),y.LFG(y.AFp))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();class Pi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(xl[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ka(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ka(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=xl[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=xl[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(y.JOm.DashCase|y.JOm.Important)?e.style.setProperty(t,r,o&y.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&y.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,zu(r)):this.eventManager.addEventListener(e,t,zu(r))}}function ka(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class jh extends Pi{constructor(e,t,r,o){super(e),this.component=r;const u=Hu(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Pa(n){return"_ngcontent-%COMP%".replace(Bh,n)}(o+"-"+r.id),this.hostAttr=function Rl(n){return"_nghost-%COMP%".replace(Bh,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class tm extends Pi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Hu(o.id,o.styles,[]);for(let l=0;l<u.length;l++){const p=document.createElement("style");p.textContent=u[l],this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ns=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const nm=["alt","control","meta","shift"],Qi={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kl={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wu=(()=>{class n extends Na{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),l=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>P().onAndCancel(t,u.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let l="",p=r.indexOf("code");if(p>-1&&(r.splice(p,1),l="code."),nm.forEach(D=>{const C=r.indexOf(D);C>-1&&(r.splice(C,1),l+=D+".")}),l+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=l,v}static matchEventFullKeyCode(t,r){let o=Qi[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),nm.forEach(l=>{l!==o&&(0,kl[l])(t)&&(u+=l+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ce))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();const Oa=(0,y.eFA)(y._c5,"browser",[{provide:y.Lbi,useValue:"browser"},{provide:y.g9A,useValue:function im(){wo.makeCurrent()},multi:!0},{provide:Ce,useFactory:function Ol(){return(0,y.RDi)(document),document},deps:[]}]),La=new y.OlP(""),Fa=[{provide:y.rWj,useClass:class Qg{addToWindow(e){y.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},y.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),y.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),y.dqk.frameworkStabilizers||(y.dqk.frameworkStabilizers=[]),y.dqk.frameworkStabilizers.push(r=>{const o=y.dqk.getAllAngularTestabilities();let u=o.length,l=!1;const p=function(v){l=l||v,u--,0==u&&r(l)};o.forEach(function(v){v.whenStable(p)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?P().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:y.lri,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]},{provide:y.dDg,useClass:y.dDg,deps:[y.R0b,y.eoX,y.rWj]}],qu=[{provide:y.zSh,useValue:"root"},{provide:y.qLn,useFactory:function Ps(){return new y.qLn},deps:[]},{provide:Sl,useClass:Ns,multi:!0,deps:[Ce,y.R0b,y.Lbi]},{provide:Sl,useClass:Wu,multi:!0,deps:[Ce]},{provide:$h,useClass:$h,deps:[$u,Rs,y.AFp]},{provide:y.FYo,useExisting:$h},{provide:ju,useExisting:Rs},{provide:Rs,useClass:Rs,deps:[Ce]},{provide:$u,useClass:$u,deps:[Sl,y.R0b]},{provide:class Ta{},useClass:Jg,deps:[]},[]];let Eo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:y.AFp,useValue:t.appId},{provide:hn,useExisting:y.AFp},Yg]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(La,12))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[...qu,...Fa],imports:[Lg,y.hGG]}),n})(),Ji=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ce))},n.\u0275prov=y.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Ua(){return new Ji((0,y.LFG)(Ce))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var tn=O(8996),ki=O(7669);function Je(...n){const e=(0,ki.yG)(n);return(0,tn.D)(n,e)}var Oi=O(7579);class cn extends Oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ls=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var rr=O(9751);const{isArray:Fs}=Array,{getPrototypeOf:Yh,prototype:Fl,keys:um}=Object;var Us=O(4671),rt=O(4004);const{isArray:Ul}=Array;var ir=O(5403),Vl=O(9672);function Xh(...n){const e=(0,ki.yG)(n),t=(0,ki.jO)(n),{args:r,keys:o}=function bo(n){if(1===n.length){const e=n[0];if(Fs(e))return{args:e,keys:null};if(function Qh(n){return n&&"object"==typeof n&&Yh(n)===Fl}(e)){const t=um(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,tn.D)([],e);const u=new rr.y(function Bl(n,e,t=Us.y){return r=>{ef(e,()=>{const{length:o}=n,u=new Array(o);let l=o,p=o;for(let v=0;v<o;v++)ef(e,()=>{const D=(0,tn.D)(n[v],e);let C=!1;D.subscribe((0,ir.x)(r,S=>{u[v]=S,C||(C=!0,p--),p||r.next(t(u.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,o?l=>function Jh(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}(o,l):Us.y));return t?u.pipe(function cm(n){return(0,rt.U)(e=>function Xi(n,e){return Ul(e)?n(...e):n(e)}(n,e))}(t)):u}function ef(n,e,t){n?(0,Vl.f)(t,n,e):e()}var Vs=O(8189);function Co(...n){return function Ha(){return(0,Vs.J)(1)}()((0,tn.D)(n,(0,ki.yG)(n)))}var To=O(8421);function So(n){return new rr.y(e=>{(0,To.Xf)(n()).subscribe(e)})}var $l=O(9635),Fi=O(576);function Bs(n,e){const t=(0,Fi.m)(n)?n:()=>n,r=o=>o.error(t());return new rr.y(e?o=>e.schedule(r,0,o):r)}var Ui=O(515),jl=O(727),jn=O(4482);function es(){return(0,jn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,ir.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class ts extends rr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,jn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new jl.w0;const t=this.getSubject();e.add(this.source.subscribe((0,ir.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=jl.w0.EMPTY)}return e}refCount(){return es()(this)}}function Hn(n,e){return(0,jn.e)((t,r)=>{let o=null,u=0,l=!1;const p=()=>l&&!o&&r.complete();t.subscribe((0,ir.x)(r,v=>{o?.unsubscribe();let D=0;const C=u++;(0,To.Xf)(n(v,C)).subscribe(o=(0,ir.x)(r,S=>r.next(e?e(v,S,C,D++):S),()=>{o=null,p()}))},()=>{l=!0,p()}))})}function fn(n){return n<=0?()=>Ui.E:(0,jn.e)((e,t)=>{let r=0;e.subscribe((0,ir.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function $s(...n){const e=(0,ki.yG)(n);return(0,jn.e)((t,r)=>{(e?Co(n,t,e):Co(n,t)).subscribe(r)})}function zr(n,e){return(0,jn.e)((t,r)=>{let o=0;t.subscribe((0,ir.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var Yn=O(5577);function _i(n){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,ir.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function tf(n=lm){return(0,jn.e)((e,t)=>{let r=!1;e.subscribe((0,ir.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function lm(){return new Ls}function ni(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((o,u)=>n(o,u,r)):Us.y,fn(1),t?_i(e):tf(()=>new Ls))}function Vi(n,e){return(0,Fi.m)(e)?(0,Yn.z)(n,e,1):(0,Yn.z)(n,1)}function _n(n,e,t){const r=(0,Fi.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,jn.e)((o,u)=>{var l;null===(l=r.subscribe)||void 0===l||l.call(r);let p=!0;o.subscribe((0,ir.x)(u,v=>{var D;null===(D=r.next)||void 0===D||D.call(r,v),u.next(v)},()=>{var v;p=!1,null===(v=r.complete)||void 0===v||v.call(r),u.complete()},v=>{var D;p=!1,null===(D=r.error)||void 0===D||D.call(r,v),u.error(v)},()=>{var v,D;p&&(null===(v=r.unsubscribe)||void 0===v||v.call(r)),null===(D=r.finalize)||void 0===D||D.call(r)}))}):Us.y}function ri(n){return(0,jn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,ir.x)(t,void 0,void 0,l=>{u=(0,To.Xf)(n(l,ri(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function js(n,e,t,r,o){return(u,l)=>{let p=t,v=e,D=0;u.subscribe((0,ir.x)(l,C=>{const S=D++;v=p?n(v,C,S):(p=!0,C),r&&l.next(v)},o&&(()=>{p&&l.next(v),l.complete()})))}}function Ao(n,e){return(0,jn.e)(js(n,e,arguments.length>=2,!0))}function xo(n){return n<=0?()=>Ui.E:(0,jn.e)((e,t)=>{let r=[];e.subscribe((0,ir.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function Mo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?zr((o,u)=>n(o,u,r)):Us.y,xo(1),t?_i(e):tf(()=>new Ls))}function Xu(n){return(0,jn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Nt="primary",ii=Symbol("RouteTitle");class Hs{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ro(n){return new Hs(n)}function Q_(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const l=r[u],p=n[u];if(l.startsWith(":"))o[l.substring(1)]=p;else if(l!==p.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function Wr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!dm(n[o],e[o]))return!1;return!0}function dm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function rf(n){return Array.prototype.concat.apply([],n)}function zl(n){return n.length>0?n[n.length-1]:null}function wn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Bi(n){return(0,y.CqO)(n)?n:(0,y.QGY)(n)?(0,tn.D)(Promise.resolve(n)):Je(n)}const X_={exact:function af(n,e,t){if(!ko(n.segments,e.segments)||!No(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!af(n.children[r],e.children[r],t))return!1;return!0},subset:pm},Gl={exact:function fm(n,e){return Wr(n,e)},subset:function Wa(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>dm(n[t],e[t]))},ignored:()=>!0};function hm(n,e,t){return X_[t.paths](n.root,e.root,t.matrixParams)&&Gl[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pm(n,e,t){return gm(n,e,e.segments,t)}function gm(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!ko(o,t)||e.hasChildren()||!No(o,t,r))}if(n.segments.length===t.length){if(!ko(n.segments,t)||!No(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!pm(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(ko(n.segments,o)&&No(n.segments,o,r)&&n.children[Nt])&&gm(n.children[Nt],e,u,r)}}function No(n,e,t){return e.every((r,o)=>Gl[t](n[o].parameters,r.parameters))}class Po{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return uf.serialize(this)}}class Ut{constructor(e,t){this.segments=e,this.children=t,this.parent=null,wn(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ws(this)}}class Ga{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ro(this.parameters)),this._parameterMap}toString(){return cf(this)}}function ko(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ql=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return new zs},providedIn:"root"}),n})();class zs{parse(e){const t=new f(e);return new Po(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Oo(e.root,!0)}`,r=function vm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${ec(t)}=${ec(o)}`).join("&"):`${ec(t)}=${ec(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Kl(n){return encodeURI(n)}(e.fragment)}`:""}`}}const uf=new zs;function Ws(n){return n.segments.map(e=>cf(e)).join("/")}function Oo(n,e){if(!n.hasChildren())return Ws(n);if(e){const t=n.children[Nt]?Oo(n.children[Nt],!1):"",r=[];return wn(n.children,(o,u)=>{u!==Nt&&r.push(`${u}:${Oo(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function mm(n,e){let t=[];return wn(n.children,(r,o)=>{o===Nt&&(t=t.concat(e(r,o)))}),wn(n.children,(r,o)=>{o!==Nt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Nt?[Oo(n.children[Nt],!1)]:[`${o}:${Oo(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Nt]?`${Ws(n)}/${t[0]}`:`${Ws(n)}/(${t.join("//")})`}}function Gr(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ec(n){return Gr(n).replace(/%3B/gi,";")}function Zl(n){return Gr(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lo(n){return decodeURIComponent(n)}function qa(n){return Lo(n.replace(/\+/g,"%20"))}function cf(n){return`${Zl(n.path)}${function ym(n){return Object.keys(n).map(e=>`;${Zl(e)}=${Zl(n[e])}`).join("")}(n.parameters)}`}const lf=/^[^\/()?;=#]+/;function tc(n){const e=n.match(lf);return e?e[0]:""}const df=/^[^=?&#]+/,Yl=/^[^&#]+/;class f{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ut([],{}):new Ut([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Nt]=new Ut(e,t)),r}parseSegment(){const e=tc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new y.vHH(4009,!1);return this.capture(e),new Ga(Lo(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=tc(this.remaining);o&&(r=o,this.capture(r))}e[Lo(t)]=Lo(r)}parseQueryParam(e){const t=function fr(n){const e=n.match(df);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function _(n){const e=n.match(Yl);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const o=qa(t),u=qa(r);if(e.hasOwnProperty(o)){let l=e[o];Array.isArray(l)||(l=[l],e[o]=l),l.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new y.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Nt);const l=this.parseChildren();t[u]=1===Object.keys(l).length?l[Nt]:new Ut([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new y.vHH(4011,!1)}}function g(n){return n.segments.length>0?new Ut([],{[Nt]:n}):n}function I(n){const e={};for(const r of Object.keys(n.children)){const u=I(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function T(n){if(1===n.numberOfChildren&&n.children[Nt]){const e=n.children[Nt];return new Ut(n.segments.concat(e.segments),e.children)}return n}(new Ut(n.segments,e))}function M(n){return n instanceof Po}const Z=!1;function Rt(n,e,t,r,o){if(0===t.length)return Lr(e.root,e.root,e.root,r,o);const u=function nc(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ka(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,l)=>{if("object"==typeof u&&null!=u){if(u.outlets){const p={};return wn(u.outlets,(v,D)=>{p[D]="string"==typeof v?v.split("/"):v}),[...o,{outlets:p}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===l?(u.split("/").forEach((p,v)=>{0==v&&"."===p||(0==v&&""===p?t=!0:".."===p?e++:""!=p&&o.push(p))}),o):[...o,u]},[]);return new Ka(t,e,r)}(t);return u.toRoot()?Lr(e.root,e.root,new Ut([],{}),r,o):function l(v){const D=function qs(n,e,t,r){if(n.isAbsolute)return new ns(e.root,!0,0);if(-1===r)return new ns(t,t===e.root,0);return function Ql(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new y.vHH(4005,Z);o=r.segments.length}return new ns(r,!1,o-u)}(t,r+(Qt(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),C=D.processChildren?rs(D.segmentGroup,D.index,u.commands):Ks(D.segmentGroup,D.index,u.commands);return Lr(e.root,D.segmentGroup,C,r,o)}(n.snapshot?._lastPathIndex)}function Qt(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Cr(n){return"object"==typeof n&&null!=n&&n.outlets}function Lr(n,e,t,r,o){let l,u={};r&&wn(r,(v,D)=>{u[D]=Array.isArray(v)?v.map(C=>`${C}`):`${v}`}),l=n===e?t:Gs(n,e,t);const p=g(I(l));return new Po(p,u,o)}function Gs(n,e,t){const r={};return wn(n.children,(o,u)=>{r[u]=o===e?t:Gs(o,e,t)}),new Ut(n.segments,r)}class Ka{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qt(r[0]))throw new y.vHH(4003,Z);const o=r.find(Cr);if(o&&o!==zl(r))throw new y.vHH(4004,Z)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ns{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ks(n,e,t){if(n||(n=new Ut([],{})),0===n.segments.length&&n.hasChildren())return rs(n,e,t);const r=function pf(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const l=n.segments[o],p=t[r];if(Cr(p))break;const v=`${p}`,D=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&D&&"object"==typeof D&&void 0===D.outlets){if(!_m(v,D,l))return u;r+=2}else{if(!_m(v,{},l))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Ut(n.segments.slice(0,r.pathIndex),{});return u.children[Nt]=new Ut(n.segments.slice(r.pathIndex),n.children),rs(u,0,o)}return r.match&&0===o.length?new Ut(n.segments,{}):r.match&&!n.hasChildren()?rc(n,e,t):r.match?rs(n,0,o):rc(n,e,t)}function rs(n,e,t){if(0===t.length)return new Ut(n.segments,{});{const r=function ff(n){return Cr(n[0])?n[0].outlets:{[Nt]:n}}(t),o={};return wn(r,(u,l)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[l]=Ks(n.children[l],e,u))}),wn(n.children,(u,l)=>{void 0===r[l]&&(o[l]=u)}),new Ut(n.segments,o)}}function rc(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(Cr(u)){const v=Fo(u.outlets);return new Ut(r,v)}if(0===o&&Qt(t[0])){r.push(new Ga(n.segments[e].path,gf(t[0]))),o++;continue}const l=Cr(u)?u.outlets[Nt]:`${u}`,p=o<t.length-1?t[o+1]:null;l&&p&&Qt(p)?(r.push(new Ga(l,gf(p))),o+=2):(r.push(new Ga(l,{})),o++)}return new Ut(r,{})}function Fo(n){const e={};return wn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=rc(new Ut([],{}),0,t))}),e}function gf(n){const e={};return wn(n,(t,r)=>e[r]=`${t}`),e}function _m(n,e,t){return n==t.path&&Wr(e,t.parameters)}class Zs{constructor(e,t){this.id=e,this.url=t}}class Jl extends Zs{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Za extends Zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class mf extends Zs{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class t0 extends Zs{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class DD extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bD extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CD extends Zs{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class n0 extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wm extends Zs{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class r0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Im{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class TD{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class s0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class o0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uo{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Em{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Dm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Dm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=u0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return u0(e,this._root).map(t=>t.value)}}function Dm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Dm(n,t);if(r)return r}return null}function u0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=u0(n,t);if(r.length)return r.unshift(e),r}return[]}class wi{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ic(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class bm extends Em{constructor(e,t){super(e),this.snapshot=t,Xl(this,e)}toString(){return this.snapshot.toString()}}function Cm(n,e){const t=function c0(n,e){const l=new Ya([],{},{},"",{},Nt,e,null,n.root,-1,{});return new Sm("",new wi(l,[]))}(n,e),r=new cn([new Ga("",{})]),o=new cn({}),u=new cn({}),l=new cn({}),p=new cn(""),v=new Ys(r,o,l,p,u,Nt,e,t.root);return v.snapshot=t.root,new bm(new wi(v,[]),t)}class Ys{constructor(e,t,r,o,u,l,p,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.pipe((0,rt.U)(D=>D[ii]))??Je(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,rt.U)(e=>Ro(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,rt.U)(e=>Ro(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Tm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function yf(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Ya{constructor(e,t,r,o,u,l,p,v,D,C,S,F){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=l,this.component=p,this.title=this.data?.[ii],this.routeConfig=v,this._urlSegment=D,this._lastPathIndex=C,this._correctedLastPathIndex=F??C,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ro(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ro(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Sm extends Em{constructor(e,t){super(t),this.url=e,Xl(this,t)}toString(){return vf(this._root)}}function Xl(n,e){e.value._routerState=n,e.children.forEach(t=>Xl(n,t))}function vf(n){const e=n.children.length>0?` { ${n.children.map(vf).join(", ")} } `:"";return`${n.value}${e}`}function ed(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Wr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Wr(e.params,t.params)||n.params.next(t.params),function nf(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Wr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Wr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Qa(n,e){const t=Wr(n.params,e.params)&&function e0(n,e){return ko(n,e)&&n.every((t,r)=>Wr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Qa(n.parent,e.parent))}function sc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function xD(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return sc(n,r,o);return sc(n,r)})}(n,e,t);return new wi(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const l=u.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(p=>sc(n,p)),l}}const r=function MD(n){return new Ys(new cn(n.url),new cn(n.params),new cn(n.queryParams),new cn(n.fragment),new cn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>sc(n,u));return new wi(r,o)}}const _f="ngNavigationCancelingError";function wf(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=M(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=td(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function td(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[_f]=!0,r.cancellationCode=e,t&&(r.url=t),r}function If(n){return Vo(n)&&M(n.url)}function Vo(n){return n&&n[_f]}class RD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new nd,this.attachRef=null}}let nd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new RD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Am=!1;let xm=(()=>{class n{constructor(t,r,o,u,l){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new y.vpe,this.deactivateEvents=new y.vpe,this.attachEvents=new y.vpe,this.detachEvents=new y.vpe,this.name=o||Nt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new y.vHH(4012,Am);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new y.vHH(4012,Am);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new y.vHH(4012,Am);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new y.vHH(4013,Am);this._activatedRoute=t;const o=this.location,l=t._futureSnapshot.component,p=this.parentContexts.getOrCreateContext(this.name).children,v=new Mm(t,p,o.injector);if(r&&function ND(n){return!!n.resolveComponentFactory}(r)){const D=r.resolveComponentFactory(l);this.activated=o.createComponent(D,o.length,v)}else this.activated=o.createComponent(l,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(nd),y.Y36(y.s_b),y.$8M("name"),y.Y36(y.sBO),y.Y36(y.lqb))},n.\u0275dir=y.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class Mm{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ys?this.route:e===nd?this.childContexts:this.parent.get(e,t)}}let Ef=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[y.jDz],decls:1,vars:0,template:function(t,r){1&t&&y._UZ(0,"router-outlet")},dependencies:[xm],encapsulation:2}),n})();function rd(n,e){return n.providers&&!n._injector&&(n._injector=(0,y.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Rm(n){const e=n.children&&n.children.map(Rm),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Nt&&(t.component=Ef),t}function Ii(n){return n.outlet||Nt}function Qs(n,e){const t=n.filter(r=>Ii(r)===e);return t.push(...n.filter(r=>Ii(r)!==e)),t}function Js(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class YA{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),ed(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=ic(t);e.children.forEach(u=>{const l=u.value.outlet;this.deactivateRoutes(u,o[l],r),delete o[l]}),wn(o,(u,l)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const l=r.getContext(o.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ic(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);if(r&&r.outlet){const l=r.outlet.detach(),p=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:p})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=ic(e);for(const l of Object.keys(u))this.deactivateRouteAndItsChildren(u[l],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=ic(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new o0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new SD(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(ed(o),o===u)if(o.component){const l=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const l=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const p=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),l.children.onOutletReAttached(p.contexts),l.attachRef=p.componentRef,l.route=p.route.value,l.outlet&&l.outlet.attach(p.componentRef,p.route.value),ed(p.route.value),this.activateChildRoutes(e,null,l.children)}else{const p=Js(o.snapshot),v=p?.get(y._Vd)??null;l.attachRef=null,l.route=o,l.resolver=v,l.injector=p,l.outlet&&l.outlet.activateWith(o,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class BD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Nm{constructor(e,t){this.component=e,this.route=t}}function QA(n,e,t){const r=n._root;return id(r,e?e._root:null,t,[r.value])}function Ja(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,y.Z0I)(n)?e.get(n):n:r}function id(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=ic(e);return n.children.forEach(l=>{(function $D(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,l=e?e.value:null,p=t?t.getContext(n.value.outlet):null;if(l&&u.routeConfig===l.routeConfig){const v=function jD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ko(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ko(n.url,e.url)||!Wr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qa(n,e)||!Wr(n.queryParams,e.queryParams);default:return!Qa(n,e)}}(l,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new BD(r)):(u.data=l.data,u._resolvedData=l._resolvedData),id(n,e,u.component?p?p.children:null:t,r,o),v&&p&&p.outlet&&p.outlet.isActivated&&o.canDeactivateChecks.push(new Nm(p.outlet.component,l))}else l&&sd(e,p,o),o.canActivateChecks.push(new BD(r)),id(n,null,u.component?p?p.children:null:t,r,o)})(l,u[l.value.outlet],t,r.concat([l.value]),o),delete u[l.value.outlet]}),wn(u,(l,p)=>sd(l,t.getContext(p),o)),o}function sd(n,e,t){const r=ic(n),o=n.value;wn(r,(u,l)=>{sd(u,o.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Nm(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Xa(n){return"function"==typeof n}function ad(n){return n instanceof Ls||"EmptyError"===n?.name}const oc=Symbol("INITIAL_VALUE");function ud(){return Hn(n=>Xh(n.map(e=>e.pipe(fn(1),$s(oc)))).pipe((0,rt.U)(e=>{for(const t of e)if(!0!==t){if(t===oc)return oc;if(!1===t||t instanceof Po)return t}return!0}),zr(e=>e!==oc),fn(1)))}function Cf(n){return(0,$l.z)(_n(e=>{if(M(e))throw wf(0,e)}),(0,rt.U)(e=>!0===e))}const xn={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function m0(n,e,t,r,o){const u=Pm(n,e,t);return u.matched?function KD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?Je(o.map(l=>{const p=Ja(l,n);return Bi(function XA(n){return n&&Xa(n.canMatch)}(p)?p.canMatch(e,t):n.runInContext(()=>p(e,t)))})).pipe(ud(),Cf()):Je(!0)}(r=rd(e,r),e,t).pipe((0,rt.U)(l=>!0===l?u:{...xn})):Je(u)}function Pm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...xn}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||Q_)(t,n,e);if(!o)return{...xn};const u={};wn(o.posParams,(p,v)=>{u[v]=p.path});const l=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:l,positionalParamSegments:o.posParams??{}}}function ac(n,e,t,r,o="corrected"){if(t.length>0&&function YD(n,e,t){return t.some(r=>Tf(n,e,r)&&Ii(r)!==Nt)}(n,t,r)){const l=new Ut(e,function ZD(n,e,t,r){const o={};o[Nt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&Ii(u)!==Nt){const l=new Ut([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,o[Ii(u)]=l}return o}(n,e,r,new Ut(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function QD(n,e,t){return t.some(r=>Tf(n,e,r))}(n,t,r)){const l=new Ut(n.segments,function y0(n,e,t,r,o,u){const l={};for(const p of r)if(Tf(n,t,p)&&!o[Ii(p)]){const v=new Ut([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,l[Ii(p)]=v}return{...o,...l}}(n,e,t,r,n.children,o));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const u=new Ut(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function Tf(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function v0(n,e,t,r){return!!(Ii(n)===r||r!==Nt&&Tf(e,t,n))&&("**"===n.path||Pm(e,n,t).matched)}function JD(n,e,t){return 0===e.length&&!n.children[t]}const km=!1;class Bo{constructor(e){this.segmentGroup=e||null}}class Sf{constructor(e){this.urlTree=e}}function uc(n){return Bs(new Bo(n))}function Om(n){return Bs(new Sf(n))}class I0{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=ac(this.urlTree.root,[],[],this.config).segmentGroup,t=new Ut(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Nt).pipe((0,rt.U)(u=>this.createUrlTree(I(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ri(u=>{if(u instanceof Sf)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof Bo?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Nt).pipe((0,rt.U)(o=>this.createUrlTree(I(o),e.queryParams,e.fragment))).pipe(ri(o=>{throw o instanceof Bo?this.noMatchError(o):o}))}noMatchError(e){return new y.vHH(4002,km)}createUrlTree(e,t,r){const o=g(e);return new Po(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,rt.U)(u=>new Ut([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,tn.D)(o).pipe(Vi(u=>{const l=r.children[u],p=Qs(t,u);return this.expandSegmentGroup(e,p,l,u).pipe((0,rt.U)(v=>({segment:v,outlet:u})))}),Ao((u,l)=>(u[l.outlet]=l.segment,u),{}),Mo())}expandSegment(e,t,r,o,u,l){return(0,tn.D)(r).pipe(Vi(p=>this.expandSegmentAgainstRoute(e,t,r,p,o,u,l).pipe(ri(D=>{if(D instanceof Bo)return Je(null);throw D}))),ni(p=>!!p),ri((p,v)=>{if(ad(p))return JD(t,o,u)?Je(new Ut([],{})):uc(t);throw p}))}expandSegmentAgainstRoute(e,t,r,o,u,l,p){return v0(o,t,u,l)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,l):p&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l):uc(t):uc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Om(u):this.lineralizeSegments(r,u).pipe((0,Yn.z)(l=>{const p=new Ut(l,{});return this.expandSegment(e,p,t,l,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,l){const{matched:p,consumedSegments:v,remainingSegments:D,positionalParamSegments:C}=Pm(t,o,u);if(!p)return uc(t);const S=this.applyRedirectCommands(v,o.redirectTo,C);return o.redirectTo.startsWith("/")?Om(S):this.lineralizeSegments(o,S).pipe((0,Yn.z)(F=>this.expandSegment(e,t,r,F.concat(D),l,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=rd(r,e),r.loadChildren?(r._loadedRoutes?Je({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,rt.U)(p=>(r._loadedRoutes=p.routes,r._loadedInjector=p.injector,new Ut(o,{})))):Je(new Ut(o,{}))):m0(t,r,o,e).pipe(Hn(({matched:l,consumedSegments:p,remainingSegments:v})=>l?this.getChildConfig(e=r._injector??e,r,o).pipe((0,Yn.z)(C=>{const S=C.injector??e,F=C.routes,{segmentGroup:z,slicedSegments:ne}=ac(t,p,v,F),be=new Ut(z.segments,z.children);if(0===ne.length&&be.hasChildren())return this.expandChildren(S,F,be).pipe((0,rt.U)(_t=>new Ut(p,_t)));if(0===F.length&&0===ne.length)return Je(new Ut(p,{}));const Ee=Ii(r)===u;return this.expandSegment(S,be,F,ne,Ee?Nt:u,!0).pipe((0,rt.U)(It=>new Ut(p.concat(It.segments),It.children)))})):uc(t)))}getChildConfig(e,t,r){return t.children?Je({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Je({routes:t._loadedRoutes,injector:t._loadedInjector}):function qD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?Je(!0):Je(o.map(l=>{const p=Ja(l,n);return Bi(function od(n){return n&&Xa(n.canLoad)}(p)?p.canLoad(e,t):n.runInContext(()=>p(e,t)))})).pipe(ud(),Cf())}(e,t,r).pipe((0,Yn.z)(o=>o?this.configLoader.loadChildren(e,t).pipe(_n(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function XD(n){return Bs(td(km,3))}())):Je({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return Je(r);if(o.numberOfChildren>1||!o.children[Nt])return Bs(new y.vHH(4e3,km));o=o.children[Nt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new Po(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return wn(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const p=o.substring(1);r[u]=t[p]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let l={};return wn(t.children,(p,v)=>{l[v]=this.createSegmentGroup(e,p,r,o)}),new Ut(u,l)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new y.vHH(4001,km);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class eb{}class D0{constructor(e,t,r,o,u,l,p,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=p,this.urlSerializer=v}recognize(){const e=ac(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Nt).pipe((0,rt.U)(t=>{if(null===t)return null;const r=new Ya([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Nt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new wi(r,t),u=new Sm(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Tm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,tn.D)(Object.keys(r.children)).pipe(Vi(o=>{const u=r.children[o],l=Qs(t,o);return this.processSegmentGroup(e,l,u,o)}),Ao((o,u)=>o&&u?(o.push(...u),o):null),function za(n,e=!1){return(0,jn.e)((t,r)=>{let o=0;t.subscribe((0,ir.x)(r,u=>{const l=n(u,o++);(l||e)&&r.next(u),!l&&r.complete()}))})}(o=>null!==o),_i(null),Mo(),(0,rt.U)(o=>{if(null===o)return null;const u=cd(o);return function eu(n){n.sort((e,t)=>e.value.outlet===Nt?-1:t.value.outlet===Nt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,tn.D)(t).pipe(Vi(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,o,u)),ni(l=>!!l),ri(l=>{if(ad(l))return JD(r,o,u)?Je([]):Je(null);throw l}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!v0(t,r,o,u))return Je(null);let l;if("**"===t.path){const p=o.length>0?zl(o).parameters:{},v=ld(r)+o.length;l=Je({snapshot:new Ya(o,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bm(t),Ii(t),t.component??t._loadedComponent??null,t,Af(r),v,xf(t),v),consumedSegments:[],remainingSegments:[]})}else l=m0(r,t,o,e).pipe((0,rt.U)(({matched:p,consumedSegments:v,remainingSegments:D,parameters:C})=>{if(!p)return null;const S=ld(r)+v.length;return{snapshot:new Ya(v,C,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,Bm(t),Ii(t),t.component??t._loadedComponent??null,t,Af(r),S,xf(t),S),consumedSegments:v,remainingSegments:D}}));return l.pipe(Hn(p=>{if(null===p)return Je(null);const{snapshot:v,consumedSegments:D,remainingSegments:C}=p;e=t._injector??e;const S=t._loadedInjector??e,F=function tb(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:z,slicedSegments:ne}=ac(r,D,C,F.filter(Ee=>void 0===Ee.redirectTo),this.relativeLinkResolution);if(0===ne.length&&z.hasChildren())return this.processChildren(S,F,z).pipe((0,rt.U)(Ee=>null===Ee?null:[new wi(v,Ee)]));if(0===F.length&&0===ne.length)return Je([new wi(v,[])]);const be=Ii(t)===u;return this.processSegment(S,F,z,ne,be?Nt:u).pipe((0,rt.U)(Ee=>null===Ee?null:[new wi(v,Ee)]))}))}}function Vm(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function cd(n){const e=[],t=new Set;for(const r of n){if(!Vm(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=cd(r.children);e.push(new wi(r.value,o))}return e.filter(r=>!t.has(r))}function Af(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function ld(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function Bm(n){return n.data||{}}function xf(n){return n.resolve||{}}function C0(n){return"string"==typeof n.title||null===n.title}function $m(n){return Hn(e=>{const t=n(e);return t?(0,tn.D)(t).pipe((0,rt.U)(()=>e)):Je(e)})}let Mf=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Nt);return r}getResolvedTitleForRoute(t){return t.data[ii]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=y.Yz7({token:n,factory:function(){return(0,y.f3M)(T0)},providedIn:"root"}),n})(),T0=(()=>{class n extends Mf{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(Ji))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ub{}class nx extends class S0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const jo=new y.OlP("",{providedIn:"root",factory:()=>({})}),Ho=new y.OlP("ROUTES");let tu=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Je(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Bi(t.loadComponent()).pipe(_n(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),Xu(()=>{this.componentLoaders.delete(t)})),o=new ts(r,()=>new Oi.x).pipe(es());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Je({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,rt.U)(p=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,D,C=!1;Array.isArray(p)?D=p:(v=p.create(t).injector,D=rf(v.get(Ho,[],y.XFs.Self|y.XFs.Optional)));return{routes:D.map(Rm),injector:v}}),Xu(()=>{this.childrenLoaders.delete(r)})),l=new ts(u,()=>new Oi.x).pipe(es());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Bi(t()).pipe((0,Yn.z)(r=>r instanceof y.YKP||Array.isArray(r)?Je(r):(0,tn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.zs3),y.LFG(y.Sil))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class lb{}class rx{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function db(n){throw n}function hb(n,e,t){return e.parse("/")}const fb={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},x0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Rf(){const n=(0,y.f3M)(ql),e=(0,y.f3M)(nd),t=(0,y.f3M)(Pe),r=(0,y.f3M)(y.zs3),o=(0,y.f3M)(y.Sil),u=(0,y.f3M)(Ho,{optional:!0})??[],l=(0,y.f3M)(jo,{optional:!0})??{},p=(0,y.f3M)(T0),v=(0,y.f3M)(Mf,{optional:!0}),D=(0,y.f3M)(lb,{optional:!0}),C=(0,y.f3M)(ub,{optional:!0}),S=new zn(null,n,e,t,r,o,rf(u));return D&&(S.urlHandlingStrategy=D),C&&(S.routeReuseStrategy=C),S.titleStrategy=v??p,function M0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let zn=(()=>{class n{constructor(t,r,o,u,l,p,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oi.x,this.errorHandler=db,this.malformedUriErrorHandler=hb,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Je(void 0),this.urlHandlingStrategy=new rx,this.routeReuseStrategy=new nx,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(tu),this.configLoader.onLoadEndListener=F=>this.triggerEvent(new Im(F)),this.configLoader.onLoadStartListener=F=>this.triggerEvent(new r0(F)),this.ngModule=l.get(y.h0i),this.console=l.get(y.c2e);const S=l.get(y.R0b);this.isNgZoneEnabled=S instanceof y.R0b&&y.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function sf(){return new Po(new Ut([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Cm(this.currentUrlTree,this.rootComponentType),this.transitions=new cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(zr(o=>0!==o.id),(0,rt.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Hn(o=>{let u=!1,l=!1;return Je(o).pipe(_n(p=>{this.currentNavigation={id:p.id,initialUrl:p.rawUrl,extractedUrl:p.extractedUrl,trigger:p.source,extras:p.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hn(p=>{const v=this.browserUrlTree.toString(),D=!this.navigated||p.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||D)&&this.urlHandlingStrategy.shouldProcessUrl(p.rawUrl))return Nf(p.source)&&(this.browserUrlTree=p.extractedUrl),Je(p).pipe(Hn(S=>{const F=this.transitions.getValue();return r.next(new Jl(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),F!==this.transitions.getValue()?Ui.E:Promise.resolve(S)}),function Lm(n,e,t,r){return Hn(o=>function w0(n,e,t,r,o){return new I0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,rt.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),_n(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},o.urlAfterRedirects=S.urlAfterRedirects}),function rb(n,e,t,r,o,u){return(0,Yn.z)(l=>function E0(n,e,t,r,o,u,l="emptyOnly",p="legacy"){return new D0(n,e,t,r,o,l,p,u).recognize().pipe(Hn(v=>null===v?function Um(n){return new rr.y(e=>e.error(n))}(new eb):Je(v)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,o,u).pipe((0,rt.U)(p=>({...l,targetSnapshot:p}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),_n(S=>{if(o.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const z=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(z,S)}this.browserUrlTree=S.urlAfterRedirects}const F=new DD(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(F)}));if(D&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:z,source:ne,restoredState:be,extras:Ee}=p,vt=new Jl(F,this.serializeUrl(z),ne,be);r.next(vt);const It=Cm(z,this.rootComponentType).snapshot;return Je(o={...p,targetSnapshot:It,urlAfterRedirects:z,extras:{...Ee,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=p.rawUrl,p.resolve(null),Ui.E}),_n(p=>{const v=new bD(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(v)}),(0,rt.U)(p=>o={...p,guards:QA(p.targetSnapshot,p.currentSnapshot,this.rootContexts)}),function tx(n,e){return(0,Yn.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:l}}=t;return 0===l.length&&0===u.length?Je({...t,guardsResult:!0}):function p0(n,e,t,r){return(0,tn.D)(n).pipe((0,Yn.z)(o=>function bf(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?Je(u.map(p=>{const v=Js(e)??o,D=Ja(p,v);return Bi(function f0(n){return n&&Xa(n.canDeactivate)}(D)?D.canDeactivate(n,e,t,r):v.runInContext(()=>D(n,e,t,r))).pipe(ni())})).pipe(ud()):Je(!0)}(o.component,o.route,t,e,r)),ni(o=>!0!==o,!0))}(l,r,o,n).pipe((0,Yn.z)(p=>p&&function Xs(n){return"boolean"==typeof n}(p)?function HD(n,e,t,r){return(0,tn.D)(e).pipe(Vi(o=>Co(function WD(n,e){return null!==n&&e&&e(new TD(n)),Je(!0)}(o.route.parent,r),function zD(n,e){return null!==n&&e&&e(new s0(n)),Je(!0)}(o.route,r),function g0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(l=>function JA(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>So(()=>Je(l.guards.map(v=>{const D=Js(l.node)??t,C=Ja(v,D);return Bi(function h0(n){return n&&Xa(n.canActivateChild)}(C)?C.canActivateChild(r,n):D.runInContext(()=>C(r,n))).pipe(ni())})).pipe(ud())));return Je(u).pipe(ud())}(n,o.path,t),function GD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Je(!0);const o=r.map(u=>So(()=>{const l=Js(e)??t,p=Ja(u,l);return Bi(function d0(n){return n&&Xa(n.canActivate)}(p)?p.canActivate(e,n):l.runInContext(()=>p(e,n))).pipe(ni())}));return Je(o).pipe(ud())}(n,o.route,t))),ni(o=>!0!==o,!0))}(r,u,n,e):Je(p)),(0,rt.U)(p=>({...t,guardsResult:p})))})}(this.ngModule.injector,p=>this.triggerEvent(p)),_n(p=>{if(o.guardsResult=p.guardsResult,M(p.guardsResult))throw wf(0,p.guardsResult);const v=new CD(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot,!!p.guardsResult);this.triggerEvent(v)}),zr(p=>!!p.guardsResult||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",3),!1)),$m(p=>{if(p.guards.canActivateChecks.length)return Je(p).pipe(_n(v=>{const D=new n0(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}),Hn(v=>{let D=!1;return Je(v).pipe(function ib(n,e){return(0,Yn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return Je(t);let u=0;return(0,tn.D)(o).pipe(Vi(l=>function b0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!C0(o)&&(u[ii]=o.title),function cc(n,e,t,r){const o=function sb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return Je({});const u={};return(0,tn.D)(o).pipe((0,Yn.z)(l=>function ob(n,e,t,r){const o=Js(e)??r,u=Ja(n,o);return Bi(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[l],e,t,r).pipe(ni(),_n(p=>{u[l]=p}))),xo(1),function Hl(n){return(0,rt.U)(()=>n)}(u),ri(l=>ad(l)?Ui.E:Bs(l)))}(u,n,e,r).pipe((0,rt.U)(l=>(n._resolvedData=l,n.data=Tm(n,t).resolve,o&&C0(o)&&(n.data[ii]=o.title),null)))}(l.route,r,n,e)),_n(()=>u++),xo(1),(0,Yn.z)(l=>u===o.length?Je(t):Ui.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),_n({next:()=>D=!0,complete:()=>{D||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),_n(v=>{const D=new wm(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(D)}))}),$m(p=>{const v=D=>{const C=[];D.routeConfig?.loadComponent&&!D.routeConfig._loadedComponent&&C.push(this.configLoader.loadComponent(D.routeConfig).pipe(_n(S=>{D.component=S}),(0,rt.U)(()=>{})));for(const S of D.children)C.push(...v(S));return C};return Xh(v(p.targetSnapshot.root)).pipe(_i(),fn(1))}),$m(()=>this.afterPreactivation()),(0,rt.U)(p=>{const v=function AD(n,e,t){const r=sc(n,e._root,t?t._root:void 0);return new bm(r,e)}(this.routeReuseStrategy,p.targetSnapshot,p.currentRouterState);return o={...p,targetRouterState:v}}),_n(p=>{this.currentUrlTree=p.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(p.urlAfterRedirects,p.rawUrl),this.routerState=p.targetRouterState,"deferred"===this.urlUpdateStrategy&&(p.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,p),this.browserUrlTree=p.urlAfterRedirects)}),((n,e,t)=>(0,rt.U)(r=>(new YA(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,p=>this.triggerEvent(p)),_n({next(){u=!0},complete(){u=!0}}),Xu(()=>{u||l||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),ri(p=>{if(l=!0,Vo(p)){If(p)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new mf(o.id,this.serializeUrl(o.extractedUrl),p.message,p.cancellationCode);if(r.next(v),If(p)){const D=this.urlHandlingStrategy.merge(p.url,this.rawUrlTree),C={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Nf(o.source)};this.scheduleNavigation(D,"imperative",null,C,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new t0(o.id,this.serializeUrl(o.extractedUrl),p,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(p))}catch(D){o.reject(D)}}return Ui.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const p={...u};delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(o.state=p)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Rm),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:l,queryParamsHandling:p,preserveFragment:v}=r,D=o||this.routerState.root,C=v?this.currentUrlTree.fragment:l;let S=null;switch(p){case"merge":S={...this.currentUrlTree.queryParams,...u};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=u||null}return null!==S&&(S=this.removeEmptyProps(S)),Rt(D,this.currentUrlTree,t,S,C??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=M(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function pb(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new y.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...fb}:!1===r?{...x0}:r,M(t))return hm(this.currentUrlTree,t,o);const u=this.parseUrl(t);return hm(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Za(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,l){if(this.disposed)return Promise.resolve(!1);let p,v,D;l?(p=l.resolve,v=l.reject,D=l.promise):D=new Promise((F,z)=>{p=F,v=z});const C=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),S=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:C,targetPageId:S,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:p,reject:v,promise:D,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),D.catch(F=>Promise.reject(F))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new mf(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:function(){return Rf()},providedIn:"root"}),n})();function Nf(n){return"imperative"!==n}class R0{}let yb=(()=>{class n{constructor(t,r,o,u,l){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(zr(t=>t instanceof Za),Vi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,y.MMx)(u.providers,t,`Route: ${u.path}`));const l=u._injector??t,p=u._loadedInjector??l;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(l,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(p,u.children??u._loadedRoutes))}return(0,tn.D)(o).pipe((0,Vs.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):Je(null);const u=o.pipe((0,Yn.z)(l=>null===l?Je(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,tn.D)([u,l]).pipe((0,Vs.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(zn),y.LFG(y.Sil),y.LFG(y.lqb),y.LFG(R0),y.LFG(tu))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zo=new y.OlP("");let is=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Jl?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Za&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Uo&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Uo(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){y.$Z()},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})();function hd(n,e){return{\u0275kind:n,\u0275providers:e}}function kf(n){return[{provide:Ho,multi:!0,useValue:n}]}function Hm(){const n=(0,y.f3M)(y.zs3);return e=>{const t=n.get(y.z2F);if(e!==t.components[0])return;const r=n.get(zn),o=n.get(_b);1===n.get(Of)&&r.initialNavigation(),n.get(P0,null,y.XFs.Optional)?.setUpPreloading(),n.get(zo,null,y.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const _b=new y.OlP("",{factory:()=>new Oi.x}),Of=new y.OlP("",{providedIn:"root",factory:()=>1});const P0=new y.OlP("");function $i(n){return hd(0,[{provide:P0,useExisting:yb},{provide:R0,useExisting:n}])}const k0=new y.OlP("ROUTER_FORROOT_GUARD"),Eb=[Pe,{provide:ql,useClass:zs},{provide:zn,useFactory:Rf},nd,{provide:Ys,useFactory:function vb(n){return n.routerState.root},deps:[zn]},tu];function Db(){return new y.PXZ("Router",zn)}let zm=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[Eb,[],kf(t),{provide:k0,useFactory:xt,deps:[[zn,new y.FiY,new y.tp0]]},{provide:jo,useValue:r||{}},r?.useHash?{provide:re,useClass:Ze}:{provide:re,useClass:Ke},{provide:zo,useFactory:()=>{const n=(0,y.f3M)(zn),e=(0,y.f3M)(Oh),t=(0,y.f3M)(jo);return t.scrollOffset&&e.setOffset(t.scrollOffset),new is(n,e,t)}},r?.preloadingStrategy?$i(r.preloadingStrategy).\u0275providers:[],{provide:y.PXZ,multi:!0,useFactory:Db},r?.initialNavigation?O0(r):[],[{provide:Wm,useFactory:Hm},{provide:y.tb,multi:!0,useExisting:Wm}]]}}static forChild(t){return{ngModule:n,providers:[kf(t)]}}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(k0,8))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[Ef]}),n})();function xt(n){return"guarded"}function O0(n){return["disabled"===n.initialNavigation?hd(3,[{provide:y.ip1,multi:!0,useFactory:()=>{const e=(0,y.f3M)(zn);return()=>{e.setUpLocationChangeListener()}}},{provide:Of,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?hd(2,[{provide:Of,useValue:0},{provide:y.ip1,multi:!0,deps:[y.zs3],useFactory:e=>{const t=e.get($,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const l=e.get(zn),p=e.get(_b);(function o(u){e.get(zn).events.pipe(zr(p=>p instanceof Za||p instanceof mf||p instanceof t0),(0,rt.U)(p=>p instanceof Za||p instanceof mf&&(0===p.code||1===p.code)&&null),zr(p=>null!==p),fn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),l.afterPreactivation=()=>(u(!0),r||p.closed?Je(void 0):p),l.initialNavigation()}))}}]).\u0275providers:[]]}const Wm=new y.OlP("");class Sb extends jl.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const pd={setInterval(n,e,...t){const{delegate:r}=pd;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=pd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ab=O(8737);class Gm extends Sb{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const o=this.id,u=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(u,o,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(u,this.id,t),this}requestAsyncId(e,t,r=0){return pd.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&pd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let o,r=!1;try{this.work(e)}catch(u){r=!0,o=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Ab.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const qm={now:()=>(qm.delegate||Date).now(),delegate:void 0};class gd{constructor(e,t=gd.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}gd.now=qm.now;class xb extends gd{constructor(e,t=gd.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const Km=new xb(Gm);var Mt=O(9681);(0,Mt.registerVersion)("firebase","9.14.0","app");var G=O(5861),st=O(2090),ss=O(4859),os=O(1877),md=O(8766);const F0="@firebase/installations",Lf="0.5.16",U0=`w:${Lf}`,ru="FIS_v2",eo=new st.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function $0(n){return n instanceof st.ZR&&n.code.includes("request-failed")}function Ym({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function j0(n){return{token:n.token,requestStatus:2,expiresIn:lx(n.expiresIn),creationTime:Date.now()}}function Qm(n,e){return Uf.apply(this,arguments)}function Uf(){return(Uf=(0,G.Z)(function*(n,e){const r=(yield e.json()).error;return eo.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function H0({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function Jm(n,{refreshToken:e}){const t=H0(n);return t.append("Authorization",function Xm(n){return`${ru} ${n}`}(e)),t}function Vf(n){return yd.apply(this,arguments)}function yd(){return(yd=(0,G.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function lx(n){return Number(n.replace("s","000"))}function Ob(n,e){return z0.apply(this,arguments)}function z0(){return(z0=(0,G.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Ym(n),o=H0(n),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const p={method:"POST",headers:o,body:JSON.stringify({fid:t,authVersion:ru,appId:n.appId,sdkVersion:U0})},v=yield Vf(()=>fetch(r,p));if(v.ok){const D=yield v.json();return{fid:D.fid||t,registrationStatus:2,refreshToken:D.refreshToken,authToken:j0(D.authToken)}}throw yield Qm("Create Installation",v)})).apply(this,arguments)}function iu(n){return new Promise(e=>{setTimeout(e,n)})}const G0=/^[cdef][\w-]{21}$/;function ji(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function q0(n){return function W0(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return G0.test(t)?t:""}catch{return""}}function dc(n){return`${n.appName}!${n.appId}`}const Wo=new Map;function as(n,e){const t=dc(n);Bf(t,e),function dx(n,e){const t=function Lb(){return!Go&&"BroadcastChannel"in self&&(Go=new BroadcastChannel("[Firebase] FID Change"),Go.onmessage=n=>{Bf(n.data.key,n.data.fid)}),Go}();t&&t.postMessage({key:n,fid:e}),function vd(){0===Wo.size&&Go&&(Go.close(),Go=null)}()}(t,e)}function Bf(n,e){const t=Wo.get(n);if(t)for(const r of t)r(e)}let Go=null;const to="firebase-installations-store";let _d=null;function Z0(){return _d||(_d=(0,md.X3)("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(to)}})),_d}function jf(n,e){return ny.apply(this,arguments)}function ny(){return(ny=(0,G.Z)(function*(n,e){const t=dc(n),o=(yield Z0()).transaction(to,"readwrite"),u=o.objectStore(to),l=yield u.get(t);return yield u.put(e,t),yield o.done,(!l||l.fid!==e.fid)&&as(n,e.fid),e})).apply(this,arguments)}function ry(n){return iy.apply(this,arguments)}function iy(){return(iy=(0,G.Z)(function*(n){const e=dc(n),r=(yield Z0()).transaction(to,"readwrite");yield r.objectStore(to).delete(e),yield r.done})).apply(this,arguments)}function hc(n,e){return Y0.apply(this,arguments)}function Y0(){return(Y0=(0,G.Z)(function*(n,e){const t=dc(n),o=(yield Z0()).transaction(to,"readwrite"),u=o.objectStore(to),l=yield u.get(t),p=e(l);return void 0===p?yield u.delete(t):yield u.put(p,t),yield o.done,p&&(!l||l.fid!==p.fid)&&as(n,p.fid),p})).apply(this,arguments)}function sy(n){return Q0.apply(this,arguments)}function Q0(){return(Q0=(0,G.Z)(function*(n){let e;const t=yield hc(n.appConfig,r=>{const o=J0(r),u=X0(n,o);return e=u.registrationPromise,u.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function J0(n){return Vb(n||{fid:ji(),registrationStatus:0})}function X0(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(eo.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function Fb(n,e){return wd.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:hx(n)}:{installationEntry:e}}function wd(){return(wd=(0,G.Z)(function*(n,e){try{const t=yield Ob(n,e);return jf(n.appConfig,t)}catch(t){throw $0(t)&&409===t.customData.serverCode?yield ry(n.appConfig):yield jf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function hx(n){return ew.apply(this,arguments)}function ew(){return(ew=(0,G.Z)(function*(n){let e=yield Ub(n.appConfig);for(;1===e.registrationStatus;)yield iu(100),e=yield Ub(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield sy(n);return r||t}return e})).apply(this,arguments)}function Ub(n){return hc(n,e=>{if(!e)throw eo.create("installation-not-found");return Vb(e)})}function Vb(n){return function fx(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function px(n,e){return tw.apply(this,arguments)}function tw(){return(tw=(0,G.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=gx(n,t),o=Jm(n,t),u=e.getImmediate({optional:!0});if(u){const D=yield u.getHeartbeatsHeader();D&&o.append("x-firebase-client",D)}const p={method:"POST",headers:o,body:JSON.stringify({installation:{sdkVersion:U0,appId:n.appId}})},v=yield Vf(()=>fetch(r,p));if(v.ok)return j0(yield v.json());throw yield Qm("Generate Auth Token",v)})).apply(this,arguments)}function gx(n,{fid:e}){return`${Ym(n)}/${e}/authTokens:generate`}function nw(n){return rw.apply(this,arguments)}function rw(){return(rw=(0,G.Z)(function*(n,e=!1){let t;const r=yield hc(n.appConfig,u=>{if(!oy(u))throw eo.create("not-registered");const l=u.authToken;if(!e&&ay(l))return u;if(1===l.requestStatus)return t=qo(n,e),u;{if(!navigator.onLine)throw eo.create("app-offline");const p=Ko(u);return t=sw(n,p),p}});return t?yield t:r.authToken})).apply(this,arguments)}function qo(n,e){return Id.apply(this,arguments)}function Id(){return(Id=(0,G.Z)(function*(n,e){let t=yield iw(n.appConfig);for(;1===t.authToken.requestStatus;)yield iu(100),t=yield iw(n.appConfig);const r=t.authToken;return 0===r.requestStatus?nw(n,e):r})).apply(this,arguments)}function iw(n){return hc(n,e=>{if(!oy(e))throw eo.create("not-registered");return function ow(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function sw(n,e){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,G.Z)(function*(n,e){try{const t=yield px(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield jf(n.appConfig,r),t}catch(t){if(!$0(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield jf(n.appConfig,r)}else yield ry(n.appConfig);throw t}})).apply(this,arguments)}function oy(n){return void 0!==n&&2===n.registrationStatus}function ay(n){return 2===n.requestStatus&&!function Bb(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function Ko(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function uy(){return(uy=(0,G.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield sy(e);return r?r.catch(console.error):nw(e).catch(console.error),t.fid})).apply(this,arguments)}function cy(){return(cy=(0,G.Z)(function*(n,e=!1){const t=n;return yield jb(t),(yield nw(t,e)).token})).apply(this,arguments)}function jb(n){return fc.apply(this,arguments)}function fc(){return(fc=(0,G.Z)(function*(n){const{registrationPromise:e}=yield sy(n);e&&(yield e)})).apply(this,arguments)}function bd(n){return eo.create("missing-app-config-values",{valueName:n})}const dy="installations",Wb=n=>{const e=n.getProvider("app").getImmediate(),t=function ly(n){if(!n||!n.options)throw bd("App Configuration");if(!n.name)throw bd("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw bd(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Mt._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},mx=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Mt._getProvider)(e,dy).getImmediate();return{getId:()=>function $b(n){return uy.apply(this,arguments)}(t),getToken:o=>function aw(n){return cy.apply(this,arguments)}(t,o)}};(function Gb(){(0,Mt._registerComponent)(new ss.wA(dy,Wb,"PUBLIC")),(0,Mt._registerComponent)(new ss.wA("installations-internal",mx,"PRIVATE"))})(),(0,Mt.registerVersion)(F0,Lf),(0,Mt.registerVersion)(F0,Lf,"esm2017");const Hf="@firebase/remote-config",pn=new st.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xb{constructor(e,t,r,o){this.client=e,this.storage=t,this.storageCache=r,this.logger=o}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,o=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${o}.`),o}fetch(e){var t=this;return(0,G.Z)(function*(){const[r,o]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(o&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return o;e.eTag=o&&o.eTag;const u=yield t.client.fetch(e),l=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===u.status&&l.push(t.storage.setLastSuccessfulFetchResponse(u)),yield Promise.all(l),u})()}}function eC(n=navigator){return n.languages&&n.languages[0]||n.language}class Ix{constructor(e,t,r,o,u,l){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=o,this.apiKey=u,this.appId=l}fetch(e){var t=this;return(0,G.Z)(function*(){var r,o,u;const[l,p]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),D=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,C={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},S={sdk_version:t.sdkVersion,app_instance_id:l,app_instance_id_token:p,app_id:t.appId,language_code:eC()},F={method:"POST",headers:C,body:JSON.stringify(S)},z=fetch(D,F),ne=new Promise((pt,gt)=>{e.signal.addEventListener(()=>{const Pt=new Error("The operation was aborted.");Pt.name="AbortError",gt(Pt)})});let be;try{yield Promise.race([z,ne]),be=yield z}catch(pt){let gt="fetch-client-network";throw"AbortError"===(null===(r=pt)||void 0===r?void 0:r.name)&&(gt="fetch-timeout"),pn.create(gt,{originalErrorMessage:null===(o=pt)||void 0===o?void 0:o.message})}let Ee=be.status;const vt=be.headers.get("ETag")||void 0;let It,_t;if(200===be.status){let pt;try{pt=yield be.json()}catch(gt){throw pn.create("fetch-client-parse",{originalErrorMessage:null===(u=gt)||void 0===u?void 0:u.message})}It=pt.entries,_t=pt.state}if("INSTANCE_STATE_UNSPECIFIED"===_t?Ee=500:"NO_CHANGE"===_t?Ee=304:("NO_TEMPLATE"===_t||"EMPTY_CONFIG"===_t)&&(It={}),304!==Ee&&200!==Ee)throw pn.create("fetch-status",{httpStatus:Ee});return{status:Ee,eTag:vt,config:It}})()}}class nC{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,G.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var o=this;return(0,G.Z)(function*(){yield function pw(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(pn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const u=yield o.client.fetch(e);return yield o.storage.deleteThrottleMetadata(),u}catch(u){if(!function tC(n){if(!(n instanceof st.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(u))throw u;const l={throttleEndTimeMillis:Date.now()+(0,st.$s)(r),backoffCount:r+1};return yield o.storage.setThrottleMetadata(l),o.attemptFetch(e,l)}})()}}class iC{constructor(e,t,r,o,u){this.app=e,this._client=t,this._storageCache=r,this._storage=o,this._logger=u,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function qf(n,e){var t;const r=n.target.error||void 0;return pn.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const us="app_namespace_store";class _y{constructor(e,t,r,o=function Ex(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=o=>{e(qf(o,"storage-open"))},r.onsuccess=o=>{n(o.target.result)},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(us,{keyPath:"compositeKey"})}}catch(r){e(pn.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=o}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,G.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{var l;const v=r.transaction([us],"readonly").objectStore(us),D=t.createCompositeKey(e);try{const C=v.get(D);C.onerror=S=>{u(qf(S,"storage-get"))},C.onsuccess=S=>{const F=S.target.result;o(F?F.value:void 0)}}catch(C){u(pn.create("storage-get",{originalErrorMessage:null===(l=C)||void 0===l?void 0:l.message}))}})})()}set(e,t){var r=this;return(0,G.Z)(function*(){const o=yield r.openDbPromise;return new Promise((u,l)=>{var p;const D=o.transaction([us],"readwrite").objectStore(us),C=r.createCompositeKey(e);try{const S=D.put({compositeKey:C,value:t});S.onerror=F=>{l(qf(F,"storage-set"))},S.onsuccess=()=>{u()}}catch(S){l(pn.create("storage-set",{originalErrorMessage:null===(p=S)||void 0===p?void 0:p.message}))}})})()}delete(e){var t=this;return(0,G.Z)(function*(){const r=yield t.openDbPromise;return new Promise((o,u)=>{var l;const v=r.transaction([us],"readwrite").objectStore(us),D=t.createCompositeKey(e);try{const C=v.delete(D);C.onerror=S=>{u(qf(S,"storage-delete"))},C.onsuccess=()=>{o()}}catch(C){u(pn.create("storage-delete",{originalErrorMessage:null===(l=C)||void 0===l?void 0:l.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Dx{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,G.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),o=e.storage.getActiveConfig(),u=yield t;u&&(e.lastFetchStatus=u);const l=yield r;l&&(e.lastSuccessfulFetchTimestampMillis=l);const p=yield o;p&&(e.activeConfig=p)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function mw(){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,G.Z)(function*(){if(!(0,st.hl)())return!1;try{return yield(0,st.eu)()}catch{return!1}})).apply(this,arguments)}!function gw(){(0,Mt._registerComponent)(new ss.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw pn.create("registration-window");if(!(0,st.hl)())throw pn.create("indexed-db-unavailable");const{projectId:u,apiKey:l,appId:p}=r.options;if(!u)throw pn.create("registration-project-id");if(!l)throw pn.create("registration-api-key");if(!p)throw pn.create("registration-app-id");const v=new _y(p,r.name,t=t||"firebase"),D=new Dx(v),C=new os.Yd(Hf);C.logLevel=os.in.ERROR;const S=new Ix(o,Mt.SDK_VERSION,t,u,l,p),F=new nC(S,v),z=new Xb(F,v,D,C),ne=new iC(r,z,D,v,C);return function fw(n){const e=(0,st.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(ne),ne},"PUBLIC").setMultipleInstances(!0)),(0,Mt.registerVersion)(Hf,"0.3.15"),(0,Mt.registerVersion)(Hf,"0.3.15","esm2017")}();const ro="/firebase-messaging-sw.js",Yf="/firebase-cloud-messaging-push-scope",Td="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yw="google.c.a.c_id",wy="google.c.a.c_l",vw="google.c.a.ts",oC="google.c.a.e";var cs=(()=>{return(n=cs||(cs={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",cs;var n})();function io(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Cx(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),o=new Uint8Array(r.length);for(let u=0;u<r.length;++u)o[u]=r.charCodeAt(u);return o}const Iy="fcm_token_details_db",_w="fcm_token_object_Store";function aC(n){return Ey.apply(this,arguments)}function Ey(){return Ey=(0,G.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(u=>u.name).includes(Iy))return null;let e=null;return(yield(0,md.X3)(Iy,5,{upgrade:(r=(0,G.Z)(function*(o,u,l,p){var v;if(u<2||!o.objectStoreNames.contains(_w))return;const D=p.objectStore(_w),C=yield D.index("fcmSenderId").get(n);if(yield D.clear(),C)if(2===u){const S=C;if(!S.auth||!S.p256dh||!S.endpoint)return;e={token:S.fcmToken,createTime:null!==(v=S.createTime)&&void 0!==v?v:Date.now(),subscriptionOptions:{auth:S.auth,p256dh:S.p256dh,endpoint:S.endpoint,swScope:S.swScope,vapidKey:"string"==typeof S.vapidKey?S.vapidKey:io(S.vapidKey)}}}else if(3===u){const S=C;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:io(S.auth),p256dh:io(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:io(S.vapidKey)}}}else if(4===u){const S=C;e={token:S.fcmToken,createTime:S.createTime,subscriptionOptions:{auth:io(S.auth),p256dh:io(S.p256dh),endpoint:S.endpoint,swScope:S.swScope,vapidKey:io(S.vapidKey)}}}}),function(u,l,p,v){return r.apply(this,arguments)})})).close(),yield(0,md.Lj)(Iy),yield(0,md.Lj)("fcm_vapid_details_db"),yield(0,md.Lj)("undefined"),ww(e)?e:null;var r}),Ey.apply(this,arguments)}function ww(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const so="firebase-messaging-store";let Dy=null;function by(){return Dy||(Dy=(0,md.X3)("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(so)}})),Dy}function Ew(n){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,G.Z)(function*(n){const e=Dw(n),r=yield(yield by()).transaction(so).objectStore(so).get(e);if(r)return r;{const o=yield aC(n.appConfig.senderId);if(o)return yield Ty(n,o),o}})).apply(this,arguments)}function Ty(n,e){return Sy.apply(this,arguments)}function Sy(){return(Sy=(0,G.Z)(function*(n,e){const t=Dw(n),o=(yield by()).transaction(so,"readwrite");return yield o.objectStore(so).put(e,t),yield o.done,e})).apply(this,arguments)}function Qf(n){return oo.apply(this,arguments)}function oo(){return(oo=(0,G.Z)(function*(n){const e=Dw(n),r=(yield by()).transaction(so,"readwrite");yield r.objectStore(so).delete(e),yield r.done})).apply(this,arguments)}function Dw({appConfig:n}){return n.appId}const pr=new st.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function cC(n,e){return xd.apply(this,arguments)}function xd(){return(xd=(0,G.Z)(function*(n,e){var t;const r=yield vc(n),o=Jf(e),u={method:"POST",headers:r,body:JSON.stringify(o)};let l;try{l=yield(yield fetch(ao(n.appConfig),u)).json()}catch(p){throw pr.create("token-subscribe-failed",{errorInfo:null===(t=p)||void 0===t?void 0:t.toString()})}if(l.error)throw pr.create("token-subscribe-failed",{errorInfo:l.error.message});if(!l.token)throw pr.create("token-subscribe-no-token");return l.token})).apply(this,arguments)}function lC(n,e){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,G.Z)(function*(n,e){var t;const r=yield vc(n),o=Jf(e.subscriptionOptions),u={method:"PATCH",headers:r,body:JSON.stringify(o)};let l;try{l=yield(yield fetch(`${ao(n.appConfig)}/${e.token}`,u)).json()}catch(p){throw pr.create("token-update-failed",{errorInfo:null===(t=p)||void 0===t?void 0:t.toString()})}if(l.error)throw pr.create("token-update-failed",{errorInfo:l.error.message});if(!l.token)throw pr.create("token-update-no-token");return l.token})).apply(this,arguments)}function yc(n,e){return sr.apply(this,arguments)}function sr(){return(sr=(0,G.Z)(function*(n,e){var t;const o={method:"DELETE",headers:yield vc(n)};try{const l=yield(yield fetch(`${ao(n.appConfig)}/${e}`,o)).json();if(l.error)throw pr.create("token-unsubscribe-failed",{errorInfo:l.error.message})}catch(u){throw pr.create("token-unsubscribe-failed",{errorInfo:null===(t=u)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function ao({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function vc(n){return qr.apply(this,arguments)}function qr(){return(qr=(0,G.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function Jf({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const o={web:{endpoint:t,auth:e,p256dh:n}};return r!==Td&&(o.web.applicationPubKey=r),o}const _c=6048e5;function wc(n){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,G.Z)(function*(n){const e=yield bw(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:io(e.getKey("auth")),p256dh:io(e.getKey("p256dh"))},r=yield Ew(n.firebaseDependencies);if(r){if(Cw(r.subscriptionOptions,t))return Date.now()>=r.createTime+_c?Ic(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield yc(n.firebaseDependencies,r.token)}catch(o){console.warn(o)}return ou(n.firebaseDependencies,t)}return ou(n.firebaseDependencies,t)})).apply(this,arguments)}function su(n){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,G.Z)(function*(n){const e=yield Ew(n.firebaseDependencies);e&&(yield yc(n.firebaseDependencies,e.token),yield Qf(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function Ic(n,e){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,G.Z)(function*(n,e){try{const t=yield lC(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Ty(n.firebaseDependencies,r),t}catch(t){throw yield su(n),t}})).apply(this,arguments)}function ou(n,e){return Jo.apply(this,arguments)}function Jo(){return(Jo=(0,G.Z)(function*(n,e){const r={token:yield cC(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Ty(n,r),r.token})).apply(this,arguments)}function bw(n,e){return Xf.apply(this,arguments)}function Xf(){return(Xf=(0,G.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Cx(e)})})).apply(this,arguments)}function Cw(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function Ay(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function Tw(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const o=e.notification.image;o&&(n.notification.image=o);const u=e.notification.icon;u&&(n.notification.icon=u)}(e,n),function Sw(n,e){!e.data||(n.data=e.data)}(e,n),function Aw(n,e){var t,r,o,u,l;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const p=null!==(o=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==o?o:null===(u=e.notification)||void 0===u?void 0:u.click_action;p&&(n.fcmOptions.link=p);const v=null===(l=e.fcmOptions)||void 0===l?void 0:l.analytics_label;v&&(n.fcmOptions.analyticsLabel=v)}(e,n),e}function xw(n){return"object"==typeof n&&!!n&&yw in n}function xy(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function My(n){return pr.create("missing-app-config-values",{valueName:n})}xy("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),xy("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Mw{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const o=function dC(n){if(!n||!n.options)throw My("App Configuration Object");if(!n.name)throw My("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw My(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:o,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function Rw(n){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,G.Z)(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(ro,{scope:Yf}),n.swRegistration.update().catch(()=>{})}catch(t){throw pr.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function Ny(n,e){return Md.apply(this,arguments)}function Md(){return(Md=(0,G.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield Rw(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw pr.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function hC(n,e){return Ec.apply(this,arguments)}function Ec(){return(Ec=(0,G.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Td)})).apply(this,arguments)}function Nd(){return(Nd=(0,G.Z)(function*(n,e){if(!navigator)throw pr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw pr.create("permission-blocked");return yield hC(n,e?.vapidKey),yield Ny(n,e?.serviceWorkerRegistration),wc(n)})).apply(this,arguments)}function fC(n,e,t){return Pd.apply(this,arguments)}function Pd(){return(Pd=(0,G.Z)(function*(n,e,t){const r=Py(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[yw],message_name:t[wy],message_time:t[vw],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Py(n){switch(n){case cs.NOTIFICATION_CLICKED:return"notification_open";case cs.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ky(){return(ky=(0,G.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===cs.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(Ay(t)):n.onMessageHandler.next(Ay(t)));const r=t.data;xw(r)&&"1"===r[oC]&&(yield fC(n,t.messageType,r))})).apply(this,arguments)}const ep="@firebase/messaging",Pw=n=>{const e=new Mw(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Nw(n,e){return ky.apply(this,arguments)}(e,t)),e},Ly=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function Rd(n,e){return Nd.apply(this,arguments)}(e,r)}};function Ow(){return tp.apply(this,arguments)}function tp(){return(tp=(0,G.Z)(function*(){try{yield(0,st.eu)()}catch{return!1}return typeof window<"u"&&(0,st.hl)()&&(0,st.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kw(){(0,Mt._registerComponent)(new ss.wA("messaging",Pw,"PUBLIC")),(0,Mt._registerComponent)(new ss.wA("messaging-internal",Ly,"PRIVATE")),(0,Mt.registerVersion)(ep,"0.11.0"),(0,Mt.registerVersion)(ep,"0.11.0","esm2017")}();const kd="analytics",Uw="firebase_id",$w="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Uy="https://www.googletagmanager.com/gtag/js",or=new os.Yd("@firebase/analytics");function Vy(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function xx(n,e){const t=document.createElement("script");t.src=`${Uy}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function yC(n,e,t,r,o,u){return rp.apply(this,arguments)}function rp(){return(rp=(0,G.Z)(function*(n,e,t,r,o,u){const l=r[o];try{if(l)yield e[l];else{const v=(yield Vy(t)).find(D=>D.measurementId===o);v&&(yield e[v.appId])}}catch(p){or.error(p)}n("config",o,u)})).apply(this,arguments)}function vC(n,e,t,r,o){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,G.Z)(function*(n,e,t,r,o){try{let u=[];if(o&&o.send_to){let l=o.send_to;Array.isArray(l)||(l=[l]);const p=yield Vy(t);for(const v of l){const D=p.find(S=>S.measurementId===v),C=D&&e[D.appId];if(!C){u=[];break}u.push(C)}}0===u.length&&(u=Object.values(e)),yield Promise.all(u),n("event",r,o||{})}catch(u){or.error(u)}})).apply(this,arguments)}function wC(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Uy)&&t.src.includes(n))return t;return null}const si=new st.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Gw=new class Dc{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function IC(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function qw(n){return By.apply(this,arguments)}function By(){return(By=(0,G.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,o={method:"GET",headers:IC(r)},u=$w.replace("{app-id}",t),l=yield fetch(u,o);if(200!==l.status&&304!==l.status){let p="";try{const v=yield l.json();null!==(e=v.error)&&void 0!==e&&e.message&&(p=v.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:l.status,responseMessage:p})}return l.json()})).apply(this,arguments)}function Kw(n){return Zw.apply(this,arguments)}function Zw(){return(Zw=(0,G.Z)(function*(n,e=Gw,t){const{appId:r,apiKey:o,measurementId:u}=n.options;if(!r)throw si.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:r};throw si.create("no-api-key")}const l=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},p=new DC;return setTimeout((0,G.Z)(function*(){p.abort()}),void 0!==t?t:6e4),$y({appId:r,apiKey:o,measurementId:u},l,p,e)})).apply(this,arguments)}function $y(n,e,t){return ip.apply(this,arguments)}function ip(){return(ip=(0,G.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,o=Gw){var u,l;const{appId:p,measurementId:v}=n;try{yield ls(r,e)}catch(D){if(v)return or.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${v} provided in the "measurementId" field in the local Firebase config. [${null===(u=D)||void 0===u?void 0:u.message}]`),{appId:p,measurementId:v};throw D}try{const D=yield qw(n);return o.deleteThrottleMetadata(p),D}catch(D){const C=D;if(!EC(C)){if(o.deleteThrottleMetadata(p),v)return or.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${v} provided in the "measurementId" field in the local Firebase config. [${C?.message}]`),{appId:p,measurementId:v};throw D}const S=503===Number(null===(l=C?.customData)||void 0===l?void 0:l.httpStatus)?(0,st.$s)(t,o.intervalMillis,30):(0,st.$s)(t,o.intervalMillis),F={throttleEndTimeMillis:Date.now()+S,backoffCount:t+1};return o.setThrottleMetadata(p,F),or.debug(`Calling attemptFetch again in ${S} millis`),$y(n,F,r,o)}})).apply(this,arguments)}function ls(n,e){return new Promise((t,r)=>{const o=Math.max(e-Date.now(),0),u=setTimeout(t,o);n.addEventListener(()=>{clearTimeout(u),r(si.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function EC(n){if(!(n instanceof st.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class DC{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Di,Wy;function oi(){return(oi=(0,G.Z)(function*(n,e,t,r,o){if(o&&o.global)n("event",t,r);else{const u=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:u}))}})).apply(this,arguments)}function Gy(n){Wy=n}function Qw(n){Di=n}function Jw(){return op.apply(this,arguments)}function op(){return(op=(0,G.Z)(function*(){var n;if(!(0,st.hl)())return or.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,st.eu)()}catch(e){return or.warn(si.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function qy(){return(qy=(0,G.Z)(function*(n,e,t,r,o,u,l){var p;const v=Kw(n);v.then(z=>{t[z.measurementId]=z.appId,n.options.measurementId&&z.measurementId!==n.options.measurementId&&or.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${z.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(z=>or.error(z)),e.push(v);const D=Jw().then(z=>{if(z)return r.getId()}),[C,S]=yield Promise.all([v,D]);wC(u)||xx(u,C.measurementId),Wy&&(o("consent","default",Wy),Gy(void 0)),o("js",new Date);const F=null!==(p=l?.config)&&void 0!==p?p:{};return F.origin="firebase",F.update=!0,null!=S&&(F[Uw]=S),o("config",C.measurementId,F),Di&&(o("set",Di),Qw(void 0)),C.measurementId})).apply(this,arguments)}class Xw{constructor(e){this.app=e}_delete(){return delete ds[this.app.options.appId],Promise.resolve()}}let ds={},up=[];const cp={};let Zy,hs,Od="dataLayer",lp=!1;function tI(n,e,t){!function eI(){const n=[];if((0,st.ru)()&&n.push("This is a browser extension environment."),(0,st.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,o)=>`(${o+1}) ${r}`).join(" "),t=si.create("invalid-analytics-context",{errorInfo:e});or.warn(t.message)}}();const r=n.options.appId;if(!r)throw si.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw si.create("no-api-key");or.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ds[r])throw si.create("already-exists",{id:r});if(!lp){!function mC(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Od);const{wrappedGtag:u,gtagCore:l}=function _C(n,e,t,r,o){let u=function(...l){window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(u=window[o]),window[o]=function jw(n,e,t,r){function u(){return(u=(0,G.Z)(function*(l,p,v){try{"event"===l?yield vC(n,e,t,p,v):"config"===l?yield yC(n,e,t,r,p,v):"consent"===l?n("consent","update",v):n("set",p)}catch(D){or.error(D)}})).apply(this,arguments)}return function o(l,p,v){return u.apply(this,arguments)}}(u,n,e,t),{gtagCore:u,wrappedGtag:window[o]}}(ds,up,cp,Od,"gtag");hs=u,Zy=l,lp=!0}return ds[r]=function ap(n,e,t,r,o,u,l){return qy.apply(this,arguments)}(n,up,cp,e,Zy,Od,t),new Xw(n)}function AC(){return Yy.apply(this,arguments)}function Yy(){return(Yy=(0,G.Z)(function*(){if((0,st.ru)()||!(0,st.zI)()||!(0,st.hl)())return!1;try{return yield(0,st.eu)()}catch{return!1}})).apply(this,arguments)}const nI="@firebase/analytics";!function MC(){(0,Mt._registerComponent)(new ss.wA(kd,(e,{options:t})=>tI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Mt._registerComponent)(new ss.wA("analytics-internal",function n(e){try{const t=e.getProvider(kd).getImmediate();return{logEvent:(r,o,u)=>function xC(n,e,t,r){n=(0,st.m9)(n),function Hi(n,e,t,r,o){return oi.apply(this,arguments)}(hs,ds[n.app.options.appId],e,t,r).catch(o=>or.error(o))}(t,r,o,u)}}catch(t){throw si.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Mt.registerVersion)(nI,"0.8.4"),(0,Mt.registerVersion)(nI,"0.8.4","esm2017")}();const PC=new class NC extends xb{}(class RC extends Gm{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}});var bc=O(9468),uu=O(5363);const Ld=new y.GfV("7.5.0"),dp="__angularfire_symbol__analyticsIsSupportedValue",hp="__angularfire_symbol__analyticsIsSupported",fp="__angularfire_symbol__remoteConfigIsSupportedValue",pp="__angularfire_symbol__remoteConfigIsSupported",gp="__angularfire_symbol__messagingIsSupportedValue",mp="__angularfire_symbol__messagingIsSupported";function Qy(n,e,t){if(e){if(1===e.length)return e[0];const u=e.filter(l=>l.app===t);if(1===u.length)return u[0]}return t.container.getProvider(n).getImmediate({optional:!0})}globalThis[hp]||(globalThis[hp]=AC().then(n=>globalThis[dp]=n).catch(()=>globalThis[dp]=!1)),globalThis[mp]||(globalThis[mp]=Ow().then(n=>globalThis[gp]=n).catch(()=>globalThis[gp]=!1)),globalThis[pp]||(globalThis[pp]=mw().then(n=>globalThis[fp]=n).catch(()=>globalThis[fp]=!1));const Xo=(n,e)=>{const t=e?[e]:(0,Mt.getApps)(),r=[];return t.forEach(o=>{o.container.getProvider(n).instances.forEach(l=>{r.includes(l)||r.push(l)})}),r};function Fd(){}class vp{constructor(e,t=PC){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const o=this.zone;return this.delegate.schedule(function(l){o.runGuarded(()=>{e.apply(this,[l])})},t,r)}}class Vx{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fd,{},Fd,Fd)),t.pipe(_n({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Tc=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new vp(Zone.current)),this.insideAngular=t.run(()=>new vp(Zone.current,Km)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.R0b))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function ea(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function Bx(n){return ea().ngZone.runOutsideAngular(()=>n())}function at(n){return ea().ngZone.run(()=>n())}function ai(n){return ea(),function Sc(n){return function(t){return(t=t.lift(new Vx(n.ngZone))).pipe((0,bc.R)(n.outsideAngular),(0,uu.Q)(n.insideAngular))}}(ea())(n)}const OC=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),at(()=>n.apply(void 0,r))},Ac=(n,e)=>function(){let t;const r=arguments;for(let u=0;u<arguments.length;u++)"function"==typeof r[u]&&(e&&(t||(t=at(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fd,{},Fd,Fd)))),r[u]=OC(r[u],t));const o=Bx(()=>n.apply(this,r));if(!e){if(o instanceof rr.y){const u=ea();return o.pipe((0,bc.R)(u.outsideAngular),(0,uu.Q)(u.insideAngular))}return at(()=>o)}return o instanceof rr.y?o.pipe(ai):o instanceof Promise?at(()=>new Promise((u,l)=>o.then(p=>at(()=>u(p)),p=>at(()=>l(p))))):"function"==typeof o&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),o.apply(this,arguments)}:at(()=>o)};function xc(){return(0,jn.e)((n,e)=>{let t,r=!1;n.subscribe((0,ir.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function Hx(n,e){return n===e}var Xe,bi=O(2011),FC=(O(5881),O(3942)),iI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fs={},_p=_p||{},Ct=iI||self;function wp(){}function Ip(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function uo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jy="closure_uid_"+(1e9*Math.random()>>>0),VC=0;function Ep(n,e,t){return n.call.apply(n.bind,arguments)}function sI(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function gr(n,e,t){return(gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ep:sI).apply(null,arguments)}function Ud(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function mr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var l=Array(arguments.length-2),p=2;p<arguments.length;p++)l[p-2]=arguments[p];return e.prototype[o].apply(r,l)}}function Ci(){this.s=this.s,this.o=this.o}Ci.prototype.s=!1,Ci.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function UC(n){Object.prototype.hasOwnProperty.call(n,Jy)&&n[Jy]||(n[Jy]=++VC)}(this)},Ci.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const oI=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Xy(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function aI(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Ip(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let l=0;l<u;l++)n[o+l]=r[l]}else n.push(r)}}function yr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}yr.prototype.h=function(){this.defaultPrevented=!0};var uI=function(){if(!Ct.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ct.addEventListener("test",wp,e),Ct.removeEventListener("test",wp,e)}catch{}return n}();function Bd(n){return/^[\s\xa0]*$/.test(n)}var cI=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Dp(n,e){return n<e?-1:n>e?1:0}function bp(){var n=Ct.navigator;return n&&(n=n.userAgent)?n:""}function ps(n){return-1!=bp().indexOf(n)}function lI(n){return lI[" "](n),n}lI[" "]=wp;var ta,n,Wx=ps("Opera"),$d=ps("Trident")||ps("MSIE"),ev=ps("Edge"),Mc=ev||$d,dI=ps("Gecko")&&!(-1!=bp().toLowerCase().indexOf("webkit")&&!ps("Edge"))&&!(ps("Trident")||ps("MSIE"))&&!ps("Edge"),BC=-1!=bp().toLowerCase().indexOf("webkit")&&!ps("Edge");function tv(){var n=Ct.document;return n?n.documentMode:void 0}e:{var nv="",rv=(n=bp(),dI?/rv:([^\);]+)(\)|;)/.exec(n):ev?/Edge\/([\d\.]+)/.exec(n):$d?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):BC?/WebKit\/(\S+)/.exec(n):Wx?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(rv&&(nv=rv?rv[1]:""),$d){var iv=tv();if(null!=iv&&iv>parseFloat(nv)){ta=String(iv);break e}}ta=nv}var $C={};var HC=Ct.document&&$d&&(tv()||parseInt(ta,10))||void 0;function co(n,e){if(yr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dI){e:{try{lI(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zC[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&co.X.h.call(this)}}mr(co,yr);var zC={2:"touch",3:"pen",4:"mouse"};co.prototype.h=function(){co.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Rc="closure_listenable_"+(1e6*Math.random()|0),WC=0;function fI(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++WC,this.ba=this.ea=!1}function Tp(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Sp(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function pI(n){const e={};for(const t in n)e[t]=n[t];return e}const Ap="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gI(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Ap.length;u++)t=Ap[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function jd(n){this.src=n,this.g={},this.h=0}function xp(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=oI(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(Tp(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function sv(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}jd.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var l=sv(n,e,r,o);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new fI(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var ov="closure_lm_"+(1e6*Math.random()|0),av={};function Mp(n,e,t,r,o){if(r&&r.once)return vI(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Mp(n,e[u],t,r,o);return null}return t=dv(t),n&&n[Rc]?n.N(e,t,uo(r)?!!r.capture:!!r,o):mI(n,e,t,!1,r,o)}function mI(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var l=uo(o)?!!o.capture:!!o,p=cv(n);if(p||(n[ov]=p=new jd(n)),(t=p.add(e,t,r,l,u)).proxy)return t;if(r=function yI(){const e=GC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)uI||(o=l),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(wI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function vI(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)vI(n,e[u],t,r,o);return null}return t=dv(t),n&&n[Rc]?n.O(e,t,uo(r)?!!r.capture:!!r,o):mI(n,e,t,!0,r,o)}function _I(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)_I(n,e[u],t,r,o);else r=uo(r)?!!r.capture:!!r,t=dv(t),n&&n[Rc]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=sv(u=n.g[e],t,r,o))&&(Tp(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=cv(n))&&(e=n.g[e.toString()],n=-1,e&&(n=sv(e,t,r,o)),(t=-1<n?e[n]:null)&&uv(t))}function uv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Rc])xp(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(wI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=cv(e))?(xp(t,n),0==t.h&&(t.src=null,e[ov]=null)):Tp(n)}}}function wI(n){return n in av?av[n]:av[n]="on"+n}function GC(n,e){if(n.ba)n=!0;else{e=new co(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&uv(n),n=t.call(r,e)}return n}function cv(n){return(n=n[ov])instanceof jd?n:null}var lv="__closure_events_fn_"+(1e9*Math.random()>>>0);function dv(n){return"function"==typeof n?n:(n[lv]||(n[lv]=function(e){return n.handleEvent(e)}),n[lv])}function Qn(){Ci.call(this),this.i=new jd(this),this.P=this,this.I=null}function ar(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new yr(e,n);else if(e instanceof yr)e.target=e.target||n;else{var o=e;gI(e=new yr(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var l=e.g=t[u];o=Rp(l,r,!0,e)&&o}if(o=Rp(l=e.g=n,r,!0,e)&&o,o=Rp(l,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Rp(l=e.g=t[u],r,!1,e)&&o}function Rp(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var l=e[u];if(l&&!l.ba&&l.capture==t){var p=l.listener,v=l.ha||l.src;l.ea&&xp(n.i,l),o=!1!==p.call(v,r)&&o}}return o&&!r.defaultPrevented}mr(Qn,Ci),Qn.prototype[Rc]=!0,Qn.prototype.removeEventListener=function(n,e,t,r){_I(this,n,e,t,r)},Qn.prototype.M=function(){if(Qn.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Tp(t[r]);delete n.g[e],n.h--}}this.I=null},Qn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Qn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var hv=Ct.JSON.stringify;function II(){var n=DI;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Pp,EI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new KC,n=>n.reset());class KC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function fv(n){Ct.setTimeout(()=>{throw n},0)}function Np(n,e){Pp||function pv(){var n=Ct.Promise.resolve(void 0);Pp=function(){n.then(mv)}}(),gv||(Pp(),gv=!0),DI.add(n,e)}var gv=!1,DI=new class qC{constructor(){this.h=this.g=null}add(e,t){const r=EI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function mv(){for(var n;n=II();){try{n.h.call(n.g)}catch(t){fv(t)}var e=EI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}gv=!1}function kp(n,e){Qn.call(this),this.h=n||1,this.g=e||Ct,this.j=gr(this.lb,this),this.l=Date.now()}function yv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function na(n,e,t){if("function"==typeof n)t&&(n=gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ct.setTimeout(n,e||0)}function vv(n){n.g=na(()=>{n.g=null,n.i&&(n.i=!1,vv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}mr(kp,Qn),(Xe=kp.prototype).ca=!1,Xe.R=null,Xe.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),ar(this,"tick"),this.ca&&(yv(this),this.start()))}},Xe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Xe.M=function(){kp.X.M.call(this),yv(this),delete this.g};class ZC extends Ci{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vv(this)}M(){super.M(),this.g&&(Ct.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Op(n){Ci.call(this),this.h=n,this.g={}}mr(Op,Ci);var _v=[];function Lp(n,e,t,r){Array.isArray(t)||(t&&(_v[0]=t.toString()),t=_v);for(var o=0;o<t.length;o++){var u=Mp(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function bI(n){Sp(n.g,function(e,t){this.g.hasOwnProperty(t)&&uv(e)},n),n.g={}}function Nc(){this.g=!0}function ra(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function SI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var l=1;l<o.length;l++)o[l]=""}}}return hv(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Op.prototype.M=function(){Op.X.M.call(this),bI(this)},Op.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Nc.prototype.Aa=function(){this.g=!1},Nc.prototype.info=function(){};var ia={},wv=null;function Fp(){return wv=wv||new Qn}function AI(n){yr.call(this,ia.Pa,n)}function Hd(n){const e=Fp();ar(e,new AI(e))}function xI(n,e){yr.call(this,ia.STAT_EVENT,n),this.stat=e}function Tr(n){const e=Fp();ar(e,new xI(e,n))}function QC(n,e){yr.call(this,ia.Qa,n),this.size=e}function Pc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ct.setTimeout(function(){n()},e)}ia.Pa="serverreachability",mr(AI,yr),ia.STAT_EVENT="statevent",mr(xI,yr),ia.Qa="timingevent",mr(QC,yr);var Up={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},MI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function RI(){}function NI(){}RI.prototype.h=null;var Dv,zd={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Iv(){yr.call(this,"d")}function Ev(){yr.call(this,"c")}function Vp(){}function Wd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Op(this),this.O=XC,this.T=new kp(n=Mc?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new PI}function PI(){this.i=null,this.g="",this.h=!1}mr(Iv,yr),mr(Ev,yr),mr(Vp,RI),Vp.prototype.g=function(){return new XMLHttpRequest},Vp.prototype.i=function(){return{}},Dv=new Vp;var XC=45e3,bv={},Bp={};function Cv(n,e,t){n.K=1,n.v=zp(zi(e)),n.s=t,n.P=!0,kc(n,null)}function kc(n,e){n.F=Date.now(),Oc(n),n.A=zi(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),iT(t.i,"t",r),n.C=0,t=n.l.H,n.h=new PI,n.g=$v(n.l,t?e:null,!n.s),0<n.N&&(n.L=new ZC(gr(n.La,n,n.g),n.N)),Lp(n.S,n.g,"readystatechange",n.ib),e=n.H?pI(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Hd(),function YC(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var l="",p=u.split("&"),v=0;v<p.length;v++){var D=p[v].split("=");if(1<D.length){var C=D[0];D=D[1];var S=C.split("_");l=2<=S.length&&"type"==S[1]?l+(C+"=")+D+"&":l+(C+"=redacted&")}}else l=null;else l=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Tv(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Sv(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=kI(n,t),o==Bp){4==e&&(n.o=4,Tr(14),r=!1),ra(n.j,n.m,null,"[Incomplete Response]");break}if(o==bv){n.o=4,Tr(15),ra(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ra(n.j,n.m,o,null),$p(n,o)}Tv(n)&&o!=Bp&&o!=bv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Tr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),eh(e),e.K=!0,Tr(11))):(ra(n.j,n.m,t,"[Invalid Chunked Response]"),Lc(n),qd(n))}function kI(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Bp:(t=Number(e.substring(t,r)),isNaN(t)?bv:(r+=1)+t>e.length?Bp:(e=e.substr(r,t),n.C=r+t,e))}function Oc(n){n.V=Date.now()+n.O,Av(n,n.O)}function Av(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Pc(gr(n.gb,n),e)}function Gd(n){n.B&&(Ct.clearTimeout(n.B),n.B=null)}function qd(n){0==n.l.G||n.I||aT(n.l,n)}function Lc(n){Gd(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,yv(n.T),bI(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function $p(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Rv(t.h,n)))if(!n.J&&Rv(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Xp(t),hu(t)}Jp(t),Tr(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Pc(gr(t.cb,t),6e3));if(1>=HI(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else pu(t,11)}else if((n.J||t.g==n)&&Xp(t),!Bd(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let D=o[e];if(t.T=D[0],D=D[1],2==t.G)if("c"==D[0]){t.I=D[1],t.ka=D[2];const C=D[3];null!=C&&(t.ma=C,t.j.info("VER="+t.ma));const S=D[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const F=D[5];null!=F&&"number"==typeof F&&0<F&&(t.J=r=1.5*F,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const z=n.g;if(z){const ne=z.g?z.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ne){var u=r.h;u.g||-1==ne.indexOf("spdy")&&-1==ne.indexOf("quic")&&-1==ne.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(Nv(u,u.h),u.h=null))}if(r.D){const be=z.g?z.g.getResponseHeader("X-HTTP-Session-Id"):null;be&&(r.za=be,on(r.F,r.D,be))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=Bv(r,r.H?r.ka:null,r.V),l.J){Pv(r.h,l);var p=l,v=r.J;v&&p.setTimeout(v),p.B&&(Gd(p),Oc(p)),r.g=l}else eE(r);0<t.i.length&&Vv(t)}else"stop"!=D[0]&&"close"!=D[0]||pu(t,7);else 3==t.G&&("stop"==D[0]||"close"==D[0]?"stop"==D[0]?pu(t,7):Yp(t):"noop"!=D[0]&&t.l&&t.l.wa(D),t.A=0)}Hd()}catch{}}function OI(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ip(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function tT(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Ip(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function eT(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Ip(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(Xe=Wd.prototype).setTimeout=function(n){this.O=n},Xe.ib=function(n){n=n.target;const e=this.L;e&&3==gs(n)?e.l():this.La(n)},Xe.La=function(n){try{if(n==this.g)e:{const C=gs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>C)&&(3!=C||Mc||this.g&&(this.h.h||this.g.fa()||YI(this.g)))){this.I||4!=C||7==e||Hd(),Gd(this);var t=this.g.aa();this.Y=t;t:if(Tv(this)){var r=YI(this.g);n="";var o=r.length,u=4==gs(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Lc(this),qd(this);var l="";break t}this.h.i=new Ct.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function CI(n,e,t,r,o,u,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+l})}(this.j,this.u,this.A,this.m,this.U,C,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var p,v=this.g;if((p=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Bd(p)){var D=p;break t}}D=null}if(!(t=D)){this.i=!1,this.o=3,Tr(12),Lc(this),qd(this);break e}ra(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,$p(this,t)}this.P?(Sv(this,C,l),Mc&&this.i&&3==C&&(Lp(this.S,this.T,"tick",this.hb),this.T.start())):(ra(this.j,this.m,l,null),$p(this,l)),4==C&&Lc(this),this.i&&!this.I&&(4==C?aT(this.l,this):(this.i=!1,Oc(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Tr(12)):(this.o=0,Tr(13)),Lc(this),qd(this)}}}catch{}},Xe.hb=function(){if(this.g){var n=gs(this.g),e=this.g.fa();this.C<e.length&&(Gd(this),Sv(this,n,e),this.i&&4!=n&&Oc(this))}},Xe.cancel=function(){this.I=!0,Lc(this)},Xe.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function TI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Hd(),Tr(17)),Lc(this),this.o=2,qd(this)):Av(this,this.V-n)};var LI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function cu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof cu){this.h=void 0!==e?e:n.h,ui(this,n.j),this.s=n.s,this.g=n.g,jp(this,n.m),this.l=n.l,e=n.i;var t=new lu;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Hp(this,t),this.o=n.o}else n&&(t=String(n).match(LI))?(this.h=!!e,ui(this,t[1]||"",!0),this.s=Zd(t[2]||""),this.g=Zd(t[3]||"",!0),jp(this,t[4]),this.l=Zd(t[5]||"",!0),Hp(this,t[6]||"",!0),this.o=Zd(t[7]||"")):(this.h=!!e,this.i=new lu(null,this.h))}function zi(n){return new cu(n)}function ui(n,e,t){n.j=t?Zd(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Hp(n,e,t){e instanceof lu?(n.i=e,function xv(n,e){e&&!n.j&&(lo(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(VI(this,r),iT(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Yd(e,FI)),n.i=new lu(e,n.h))}function on(n,e,t){n.i.set(e,t)}function zp(n){return on(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Zd(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Yd(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Wp),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Wp(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}cu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Yd(e,Qd,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Yd(e,Qd,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Yd(t,"/"==t.charAt(0)?rT:nT,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Yd(t,UI)),n.join("")};var Qd=/[#\/\?@]/g,nT=/[#\?:]/g,rT=/[#\?]/g,FI=/[#\?@]/g,UI=/#/g;function lu(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function lo(n){n.g||(n.g=new Map,n.h=0,n.i&&function Kd(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function VI(n,e){lo(n),e=sa(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function BI(n,e){return lo(n),e=sa(n,e),n.g.has(e)}function iT(n,e,t){VI(n,e),0<t.length&&(n.i=null,n.g.set(sa(n,e),Xy(t)),n.h+=t.length)}function sa(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Gp(n){this.l=n||Mv,n=Ct.PerformanceNavigationTiming?0<(n=Ct.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ct.g&&Ct.g.Ga&&Ct.g.Ga()&&Ct.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Xe=lu.prototype).add=function(n,e){lo(this),this.i=null,n=sa(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Xe.forEach=function(n,e){lo(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},Xe.oa=function(){lo(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},Xe.W=function(n){lo(this);let e=[];if("string"==typeof n)BI(this,n)&&(e=e.concat(this.g.get(sa(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Xe.set=function(n,e){return lo(this),this.i=null,BI(this,n=sa(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Xe.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Xe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var o=u;""!==l[r]&&(o+="="+encodeURIComponent(String(l[r]))),n.push(o)}}return this.i=n.join("&")};var Mv=10;function jI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function HI(n){return n.h?1:n.g?n.g.size:0}function Rv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Nv(n,e){n.g?n.g.add(e):n.h=e}function Pv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function qp(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Xy(n.i)}function Kp(){}function sT(){this.g=new Kp}function zI(n,e,t){const r=t||"";try{OI(n,function(o,u){let l=o;uo(o)&&(l=hv(o)),e.push(r+u+"="+encodeURIComponent(l))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function Zp(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function Fc(n){this.l=n.ac||null,this.j=n.jb||!1}function Jd(n,e){Qn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gp.prototype.cancel=function(){if(this.i=qp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Kp.prototype.stringify=function(n){return Ct.JSON.stringify(n,void 0)},Kp.prototype.parse=function(n){return Ct.JSON.parse(n,void 0)},mr(Fc,RI),Fc.prototype.g=function(){return new Jd(this.l,this.j)},Fc.prototype.i=function(n){return function(){return n}}({}),mr(Jd,Qn);var kv=0;function Ov(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Xd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Jn(n)}function Jn(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Xe=Jd.prototype).open=function(n,e){if(this.readyState!=kv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Jn(this)},Xe.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ct).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Xe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Xd(this)),this.readyState=kv},Xe.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Ct.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ov(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Xe.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Xd(this):Jn(this),3==this.readyState&&Ov(this)}},Xe.Va=function(n){this.g&&(this.response=this.responseText=n,Xd(this))},Xe.Ua=function(n){this.g&&(this.response=n,Xd(this))},Xe.ga=function(){this.g&&Xd(this)},Xe.setRequestHeader=function(n,e){this.v.append(n,e)},Xe.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Xe.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Jd.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Uc=Ct.JSON.parse;function Rn(n){Qn.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=GI,this.K=this.L=!1}mr(Rn,Qn);var GI="",Gx=/^https?$/i,qx=["POST","PUT"];function Lv(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Vc(n),Bc(n)}function Vc(n){n.D||(n.D=!0,ar(n,"complete"),ar(n,"error"))}function KI(n){if(n.h&&typeof _p<"u"&&(!n.C[1]||4!=gs(n)||2!=n.aa()))if(n.v&&4==gs(n))na(n.Ha,0,n);else if(ar(n,"readystatechange"),4==gs(n)){n.h=!1;try{const p=n.aa();e:switch(p){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===p){var o=String(n.H).match(LI)[1]||null;if(!o&&Ct.self&&Ct.self.location){var u=Ct.self.location.protocol;o=u.substr(0,u.length-1)}r=!Gx.test(o?o.toLowerCase():"")}t=r}if(t)ar(n,"complete"),ar(n,"success");else{n.m=6;try{var l=2<gs(n)?n.g.statusText:""}catch{l=""}n.j=l+" ["+n.aa()+"]",Vc(n)}}finally{Bc(n)}}}function Bc(n,e){if(n.g){ZI(n);const t=n.g,r=n.C[0]?wp:null;n.g=null,n.C=null,e||ar(n,"ready");try{t.onreadystatechange=r}catch{}}}function ZI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ct.clearTimeout(n.A),n.A=null)}function gs(n){return n.g?n.g.readyState:0}function YI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case GI:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function QI(n){let e="";return Sp(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Fv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=QI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):on(n,e,t))}function du(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Uv(n){this.Ca=0,this.i=[],this.j=new Nc,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=du("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=du("baseRetryDelayMs",5e3,n),this.bb=du("retryDelaySeedMs",1e4,n),this.$a=du("forwardChannelMaxRetries",2,n),this.ta=du("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Gp(n&&n.concurrentRequestLimit),this.Fa=new sT,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Yp(n){if(Qp(n),3==n.G){var e=n.U++,t=zi(n.F);on(t,"SID",n.I),on(t,"RID",e),on(t,"TYPE","terminate"),$c(n,t),(e=new Wd(n,n.j,e,void 0)).K=2,e.v=zp(zi(t)),t=!1,Ct.navigator&&Ct.navigator.sendBeacon&&(t=Ct.navigator.sendBeacon(e.v.toString(),"")),!t&&Ct.Image&&((new Image).src=e.v,t=!0),t||(e.g=$v(e.l,null),e.g.da(e.v)),e.F=Date.now(),Oc(e)}nE(n)}function hu(n){n.g&&(eh(n),n.g.cancel(),n.g=null)}function Qp(n){hu(n),n.u&&(Ct.clearTimeout(n.u),n.u=null),Xp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ct.clearTimeout(n.m),n.m=null)}function Vv(n){jI(n.h)||n.m||(n.m=!0,Np(n.Ja,n),n.C=0)}function XI(n,e){var t;t=e?e.m:n.U++;const r=zi(n.F);on(r,"SID",n.I),on(r,"RID",t),on(r,"AID",n.T),$c(n,r),n.o&&n.s&&Fv(r,n.o,n.s),t=new Wd(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=fu(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Nv(n.h,t),Cv(t,r,e)}function $c(n,e){n.ia&&Sp(n.ia,function(t,r){on(e,r,t)}),n.l&&OI({},function(t,r){on(e,r,t)})}function fu(n,e,t){t=Math.min(n.i.length,t);var r=n.l?gr(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const l=["count="+t];-1==u?0<t?(u=o[0].h,l.push("ofs="+u)):u=0:l.push("ofs="+u);let p=!0;for(let v=0;v<t;v++){let D=o[v].h;const C=o[v].g;if(D-=u,0>D)u=Math.max(0,o[v].h-100),p=!1;else try{zI(C,l,"req"+D+"_")}catch{r&&r(C)}}if(p){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function eE(n){n.g||n.u||(n.Z=1,Np(n.Ia,n),n.A=0)}function Jp(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Pc(gr(n.Ia,n),tE(n,n.A)),n.A++,0))}function eh(n){null!=n.B&&(Ct.clearTimeout(n.B),n.B=null)}function oT(n){n.g=new Wd(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=zi(n.sa);on(e,"RID","rpc"),on(e,"SID",n.I),on(e,"CI",n.L?"0":"1"),on(e,"AID",n.T),on(e,"TYPE","xmlhttp"),$c(n,e),n.o&&n.s&&Fv(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=zp(zi(e)),t.s=null,t.P=!0,kc(t,n)}function Xp(n){null!=n.v&&(Ct.clearTimeout(n.v),n.v=null)}function aT(n,e){var t=null;if(n.g==e){Xp(n),eh(n),n.g=null;var r=2}else{if(!Rv(n.h,e))return;t=e.D,Pv(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;ar(r=Fp(),new QC(r,t)),Vv(n)}else eE(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function JI(n,e){return!(HI(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Pc(gr(n.Ja,n,e),tE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Jp(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:pu(n,5);break;case 4:pu(n,10);break;case 3:pu(n,6);break;default:pu(n,2)}}function tE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function pu(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=gr(n.kb,n);t||(t=new cu("//www.google.com/images/cleardot.gif"),Ct.location&&"http"==Ct.location.protocol||ui(t,"https"),zp(t)),function WI(n,e){const t=new Nc;if(Ct.Image){const r=new Image;r.onload=Ud(Zp,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Ud(Zp,t,r,"TestLoadImage: error",!1,e),r.onabort=Ud(Zp,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ud(Zp,t,r,"TestLoadImage: timeout",!1,e),Ct.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Tr(2);n.G=0,n.l&&n.l.va(e),nE(n),Qp(n)}function nE(n){if(n.G=0,n.la=[],n.l){const e=qp(n.h);(0!=e.length||0!=n.i.length)&&(aI(n.la,e),aI(n.la,n.i),n.h.i.length=0,Xy(n.i),n.i.length=0),n.l.ua()}}function Bv(n,e,t){var r=t instanceof cu?zi(t):new cu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),jp(r,r.m);else{var o=Ct.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new cu(null,void 0);r&&ui(u,r),e&&(u.g=e),o&&jp(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&on(r,t,e),on(r,"VER",n.ma),$c(n,r),r}function $v(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Rn(t&&n.Da&&!n.ra?new Fc({jb:!0}):n.ra)).Ka(n.H),e}function rE(){}function th(){if($d&&!(10<=Number(HC)))throw Error("Environmental error: no available transport.")}function Kr(n,e){Qn.call(this),this.g=new Uv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Bd(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Bd(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new gu(this)}function iE(n){Iv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sE(){Ev.call(this),this.status=1}function gu(n){this.g=n}(Xe=Rn.prototype).Ka=function(n){this.L=n},Xe.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Dv.g(),this.C=function JC(n){return n.h||(n.h=n.i())}(this.u?this.u:Dv),this.g.onreadystatechange=gr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void Lv(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Ct.FormData&&n instanceof Ct.FormData,!(0<=oI(qx,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,l]of t)this.g.setRequestHeader(u,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ZI(this),0<this.B&&((this.K=function qI(n){return $d&&function jC(){return function zx(n){var e=$C;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=cI(String(ta)).split("."),t=cI("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var o=e[l]||"",u=t[l]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Dp(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Dp(0==o[2].length,0==u[2].length)||Dp(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gr(this.qa,this)):this.A=na(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Lv(this,u)}},Xe.qa=function(){typeof _p<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ar(this,"timeout"),this.abort(8))},Xe.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,ar(this,"complete"),ar(this,"abort"),Bc(this))},Xe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Bc(this,!0)),Rn.X.M.call(this)},Xe.Ha=function(){this.s||(this.F||this.v||this.l?KI(this):this.fb())},Xe.fb=function(){KI(this)},Xe.aa=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},Xe.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},Xe.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Uc(e)}},Xe.Ea=function(){return this.m},Xe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Xe=Uv.prototype).ma=8,Xe.G=1,Xe.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new Wd(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=pI(u),gI(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=fu(this,o,e),on(t=zi(this.F),"RID",n),on(t,"CVER",22),this.D&&on(t,"X-HTTP-Session-Id",this.D),$c(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(QI(u)))+"&"+e:this.o&&Fv(t,this.o,u)),Nv(this.h,o),this.Ya&&on(t,"TYPE","init"),this.O?(on(t,"$req",e),on(t,"SID","null"),o.Z=!0,Cv(o,t,null)):Cv(o,t,e),this.G=2}}else 3==this.G&&(n?XI(this,n):0==this.i.length||jI(this.h)||XI(this))},Xe.Ia=function(){if(this.u=null,oT(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Pc(gr(this.eb,this),n)}},Xe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Tr(10),hu(this),oT(this))},Xe.cb=function(){null!=this.v&&(this.v=null,hu(this),Jp(this),Tr(19))},Xe.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Tr(2)):(this.j.info("Failed to ping google.com"),Tr(1))},(Xe=rE.prototype).xa=function(){},Xe.wa=function(){},Xe.va=function(){},Xe.ua=function(){},Xe.Ra=function(){},th.prototype.g=function(n,e){return new Kr(n,e)},mr(Kr,Qn),Kr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Tr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Bv(n,null,n.V),Vv(n)},Kr.prototype.close=function(){Yp(this.g)},Kr.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=hv(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Vv(e)},Kr.prototype.M=function(){this.g.l=null,delete this.j,Yp(this.g),delete this.g,Kr.X.M.call(this)},mr(iE,Iv),mr(sE,Ev),mr(gu,rE),gu.prototype.xa=function(){ar(this.g,"a")},gu.prototype.wa=function(n){ar(this.g,new iE(n))},gu.prototype.va=function(n){ar(this.g,new sE)},gu.prototype.ua=function(){ar(this.g,"b")},th.prototype.createWebChannel=th.prototype.g,Kr.prototype.send=Kr.prototype.u,Kr.prototype.open=Kr.prototype.m,Kr.prototype.close=Kr.prototype.close,Up.NO_ERROR=0,Up.TIMEOUT=8,Up.HTTP_ERROR=6,MI.COMPLETE="complete",NI.EventType=zd,zd.OPEN="a",zd.CLOSE="b",zd.ERROR="c",zd.MESSAGE="d",Qn.prototype.listen=Qn.prototype.N,Rn.prototype.listenOnce=Rn.prototype.O,Rn.prototype.getLastError=Rn.prototype.Oa,Rn.prototype.getLastErrorCode=Rn.prototype.Ea,Rn.prototype.getStatus=Rn.prototype.aa,Rn.prototype.getResponseJson=Rn.prototype.Sa,Rn.prototype.getResponseText=Rn.prototype.fa,Rn.prototype.send=Rn.prototype.da,Rn.prototype.setWithCredentials=Rn.prototype.Ka;var uT=fs.createWebChannelTransport=function(){return new th},oE=fs.getStatEventTarget=function(){return Fp()},eg=fs.ErrorCode=Up,aE=fs.EventType=MI,uE=fs.Event=ia,cE=fs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},cT=fs.FetchXmlHttpFactory=Fc,jv=fs.WebChannel=NI,lE=fs.XhrIo=Rn;const lT="@firebase/firestore";class vr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}vr.UNAUTHENTICATED=new vr(null),vr.GOOGLE_CREDENTIALS=new vr("google-credentials-uid"),vr.FIRST_PARTY=new vr("first-party-uid"),vr.MOCK_USER=new vr("mock-user");let nh="9.14.0";const mu=new os.Yd("@firebase/firestore");function dE(){return mu.logLevel}function Re(n,...e){if(mu.logLevel<=os.in.DEBUG){const t=e.map(hE);mu.debug(`Firestore (${nh}): ${n}`,...t)}}function Wn(n,...e){if(mu.logLevel<=os.in.ERROR){const t=e.map(hE);mu.error(`Firestore (${nh}): ${n}`,...t)}}function ms(n,...e){if(mu.logLevel<=os.in.WARN){const t=e.map(hE);mu.warn(`Firestore (${nh}): ${n}`,...t)}}function hE(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Qe(n="Unexpected state"){const e=`FIRESTORE (${nh}) INTERNAL ASSERTION FAILED: `+n;throw Wn(e),new Error(e)}function dt(n,e){n||Qe()}function Be(n,e){return n}const se={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ie extends st.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gn{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(vr.UNAUTHENTICATED))}shutdown(){}}class Zx{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yx{constructor(e){this.t=e,this.currentUser=vr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=D=>this.i!==o?(o=this.i,t(D)):Promise.resolve();let l=new Gn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gn,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const D=l;e.enqueueRetryable((0,G.Z)(function*(){yield D.promise,yield u(r.currentUser)}))},v=D=>{Re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=D,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(D=>v(D)),setTimeout(()=>{if(!this.auth){const D=this.t.getImmediate({optional:!0});D?v(D):(Re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gn)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(dt("string"==typeof r.accessToken),new pE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return dt(null===e||"string"==typeof e),new vr(e)}}class dT{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=vr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class hT{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new dT(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(vr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fT{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const l=u.token!==this.A;return this.A=u.token,Re("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(dt("string"==typeof t.token),this.A=t.token,new rh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qx(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class pT{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=Qx(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function Tt(n,e){return n<e?-1:n>e?1:0}function jc(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function mE(n){return n+"\0"}class bn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ie(se.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ie(se.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return bn.fromMillis(Date.now())}static fromDate(e){return bn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new bn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tt(this.nanoseconds,e.nanoseconds):Tt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class mt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new mt(e)}static min(){return new mt(new bn(0,0))}static max(){return new mt(new bn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Hc{constructor(e,t,r){void 0===t?t=0:t>e.length&&Qe(),void 0===r?r=e.length-t:r>e.length-t&&Qe(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Hc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),l=t.get(o);if(u<l)return-1;if(u>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $t extends Hc{construct(e,t,r){return new $t(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ie(se.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new $t(t)}static emptyPath(){return new $t([])}}const Jx=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Gt extends Hc{construct(e,t,r){return new Gt(e,t,r)}static isValidIdentifier(e){return Jx.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Gt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Gt(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Ie(se.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;o<e.length;){const p=e[o];if("\\"===p){if(o+1===e.length)throw new Ie(se.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Ie(se.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===p?(l=!l,o++):"."!==p||l?(r+=p,o++):(u(),o++)}if(u(),l)throw new Ie(se.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Gt(t)}static emptyPath(){return new Gt([])}}class Ve{constructor(e){this.path=e}static fromPath(e){return new Ve($t.fromString(e))}static fromName(e){return new Ve($t.fromString(e).popFirst(5))}static empty(){return new Ve($t.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$t.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $t.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ve(new $t(e.slice()))}}class zc{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function Hv(n){return n.fields.find(e=>2===e.kind)}function ur(n){return n.fields.filter(e=>2!==e.kind)}zc.UNKNOWN_ID=-1;class Wc{constructor(e,t){this.fieldPath=e,this.kind=t}}class ih{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ih(0,Zr.min())}}function tg(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=mt.fromTimestamp(1e9===r?new bn(t+1,0):new bn(t,r));return new Zr(o,Ve.empty(),e)}function zv(n){return new Zr(n.readTime,n.key,-1)}class Zr{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Zr(mt.min(),Ve.empty(),-1)}static max(){return new Zr(mt.max(),Ve.empty(),-1)}}function Wv(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ve.comparator(n.documentKey,e.documentKey),0!==t?t:Tt(n.largestBatchId,e.largestBatchId))}const Gv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qv{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function oa(n){return ng.apply(this,arguments)}function ng(){return ng=(0,G.Z)(function*(n){if(n.code!==se.FAILED_PRECONDITION||n.message!==Gv)throw n;Re("LocalStore","Unexpectedly lost primary lease")}),ng.apply(this,arguments)}class te{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Qe(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new te((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof te?t:te.resolve(t)}catch(t){return te.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):te.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):te.reject(t)}static resolve(e){return new te((t,r)=>{t(e)})}static reject(e){return new te((t,r)=>{r(e)})}static waitFor(e){return new te((t,r)=>{let o=0,u=0,l=!1;e.forEach(p=>{++o,p.next(()=>{++u,l&&u===o&&t()},v=>r(v))}),l=!0,u===o&&t()})}static or(e){let t=te.resolve(!1);for(const r of e)t=t.next(o=>o?te.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new te((r,o)=>{const u=e.length,l=new Array(u);let p=0;for(let v=0;v<u;v++){const D=v;t(e[D]).next(C=>{l[D]=C,++p,p===u&&r(l)},C=>o(C))}})}static doWhile(e,t){return new te((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Gc{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Gn,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new yu(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=Kv(r.target.error);this.P.reject(new yu(e,o))}}static open(e,t,r,o){try{return new Gc(t,e.transaction(o,r))}catch(u){throw new yu(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Re("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yT(t)}}class cr{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===cr.D((0,st.z$)())&&Wn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Re("SimpleDb","Removing database:",e),qc(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,st.hl)())return!1;if(cr.N())return!0;const e=(0,st.z$)(),t=cr.D(e),r=0<t&&t<10,o=cr.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,G.Z)(function*(){return t.db||(Re("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=l=>{r(l.target.result)},u.onblocked=()=>{o(new yu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=l=>{const p=l.target.error;o("VersionError"===p.name?new Ie(se.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new Ie(se.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new yu(e,p))},u.onupgradeneeded=l=>{Re("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,u.transaction,l.oldVersion,t.version).next(()=>{Re("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,G.Z)(function*(){const l="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.F(e);const v=Gc.open(u.db,e,l?"readonly":"readwrite",r),D=o(v).next(C=>(v.V(),C)).catch(C=>(v.abort(C),te.reject(C))).toPromise();return D.catch(()=>{}),yield v.v,D}catch(v){const D=v,C="FirebaseError"!==D.name&&p<3;if(Re("SimpleDb","Transaction failed with error:",D.message,"Retrying:",C),u.close(),!C)return Promise.reject(D)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class yE{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return qc(this.U.delete())}}class yu extends Ie{constructor(e,t){super(se.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Sr(n){return"IndexedDbTransactionError"===n.name}class yT{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Re("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Re("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),qc(r)}add(e){return Re("SimpleDb","ADD",this.store.name,e,e),qc(this.store.add(e))}get(e){return qc(this.store.get(e)).next(t=>(void 0===t&&(t=null),Re("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Re("SimpleDb","DELETE",this.store.name,e),qc(this.store.delete(e))}count(){return Re("SimpleDb","COUNT",this.store.name),qc(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(l,p)=>{u.push(p)}).next(()=>u)}{const o=this.store.getAll(r.range);return new te((u,l)=>{o.onerror=p=>{l(p.target.error)},o.onsuccess=p=>{u(p.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new te((o,u)=>{r.onerror=l=>{u(l.target.error)},r.onsuccess=l=>{o(l.target.result)}})}Y(e,t){Re("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,l,p)=>p.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new te((r,o)=>{t.onerror=u=>{const l=Kv(u.target.error);o(l)},t.onsuccess=u=>{const l=u.target.result;l?e(l.primaryKey,l.value).next(p=>{p?l.continue():r()}):r()}})}H(e,t){const r=[];return new te((o,u)=>{e.onerror=l=>{u(l.target.error)},e.onsuccess=l=>{const p=l.target.result;if(!p)return void o();const v=new yE(p),D=t(p.primaryKey,p.value,v);if(D instanceof te){const C=D.catch(S=>(v.done(),te.reject(S)));r.push(C)}v.isDone?o():null===v.G?p.continue():p.continue(v.G)}}).next(()=>te.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function qc(n){return new te((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=Kv(r.target.error);t(o)}})}let vE=!1;function Kv(n){const e=cr.D((0,st.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return vE||(vE=!0,setTimeout(()=>{throw r},0)),r}}return n}class vT{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Re("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,G.Z)(function*(){t.task=null;try{Re("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Sr(r)?Re("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield oa(r)}yield t.nt(6e4)}))}}class _T{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,G.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return te.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Re("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,o).next(p=>{o-=p,r.add(l)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const l=u.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(o,u)).next(p=>(Re("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const l=zv(u);Wv(l,r)>0&&(r=l)}),new Zr(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Fr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function wT(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function aa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function _E(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Fr.at=-1;class Cn{constructor(e,t){this.comparator=e,this.root=t||Xn.EMPTY}insert(e,t){return new Cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new Cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zv(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zv(this.root,e,this.comparator,!0)}}class Zv{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??Xn.RED,this.left=o??Xn.EMPTY,this.right=u??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new Xn(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return Xn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Qe();const e=this.left.check();if(e!==this.right.check())throw Qe();return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1,Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw Qe()}get value(){throw Qe()}get color(){throw Qe()}get left(){throw Qe()}get right(){throw Qe()}copy(n,e,t,r,o){return this}insert(n,e,t){return new Xn(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rn{constructor(e){this.comparator=e,this.data=new Cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vu(n){return n.hasNext()?n.getNext():void 0}class Yr{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new Yr([])}unionWith(e){let t=new rn(Gt.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Yr(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nn(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nn.EMPTY_BYTE_STRING=new Nn("");const rg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ho(n){if(dt(!!n),"string"==typeof n){let e=0;const t=rg.exec(n);if(dt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pn(n.seconds),nanos:Pn(n.nanos)}}function Pn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function ua(n){return"string"==typeof n?Nn.fromBase64String(n):Nn.fromUint8Array(n)}function ig(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function IE(n){const e=n.mapValue.fields.__previous_value__;return ig(e)?IE(e):e}function sh(n){const e=ho(n.mapValue.fields.__local_write_time__.timestampValue);return new bn(e.seconds,e.nanos)}class Xx{constructor(e,t,r,o,u,l,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=l,this.autoDetectLongPolling=p,this.useFetchStreams=v}}class _u{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new _u("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof _u&&e.projectId===this.projectId&&e.database===this.database}}function Kc(n){return null==n}function oh(n){return 0===n&&1/n==-1/0}function EE(n){return"number"==typeof n&&Number.isInteger(n)&&!oh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ca={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Qv={nullValue:"NULL_VALUE"};function Zc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ig(n)?4:ug(n)?9007199254740991:10:Qe()}function fo(n,e){if(n===e)return!0;const t=Zc(n);if(t!==Zc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sh(n).isEqual(sh(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=ho(r.timestampValue),l=ho(o.timestampValue);return u.seconds===l.seconds&&u.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,ua(n.bytesValue).isEqual(ua(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return Pn(r.geoPointValue.latitude)===Pn(o.geoPointValue.latitude)&&Pn(r.geoPointValue.longitude)===Pn(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return Pn(r.integerValue)===Pn(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=Pn(r.doubleValue),l=Pn(o.doubleValue);return u===l?oh(u)===oh(l):isNaN(u)&&isNaN(l)}return!1}(n,e);case 9:return jc(n.arrayValue.values||[],e.arrayValue.values||[],fo);case 10:return function(r,o){const u=r.mapValue.fields||{},l=o.mapValue.fields||{};if(wT(u)!==wT(l))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===l[p]||!fo(u[p],l[p])))return!1;return!0}(n,e);default:return Qe()}var o}function sg(n,e){return void 0!==(n.values||[]).find(t=>fo(t,e))}function wu(n,e){if(n===e)return 0;const t=Zc(n),r=Zc(e);if(t!==r)return Tt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tt(n.booleanValue,e.booleanValue);case 2:return function(o,u){const l=Pn(o.integerValue||o.doubleValue),p=Pn(u.integerValue||u.doubleValue);return l<p?-1:l>p?1:l===p?0:isNaN(l)?isNaN(p)?0:-1:1}(n,e);case 3:return DE(n.timestampValue,e.timestampValue);case 4:return DE(sh(n),sh(e));case 5:return Tt(n.stringValue,e.stringValue);case 6:return function(o,u){const l=ua(o),p=ua(u);return l.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const l=o.split("/"),p=u.split("/");for(let v=0;v<l.length&&v<p.length;v++){const D=Tt(l[v],p[v]);if(0!==D)return D}return Tt(l.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const l=Tt(Pn(o.latitude),Pn(u.latitude));return 0!==l?l:Tt(Pn(o.longitude),Pn(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const l=o.values||[],p=u.values||[];for(let v=0;v<l.length&&v<p.length;++v){const D=wu(l[v],p[v]);if(D)return D}return Tt(l.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===ca.mapValue&&u===ca.mapValue)return 0;if(o===ca.mapValue)return 1;if(u===ca.mapValue)return-1;const l=o.fields||{},p=Object.keys(l),v=u.fields||{},D=Object.keys(v);p.sort(),D.sort();for(let C=0;C<p.length&&C<D.length;++C){const S=Tt(p[C],D[C]);if(0!==S)return S;const F=wu(l[p[C]],v[D[C]]);if(0!==F)return F}return Tt(p.length,D.length)}(n.mapValue,e.mapValue);default:throw Qe()}}function DE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tt(n,e);const t=ho(n),r=ho(e),o=Tt(t.seconds,r.seconds);return 0!==o?o:Tt(t.nanos,r.nanos)}function po(n){return Jv(n)}function Jv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=ho(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?ua(n.bytesValue).toBase64():"referenceValue"in n?Ve.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const l of r.values||[])u?u=!1:o+=",",o+=Jv(l);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",l=!0;for(const p of o)l?l=!1:u+=",",u+=`${p}:${Jv(r.fields[p])}`;return u+"}"}(n.mapValue):Qe();var e}function Iu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function og(n){return!!n&&"integerValue"in n}function Wi(n){return!!n&&"arrayValue"in n}function Xv(n){return!!n&&"nullValue"in n}function ag(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Yc(n){return!!n&&"mapValue"in n}function ah(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return aa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ah(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ah(n.arrayValue.values[t]);return e}return Object.assign({},n)}function ug(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function e_(n){return"nullValue"in n?Qv:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Iu(_u.empty(),Ve.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Qe()}function cg(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Iu(_u.empty(),Ve.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ca:Qe()}function IT(n,e){const t=wu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function ET(n,e){const t=wu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ar{constructor(e){this.value=e}static empty(){return new Ar({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Yc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ah(t)}setAll(e){let t=Gt.emptyPath(),r={},o=[];e.forEach((l,p)=>{if(!t.isImmediateParentOf(p)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=p.popLast()}l?r[p.lastSegment()]=ah(l):o.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Yc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Yc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){aa(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Ar(ah(this.value))}}function DT(n){const e=[];return aa(n.fields,(t,r)=>{const o=new Gt([t]);if(Yc(r)){const u=DT(r.mapValue).fields;if(0===u.length)e.push(o);else for(const l of u)e.push(o.child(l))}else e.push(o)}),new Yr(e)}class ln{constructor(e,t,r,o,u,l){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.data=u,this.documentState=l}static newInvalidDocument(e){return new ln(e,0,mt.min(),mt.min(),Ar.empty(),0)}static newFoundDocument(e,t,r){return new ln(e,1,t,mt.min(),r,0)}static newNoDocument(e,t){return new ln(e,2,t,mt.min(),Ar.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,mt.min(),Ar.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ar.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ar.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=mt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class bT{constructor(e,t=null,r=[],o=[],u=null,l=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=l,this.endAt=p,this.ht=null}}function bE(n,e=null,t=[],r=[],o=null,u=null,l=null){return new bT(n,e,t,r,o,u,l)}function Eu(n){const e=Be(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(o=r).field.canonicalString()+o.op.toString()+po(o.value);var o}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),Kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>po(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>po(r)).join(",")),e.ht=t}return e.ht}function Qc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let o=0;o<n.orderBy.length;o++)if(!AT(n.orderBy[o],e.orderBy[o]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let o=0;o<n.filters.length;o++)if((t=n.filters[o]).op!==(r=e.filters[o]).op||!t.field.isEqual(r.field)||!fo(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MT(n.startAt,e.startAt)&&MT(n.endAt,e.endAt)}function uh(n){return Ve.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ch(n,e){return n.filters.filter(t=>t instanceof lr&&t.field.isEqual(e))}function CE(n,e,t){let r=Qv,o=!0;for(const u of ch(n,e)){let l=Qv,p=!0;switch(u.op){case"<":case"<=":l=e_(u.value);break;case"==":case"in":case">=":l=u.value;break;case">":l=u.value,p=!1;break;case"!=":case"not-in":l=Qv}IT({value:r,inclusive:o},{value:l,inclusive:p})<0&&(r=l,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];IT({value:r,inclusive:o},{value:l,inclusive:t.inclusive})<0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}function TE(n,e,t){let r=ca,o=!0;for(const u of ch(n,e)){let l=ca,p=!0;switch(u.op){case">=":case">":l=cg(u.value),p=!1;break;case"==":case"in":case"<=":l=u.value;break;case"<":l=u.value,p=!1;break;case"!=":case"not-in":l=ca}ET({value:r,inclusive:o},{value:l,inclusive:p})>0&&(r=l,o=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const l=t.position[u];ET({value:r,inclusive:o},{value:l,inclusive:t.inclusive})>0&&(r=l,o=t.inclusive);break}return{value:r,inclusive:o}}class lr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new t_(e,t,r):"array-contains"===t?new TT(e,r):"in"===t?new ST(e,r):"not-in"===t?new tM(e,r):"array-contains-any"===t?new nM(e,r):new lr(e,t,r)}static lt(e,t,r){return"in"===t?new eM(e,r):new SE(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(wu(t,this.value)):null!==t&&Zc(this.value)===Zc(t)&&this.ft(wu(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Qe()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class t_ extends lr{constructor(e,t,r){super(e,t,r),this.key=Ve.fromName(r.referenceValue)}matches(e){const t=Ve.comparator(e.key,this.key);return this.ft(t)}}class eM extends lr{constructor(e,t){super(e,"in",t),this.keys=lg(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class SE extends lr{constructor(e,t){super(e,"not-in",t),this.keys=lg(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function lg(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ve.fromName(r.referenceValue))}class TT extends lr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wi(t)&&sg(t.arrayValue,this.value)}}class ST extends lr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&sg(this.value.arrayValue,t)}}class tM extends lr{constructor(e,t){super(e,"not-in",t)}matches(e){if(sg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!sg(this.value.arrayValue,t)}}class nM extends lr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wi(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>sg(this.value.arrayValue,r))}}class la{constructor(e,t){this.position=e,this.inclusive=t}}class Jc{constructor(e,t="asc"){this.field=e,this.dir=t}}function AT(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xT(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],l=n.position[o];if(r=u.field.isKeyField()?Ve.comparator(Ve.fromName(l.referenceValue),t.key):wu(l,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function MT(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!fo(n.position[t],e.position[t]))return!1;return!0}class da{constructor(e,t=null,r=[],o=[],u=null,l="F",p=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=l,this.startAt=p,this.endAt=v,this._t=null,this.wt=null}}function RT(n,e,t,r,o,u,l,p){return new da(n,e,t,r,o,u,l,p)}function lh(n){return new da(n)}function AE(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ME(n){for(const e of n.filters)if(e.dt())return e.field;return null}function RE(n){return null!==n.collectionGroup}function dh(n){const e=Be(n);if(null===e._t){e._t=[];const t=ME(e),r=xE(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new Jc(t)),e._t.push(new Jc(Gt.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e._t.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Jc(Gt.keyField(),u))}}}return e._t}function Qr(n){const e=Be(n);if(!e.wt)if("F"===e.limitType)e.wt=bE(e.path,e.collectionGroup,dh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of dh(e))t.push(new Jc(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new la(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new la(e.startAt.position,e.startAt.inclusive):null;e.wt=bE(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e.wt}function n_(n,e,t){return new da(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function i(n,e){return Qc(Qr(n),Qr(e))&&n.limitType===e.limitType}function s(n){return`${Eu(Qr(n))}|lt:${n.limitType}`}function a(n){return`Query(target=${function CT(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${po(r.value)}`;var r}).join(", ")}]`),Kc(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>po(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>po(t)).join(",")),`Target(${e})`}(Qr(n))}; limitType=${n.limitType})`}function c(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):Ve.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of t.explicitOrderBy)if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,l){const p=xT(o,u,l);return o.inclusive?p<=0:p<0}(t.startAt,dh(t),r)||t.endAt&&!function(o,u,l){const p=xT(o,u,l);return o.inclusive?p>=0:p>0}(t.endAt,dh(t),r)));var t,r}function d(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function h(n){return(e,t)=>{let r=!1;for(const o of dh(n)){const u=m(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function m(n,e,t){const r=n.field.isKeyField()?Ve.comparator(e.key,t.key):function(o,u,l){const p=u.data.field(o),v=l.data.field(o);return null!==p&&null!==v?wu(p,v):Qe()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Qe()}}function w(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oh(e)?"-0":e}}function E(n){return{integerValue:""+n}}function b(n,e){return EE(e)?E(e):w(n,e)}class A{constructor(){this._=void 0}}function R(n,e,t){return n instanceof ae?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof Se?Ue(n,e):n instanceof Ge?ct(n,e):function(r,o){const u=Y(r,o),l=ft(u)+ft(r.yt);return og(u)&&og(r.yt)?E(l):w(r.It,l)}(n,e)}function B(n,e,t){return n instanceof Se?Ue(n,e):n instanceof Ge?ct(n,e):t}function Y(n,e){return n instanceof ge?og(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ae extends A{}class Se extends A{constructor(e){super(),this.elements=e}}function Ue(n,e){const t=qt(e);for(const r of n.elements)t.some(o=>fo(o,r))||t.push(r);return{arrayValue:{values:t}}}class Ge extends A{constructor(e){super(),this.elements=e}}function ct(n,e){let t=qt(e);for(const r of n.elements)t=t.filter(o=>!fo(o,r));return{arrayValue:{values:t}}}class ge extends A{constructor(e,t){super(),this.It=e,this.yt=t}}function ft(n){return Pn(n.integerValue||n.doubleValue)}function qt(n){return Wi(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class an{constructor(e,t){this.field=e,this.transform=t}}class r_{constructor(e,t){this.version=e,this.transformResults=t}}class gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gn}static exists(e){return new gn(void 0,e)}static updateTime(e){return new gn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xc(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class el{}function dg(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new pg(n.key,gn.none()):new fg(n.key,n.data,gn.none());{const t=n.data,r=Ar.empty();let o=new rn(Gt.comparator);for(let u of e.fields)if(!o.has(u)){let l=t.field(u);null===l&&u.length>1&&(u=u.popLast(),l=t.field(u)),null===l?r.delete(u):r.set(u,l),o=o.add(u)}return new Cu(n.key,r,new Yr(o.toArray()),gn.none())}}function i_(n,e,t){n instanceof fg?function(r,o,u){const l=r.value.clone(),p=iM(r.fieldTransforms,o,u.transformResults);l.setAll(p),o.convertToFoundDocument(u.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cu?function(r,o,u){if(!Xc(r.precondition,o))return void o.convertToUnknownDocument(u.version);const l=iM(r.fieldTransforms,o,u.transformResults),p=o.data;p.setAll(rM(r)),p.setAll(l),o.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function bu(n,e,t,r){return n instanceof fg?function(o,u,l,p){if(!Xc(o.precondition,u))return l;const v=o.value.clone(),D=sM(o.fieldTransforms,p,u);return v.setAll(D),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Cu?function(o,u,l,p){if(!Xc(o.precondition,u))return l;const v=sM(o.fieldTransforms,p,u),D=u.data;return D.setAll(rM(o)),D.setAll(v),u.convertToFoundDocument(u.version,D).setHasLocalMutations(),null===l?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(C=>C.field))}(n,e,t,r):(l=t,Xc(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):l);var u,l}function s_(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=Y(r.transform,o||null);null!=u&&(null===t&&(t=Ar.empty()),t.set(r.field,u))}return t||null}function hg(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&jc(t,r,(o,u)=>function Du(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Se&&r instanceof Se||t instanceof Ge&&r instanceof Ge?jc(t.elements,r.elements,fo):t instanceof ge&&r instanceof ge?fo(t.yt,r.yt):t instanceof ae&&r instanceof ae);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class fg extends el{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Cu extends el{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function rM(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function iM(n,e,t){const r=new Map;dt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],l=u.transform,p=e.data.field(u.field);r.set(u.field,B(l,p,t[o]))}return r}function sM(n,e,t){const r=new Map;for(const o of n){const u=o.transform,l=t.data.field(o.field);r.set(o.field,R(u,l,e))}return r}class pg extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NT extends el{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class wP{constructor(e){this.count=e}}var dr,Kt;function oM(n){switch(n){default:return Qe();case se.CANCELLED:case se.UNKNOWN:case se.DEADLINE_EXCEEDED:case se.RESOURCE_EXHAUSTED:case se.INTERNAL:case se.UNAVAILABLE:case se.UNAUTHENTICATED:return!1;case se.INVALID_ARGUMENT:case se.NOT_FOUND:case se.ALREADY_EXISTS:case se.PERMISSION_DENIED:case se.FAILED_PRECONDITION:case se.ABORTED:case se.OUT_OF_RANGE:case se.UNIMPLEMENTED:case se.DATA_LOSS:return!0}}function aM(n){if(void 0===n)return Wn("GRPC error has no .code"),se.UNKNOWN;switch(n){case dr.OK:return se.OK;case dr.CANCELLED:return se.CANCELLED;case dr.UNKNOWN:return se.UNKNOWN;case dr.DEADLINE_EXCEEDED:return se.DEADLINE_EXCEEDED;case dr.RESOURCE_EXHAUSTED:return se.RESOURCE_EXHAUSTED;case dr.INTERNAL:return se.INTERNAL;case dr.UNAVAILABLE:return se.UNAVAILABLE;case dr.UNAUTHENTICATED:return se.UNAUTHENTICATED;case dr.INVALID_ARGUMENT:return se.INVALID_ARGUMENT;case dr.NOT_FOUND:return se.NOT_FOUND;case dr.ALREADY_EXISTS:return se.ALREADY_EXISTS;case dr.PERMISSION_DENIED:return se.PERMISSION_DENIED;case dr.FAILED_PRECONDITION:return se.FAILED_PRECONDITION;case dr.ABORTED:return se.ABORTED;case dr.OUT_OF_RANGE:return se.OUT_OF_RANGE;case dr.UNIMPLEMENTED:return se.UNIMPLEMENTED;case dr.DATA_LOSS:return se.DATA_LOSS;default:return Qe()}}(Kt=dr||(dr={}))[Kt.OK=0]="OK",Kt[Kt.CANCELLED=1]="CANCELLED",Kt[Kt.UNKNOWN=2]="UNKNOWN",Kt[Kt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kt[Kt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kt[Kt.NOT_FOUND=5]="NOT_FOUND",Kt[Kt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kt[Kt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kt[Kt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kt[Kt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kt[Kt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kt[Kt.ABORTED=10]="ABORTED",Kt[Kt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kt[Kt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kt[Kt.INTERNAL=13]="INTERNAL",Kt[Kt.UNAVAILABLE=14]="UNAVAILABLE",Kt[Kt.DATA_LOSS=15]="DATA_LOSS";class tl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){aa(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return _E(this.inner)}size(){return this.innerSize}}const IP=new Cn(Ve.comparator);function Ti(){return IP}const uM=new Cn(Ve.comparator);function o_(...n){let e=uM;for(const t of n)e=e.insert(t.key,t);return e}function cM(n){let e=uM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ha(){return a_()}function lM(){return a_()}function a_(){return new tl(n=>n.toString(),(n,e)=>n.isEqual(e))}const EP=new Cn(Ve.comparator),DP=new rn(Ve.comparator);function Lt(...n){let e=DP;for(const t of n)e=e.add(t);return e}const bP=new rn(Tt);function NE(){return bP}class u_{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,c_.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new u_(mt.min(),o,NE(),Ti(),Lt())}}class c_{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new c_(r,t,Lt(),Lt(),Lt())}}class PE{constructor(e,t,r,o){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=o}}class dM{constructor(e,t){this.targetId=e,this.At=t}}class hM{constructor(e,t,r=Nn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class fM{constructor(){this.Rt=0,this.bt=gM(),this.Pt=Nn.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Lt(),t=Lt(),r=Lt();return this.bt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:Qe()}}),new c_(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=gM()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class CP{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Ti(),this.qt=pM(),this.Kt=new rn(Tt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:Qe()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,o)=>{this.Ht(o)&&t(o)})}Yt(e){const t=e.targetId,r=e.At.count,o=this.Xt(t);if(o){const u=o.target;if(uh(u))if(0===r){const l=new Ve(u.path);this.jt(t,l,ln.newNoDocument(l,mt.min()))}else dt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((u,l)=>{const p=this.Xt(l);if(p){if(u.current&&uh(p.target)){const v=new Ve(p.target.path);null!==this.Ut.get(v)||this.ee(l,v)||this.jt(l,v,ln.newNoDocument(v,e))}u.Dt&&(t.set(l,u.xt()),u.Nt())}});let r=Lt();this.qt.forEach((u,l)=>{let p=!0;l.forEachWhile(v=>{const D=this.Xt(v);return!D||2===D.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.Ut.forEach((u,l)=>l.setReadTime(e));const o=new u_(e,t,this.Kt,this.Ut,r);return this.Ut=Ti(),this.qt=pM(),this.Kt=new rn(Tt),o}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const o=this.zt(e);this.ee(e,t)?o.kt(t,1):o.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new fM,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new rn(Tt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Re("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new fM),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function pM(){return new Cn(Ve.comparator)}function gM(){return new Cn(Ve.comparator)}const TP={asc:"ASCENDING",desc:"DESCENDING"},SP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class AP{constructor(e,t){this.databaseId=e,this.gt=t}}function l_(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function mM(n,e){return n.gt?e.toBase64():e.toUint8Array()}function xP(n,e){return l_(n,e.toTimestamp())}function xr(n){return dt(!!n),mt.fromTimestamp(function(e){const t=ho(e);return new bn(t.seconds,t.nanos)}(n))}function PT(n,e){return(t=n,new $t(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function yM(n){const e=$t.fromString(n);return dt(CM(e)),e}function d_(n,e){return PT(n.databaseId,e.path)}function fa(n,e){const t=yM(e);if(t.get(1)!==n.databaseId.projectId)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ie(se.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ve(_M(t))}function kT(n,e){return PT(n.databaseId,e)}function vM(n){const e=yM(n);return 4===e.length?$t.emptyPath():_M(e)}function h_(n){return new $t(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function _M(n){return dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function wM(n,e,t){return{name:d_(n,e),fields:t.value.mapValue.fields}}function IM(n,e,t){const r=fa(n,e.name),o=xr(e.updateTime),u=new Ar({mapValue:{fields:e.fields}}),l=ln.newFoundDocument(r,o,u);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function f_(n,e){let t;if(e instanceof fg)t={update:wM(n,e.key,e.value)};else if(e instanceof pg)t={delete:d_(n,e.key)};else if(e instanceof Cu)t={update:wM(n,e.key,e.data),updateMask:UP(e.fieldMask)};else{if(!(e instanceof NT))return Qe();t={verify:d_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const l=u.transform;if(l instanceof ae)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Se)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ge)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof ge)return{fieldPath:u.field.canonicalString(),increment:l.yt};throw Qe()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:xP(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:Qe()),t;var o}function OT(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?gn.updateTime(xr(o.updateTime)):void 0!==o.exists?gn.exists(o.exists):gn.none():gn.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,l){let p=null;"setToServerValue"in l?(dt("REQUEST_TIME"===l.setToServerValue),p=new ae):"appendMissingElements"in l?p=new Se(l.appendMissingElements.values||[]):"removeAllFromArray"in l?p=new Ge(l.removeAllFromArray.values||[]):"increment"in l?p=new ge(u,l.increment):Qe();const v=Gt.fromServerFormat(l.fieldPath);return new an(v,p)}(n,o)):[];var o;if(e.update){const o=fa(n,e.update.name),u=new Ar({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Yr((e.updateMask.fieldPaths||[]).map(D=>Gt.fromServerFormat(D)));return new Cu(o,u,l,t,r)}return new fg(o,u,t,r)}if(e.delete){const o=fa(n,e.delete);return new pg(o,t)}if(e.verify){const o=fa(n,e.verify);return new NT(o,t)}return Qe()}function EM(n,e){return{documents:[kT(n,e.path)]}}function LT(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=kT(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=kT(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0===v.length)return;const D=v.map(C=>function(S){if("=="===S.op){if(ag(S.value))return{unaryFilter:{field:gg(S.field),op:"IS_NAN"}};if(Xv(S.value))return{unaryFilter:{field:gg(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(ag(S.value))return{unaryFilter:{field:gg(S.field),op:"IS_NOT_NAN"}};if(Xv(S.value))return{unaryFilter:{field:gg(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gg(S.field),op:OP(S.op),value:S.value}}}(C));return 1===D.length?D[0]:{compositeFilter:{op:"AND",filters:D}}}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(D=>{return{field:gg((C=D).field),direction:kP(C.dir)};var C})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const l=(D=e.limit,n.gt||Kc(D)?D:{value:D});var D,p,v;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function DM(n){let e=vM(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){dt(1===r);const C=t.from[0];C.allDescendants?o=C.collectionId:e=e.child(C.collectionId)}let u=[];t.where&&(u=bM(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(C=>{return new Jc(mg((S=C).field),function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let p=null;t.limit&&(p=function(C){let S;return S="object"==typeof C?C.value:C,Kc(S)?null:S}(t.limit));let v=null;var C;t.startAt&&(v=new la((C=t.startAt).values||[],!!C.before));let D=null;return t.endAt&&(D=function(C){return new la(C.values||[],!C.before)}(t.endAt)),RT(e,o,l,u,p,"F",v,D)}function bM(n){return n?void 0!==n.unaryFilter?[FP(n)]:void 0!==n.fieldFilter?[LP(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>bM(e)).reduce((e,t)=>e.concat(t)):Qe():[]}function kP(n){return TP[n]}function OP(n){return SP[n]}function gg(n){return{fieldPath:n.canonicalString()}}function mg(n){return Gt.fromServerFormat(n.fieldPath)}function LP(n){return lr.create(mg(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Qe()}}(n.fieldFilter.op),n.fieldFilter.value)}function FP(n){switch(n.unaryFilter.op){case"IS_NAN":const e=mg(n.unaryFilter.field);return lr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=mg(n.unaryFilter.field);return lr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mg(n.unaryFilter.field);return lr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=mg(n.unaryFilter.field);return lr.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Qe()}}function UP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function CM(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ci(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=TM(e)),e=VP(n.get(t),e);return TM(e)}function VP(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function TM(n){return n+"\x01\x01"}function pa(n){const e=n.length;if(dt(e>=2),2===e)return dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),$t.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const l=n.indexOf("\x01",u);switch((l<0||l>t)&&Qe(),n.charAt(l+1)){case"\x01":const p=n.substring(u,l);let v;0===o.length?v=p:(o+=p,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,l),o+="\0";break;case"\x11":o+=n.substring(u,l+1);break;default:Qe()}u=l+2}return new $t(r)}const SM=["userId","batchId"];function kE(n,e){return[n,ci(e)]}function AM(n,e,t){return[n,ci(e),t]}const BP={},$P=["prefixPath","collectionGroup","readTime","documentId"],jP=["prefixPath","collectionGroup","documentId"],HP=["collectionGroup","readTime","prefixPath","documentId"],zP=["canonicalId","targetId"],WP=["targetId","path"],GP=["path","targetId"],qP=["collectionId","parent"],KP=["indexId","uid"],ZP=["uid","sequenceNumber"],YP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],QP=["indexId","uid","orderedDocumentKey"],JP=["userId","collectionPath","documentId"],XP=["userId","collectionPath","largestBatchId"],e1=["userId","collectionGroup","largestBatchId"],xM=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],t1=[...xM,"documentOverlays"],MM=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],RM=MM,n1=[...RM,"indexConfiguration","indexState","indexEntries"];class FT extends qv{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Mr(n,e){const t=Be(n);return cr.M(t.ie,e)}class UT{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&i_(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=bu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=bu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=lM();return this.mutations.forEach(o=>{const u=e.get(o.key),l=u.overlayedDocument;let p=this.applyToLocalView(l,u.mutatedFields);p=t.has(o.key)?null:p;const v=dg(l,p);null!==v&&r.set(o.key,v),l.isValidDocument()||l.convertToNoDocument(mt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Lt())}isEqual(e){return this.batchId===e.batchId&&jc(this.mutations,e.mutations,(t,r)=>hg(t,r))&&jc(this.baseMutations,e.baseMutations,(t,r)=>hg(t,r))}}class VT{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){dt(e.mutations.length===r.length);let o=EP;const u=e.mutations;for(let l=0;l<u.length;l++)o=o.insert(u[l].key,r[l].version);return new VT(e,t,r,o)}}class BT{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class nl{constructor(e,t,r,o,u=mt.min(),l=mt.min(),p=Nn.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=p}withSequenceNumber(e){return new nl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new nl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class NM{constructor(e){this.re=e}}function PM(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:OE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:d_(o=n.re,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:l_(o,u.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:hh(e.version)};else{if(!e.isUnknownDocument())return Qe();r.unknownDocument={path:t.path.toArray(),version:hh(e.version)}}var o,u;return r}function OE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function hh(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function fh(n){const e=new bn(n.seconds,n.nanoseconds);return mt.fromTimestamp(e)}function ph(n,e){const t=(e.baseMutations||[]).map(u=>OT(n.re,u));for(let u=0;u<e.mutations.length-1;++u){const l=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(l.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>OT(n.re,u)),o=bn.fromMillis(e.localWriteTimeMs);return new UT(e.batchId,o,t,r)}function p_(n){const e=fh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?fh(n.lastLimboFreeSnapshotVersion):mt.min();let r;var o;return void 0!==n.query.documents?(dt(1===(o=n.query).documents.length),r=Qr(lh(vM(o.documents[0])))):r=Qr(DM(n.query)),new nl(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nn.fromBase64String(n.resumeToken))}function kM(n,e){const t=hh(e.snapshotVersion),r=hh(e.lastLimboFreeSnapshotVersion);let o;o=uh(e.target)?EM(n.re,e.target):LT(n.re,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Eu(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function $T(n){const e=DM({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?n_(e,e.limit,"L"):e}function jT(n,e){return new BT(e.largestBatchId,OT(n.re,e.overlayMutation))}function OM(n,e){const t=e.path.lastSegment();return[n,ci(e.path.popLast()),t]}function LM(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:hh(r.readTime),documentKey:ci(r.documentKey.path),largestBatchId:r.largestBatchId}}class i1{getBundleMetadata(e,t){return FM(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:fh(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return FM(e).put({bundleId:(r=t).id,createTime:hh(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return UM(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:$T(o.bundledQuery),readTime:fh(o.readTime)};var o})}saveNamedQuery(e,t){return UM(e).put({name:(r=t).name,readTime:hh(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function FM(n){return Mr(n,"bundles")}function UM(n){return Mr(n,"namedQueries")}class LE{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new LE(e,t.uid||"")}getOverlay(e,t){return g_(e).get(OM(this.userId,t)).next(r=>r?jT(this.It,r):null)}getOverlays(e,t){const r=ha();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,l)=>{const p=new BT(t,l);o.push(this.ue(e,p))}),te.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(l=>o.add(ci(l.getCollectionPath())));const u=[];return o.forEach(l=>{const p=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);u.push(g_(e).Y("collectionPathOverlayIndex",p))}),te.waitFor(u)}getOverlaysForCollection(e,t,r){const o=ha(),u=ci(t),l=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return g_(e).W("collectionPathOverlayIndex",l).next(p=>{for(const v of p){const D=jT(this.It,v);o.set(D.getKey(),D)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=ha();let l;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return g_(e).Z({index:"collectionGroupOverlayIndex",range:p},(v,D,C)=>{const S=jT(this.It,D);u.size()<o||S.largestBatchId===l?(u.set(S.getKey(),S),l=S.largestBatchId):C.done()}).next(()=>u)}ue(e,t){return g_(e).put(function(r,o,u){const[l,p,v]=OM(o,u.mutation.key);return{userId:o,collectionPath:p,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:f_(r.re,u.mutation)}}(this.It,this.userId,t))}}function g_(n){return Mr(n,"documentOverlays")}class gh{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Pn(e.integerValue));else if("doubleValue"in e){const r=Pn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),oh(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ua(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?ug(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):Qe()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const o of Object.keys(r))this._e(o,t),this.ae(r[o],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const o of r)this.ae(o,t)}ge(e,t){this.le(t,37),Ve.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function s1(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function VM(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=s1(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}gh.Te=new gh;class o1{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const o=t.codePointAt(0);this.Ae(240|o>>>18),this.Ae(128|63&o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const o=t.codePointAt(0);this.Pe(240|o>>>18),this.Pe(128|63&o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o)}}this.ve()}De(e){const t=this.Ce(e),r=VM(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}Ne(e){const t=this.Ce(e),r=VM(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class a1{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class u1{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class m_{constructor(){this.Be=new o1,this.Le=new a1(this.Be),this.Ue=new u1(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class mh{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new mh(this.indexId,this.documentKey,this.arrayValue,r)}}function yh(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=BM(n.arrayValue,e.arrayValue),0!==t?t:(t=BM(n.directionalValue,e.directionalValue),0!==t?t:Ve.comparator(n.documentKey,e.documentKey)))}function BM(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class c1{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Hv(e);if(void 0!==t&&!this.ze(t))return!1;const r=ur(e);let o=0,u=0;for(;o<r.length&&this.ze(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.je){const l=r[o];if(!this.He(this.je,l)||!this.Je(this.Ge[u++],l))return!1;++o}for(;o<r.length;++o){const l=r[o];if(u>=this.Ge.length||!this.Je(this.Ge[u++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class l1{constructor(){this.Ye=new HT}addToCollectionParentIndex(e,t){return this.Ye.add(t),te.resolve()}getCollectionParents(e,t){return te.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return te.resolve()}deleteFieldIndex(e,t){return te.resolve()}getDocumentsMatchingTarget(e,t){return te.resolve(null)}getIndexType(e,t){return te.resolve(0)}getFieldIndexes(e,t){return te.resolve([])}getNextCollectionGroupToUpdate(e){return te.resolve(null)}getMinOffset(e,t){return te.resolve(Zr.min())}getMinOffsetFromCollectionGroup(e,t){return te.resolve(Zr.min())}updateCollectionGroup(e,t,r){return te.resolve()}updateIndexEntries(e,t){return te.resolve()}}class HT{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new rn($t.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new rn($t.comparator)).toArray()}}const FE=new Uint8Array(0);class d1{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new HT,this.Ze=new tl(r=>Eu(r),(r,o)=>Qc(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const u={collectionId:r,parent:ci(o)};return $M(e).put(u)}return te.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[mE(t),""],!1,!0);return $M(e).W(o).next(u=>{for(const l of u){if(l.collectionId!==t)break;r.push(pa(l.parent))}return r})}addFieldIndex(e,t){const r=UE(e),o={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var l;delete o.indexId;const u=r.add(o);if(t.indexState){const l=v_(e);return u.next(p=>{l.put(LM(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=UE(e),o=v_(e),u=y_(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=y_(e);let o=!0;const u=new Map;return te.forEach(this.tn(t),l=>this.en(e,l).next(p=>{o&&(o=!!p),u.set(l,p)})).next(()=>{if(o){let l=Lt();const p=[];return te.forEach(u,(v,D)=>{var C;Re("IndexedDbIndexManager",`Using index ${C=v,`id=${C.indexId}|cg=${C.collectionGroup}|f=${C.fields.map(_t=>`${_t.fieldPath}:${_t.kind}`).join(",")}`} to execute ${Eu(t)}`);const S=function(_t,pt){const gt=Hv(pt);if(void 0===gt)return null;for(const Pt of ch(_t,gt.fieldPath))switch(Pt.op){case"array-contains-any":return Pt.value.arrayValue.values||[];case"array-contains":return[Pt.value]}return null}(D,v),F=function(_t,pt){const gt=new Map;for(const Pt of ur(pt))for(const _r of ch(_t,Pt.fieldPath))switch(_r.op){case"==":case"in":gt.set(Pt.fieldPath.canonicalString(),_r.value);break;case"not-in":case"!=":return gt.set(Pt.fieldPath.canonicalString(),_r.value),Array.from(gt.values())}return null}(D,v),z=function(_t,pt){const gt=[];let Pt=!0;for(const _r of ur(pt)){const L_=0===_r.kind?CE(_t,_r.fieldPath,_t.startAt):TE(_t,_r.fieldPath,_t.startAt);gt.push(L_.value),Pt&&(Pt=L_.inclusive)}return new la(gt,Pt)}(D,v),ne=function(_t,pt){const gt=[];let Pt=!0;for(const _r of ur(pt)){const L_=0===_r.kind?TE(_t,_r.fieldPath,_t.endAt):CE(_t,_r.fieldPath,_t.endAt);gt.push(L_.value),Pt&&(Pt=L_.inclusive)}return new la(gt,Pt)}(D,v),be=this.nn(v,D,z),Ee=this.nn(v,D,ne),vt=this.sn(v,D,F),It=this.rn(v.indexId,S,be,z.inclusive,Ee,ne.inclusive,vt);return te.forEach(It,_t=>r.J(_t,t.limit).next(pt=>{pt.forEach(gt=>{const Pt=Ve.fromSegments(gt.documentKey);l.has(Pt)||(l=l.add(Pt),p.push(Pt))})}))}).next(()=>p)}return te.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,o,u,l,p){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),D=v/(null!=t?t.length:1),C=[];for(let S=0;S<v;++S){const F=t?this.on(t[S/D]):FE,z=this.un(e,F,r[S%D],o),ne=this.cn(e,F,u[S%D],l),be=p.map(Ee=>this.un(e,F,Ee,!0));C.push(...this.createRange(z,ne,be))}return C}un(e,t,r,o){const u=new mh(e,Ve.empty(),t,r);return o?u:u.Ke()}cn(e,t,r,o){const u=new mh(e,Ve.empty(),t,r);return o?u.Ke():u}en(e,t){const r=new c1(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let l=null;for(const p of u)r.We(p)&&(!l||p.fields.length>l.fields.length)&&(l=p);return l})}getIndexType(e,t){let r=2;return te.forEach(this.tn(t),o=>this.en(e,o).next(u=>{u?0!==r&&u.fields.length<function(l){let p=new rn(Gt.comparator),v=!1;for(const D of l.filters){const C=D;C.field.isKeyField()||("array-contains"===C.op||"array-contains-any"===C.op?v=!0:p=p.add(C.field))}for(const D of l.orderBy)D.field.isKeyField()||(p=p.add(D.field));return p.size+(v?1:0)}(o)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new m_;for(const o of ur(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const l=r.qe(o.kind);gh.Te.ce(u,l)}return r.$e()}on(e){const t=new m_;return gh.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new m_;return gh.Te.ce(Iu(this.databaseId,t),r.qe(function(o){const u=ur(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let o=[];o.push(new m_);let u=0;for(const l of ur(e)){const p=r[u++];for(const v of o)if(this.ln(t,l.fieldPath)&&Wi(p))o=this.fn(o,l,p);else{const D=v.qe(l.kind);gh.Te.ce(p,D)}}return this.dn(o)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const o=[...e],u=[];for(const l of r.arrayValue.values||[])for(const p of o){const v=new m_;v.seed(p.$e()),gh.Te.ce(l,v.qe(t.kind)),u.push(v)}return u}ln(e,t){return!!e.filters.find(r=>r instanceof lr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=UE(e),o=v_(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const l=[];return te.forEach(u,p=>o.get([p.indexId,this.uid]).next(v=>{l.push(function(D,C){const S=C?new ih(C.sequenceNumber,new Zr(fh(C.readTime),new Ve(pa(C.documentKey)),C.largestBatchId)):ih.empty(),F=D.fields.map(([z,ne])=>new Wc(Gt.fromServerFormat(z),ne));return new zc(D.indexId,D.collectionGroup,F,S)}(p,v))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:Tt(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=UE(e),u=v_(e);return this._n(e).next(l=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>te.forEach(p,v=>u.put(LM(v.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return te.forEach(t,(o,u)=>{const l=r.get(o.collectionGroup);return(l?te.resolve(l):this.getFieldIndexes(e,o.collectionGroup)).next(p=>(r.set(o.collectionGroup,p),te.forEach(p,v=>this.wn(e,o,v).next(D=>{const C=this.mn(u,v);return D.isEqual(C)?te.resolve():this.gn(e,u,v,D,C)}))))})}yn(e,t,r,o){return y_(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,o){return y_(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const o=y_(e);let u=new rn(yh);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,p)=>{u=u.add(new mh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}mn(e,t){let r=new rn(yh);const o=this.an(t,e);if(null==o)return r;const u=Hv(t);if(null!=u){const l=e.data.field(u.fieldPath);if(Wi(l))for(const p of l.arrayValue.values||[])r=r.add(new mh(t.indexId,e.key,this.on(p),o))}else r=r.add(new mh(t.indexId,e.key,FE,o));return r}gn(e,t,r,o,u){Re("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(p,v,D,C,S){const F=p.getIterator(),z=v.getIterator();let ne=vu(F),be=vu(z);for(;ne||be;){let Ee=!1,vt=!1;if(ne&&be){const It=D(ne,be);It<0?vt=!0:It>0&&(Ee=!0)}else null!=ne?vt=!0:Ee=!0;Ee?(C(be),be=vu(z)):vt?(S(ne),ne=vu(F)):(ne=vu(F),be=vu(z))}}(o,u,yh,p=>{l.push(this.yn(e,t,r,p))},p=>{l.push(this.pn(e,t,r,p))}),te.waitFor(l)}_n(e){let t=1;return v_(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,p)=>yh(l,p)).filter((l,p,v)=>!p||0!==yh(l,v[p-1]));const o=[];o.push(e);for(const l of r){const p=yh(l,e),v=yh(l,t);if(0===p)o[0]=e.Ke();else if(p>0&&v<0)o.push(l),o.push(l.Ke());else if(v>0)break}o.push(t);const u=[];for(let l=0;l<o.length;l+=2)u.push(IDBKeyRange.bound([o[l].indexId,this.uid,o[l].arrayValue,o[l].directionalValue,FE,[]],[o[l+1].indexId,this.uid,o[l+1].arrayValue,o[l+1].directionalValue,FE,[]]));return u}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(jM)}getMinOffset(e,t){return te.mapArray(this.tn(t),r=>this.en(e,r).next(o=>o||Qe())).next(jM)}}function $M(n){return Mr(n,"collectionParents")}function y_(n){return Mr(n,"indexEntries")}function UE(n){return Mr(n,"indexConfiguration")}function v_(n){return Mr(n,"indexState")}function jM(n){dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;Wv(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new Zr(e.readTime,e.documentKey,t)}const HM={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Si{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Si(e,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function zM(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],l=IDBKeyRange.only(t.batchId);let p=0;const v=r.Z({range:l},(C,S,F)=>(p++,F.delete()));u.push(v.next(()=>{dt(1===p)}));const D=[];for(const C of t.mutations){const S=AM(e,C.key.path,t.batchId);u.push(o.delete(S)),D.push(C.key)}return te.waitFor(u).next(()=>D)}function VE(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Qe();e=n.noDocument}return JSON.stringify(e).length}Si.DEFAULT_COLLECTION_PERCENTILE=10,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Si.DEFAULT=new Si(41943040,Si.DEFAULT_COLLECTION_PERCENTILE,Si.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Si.DISABLED=new Si(-1,0,0);class BE{constructor(e,t,r,o){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static oe(e,t,r,o){dt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new BE(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).Z({index:"userMutationsIndex",range:r},(o,u,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=yg(e),l=rl(e);return l.add({}).next(p=>{dt("number"==typeof p);const v=new UT(p,t,r,o),D=function(F,z,ne){const be=ne.baseMutations.map(vt=>f_(F.re,vt)),Ee=ne.mutations.map(vt=>f_(F.re,vt));return{userId:z,batchId:ne.batchId,localWriteTimeMs:ne.localWriteTime.toMillis(),baseMutations:be,mutations:Ee}}(this.It,this.userId,v),C=[];let S=new rn((F,z)=>Tt(F.canonicalString(),z.canonicalString()));for(const F of o){const z=AM(this.userId,F.key.path,p);S=S.add(F.key.path.popLast()),C.push(l.put(D)),C.push(u.put(z,BP))}return S.forEach(F=>{C.push(this.indexManager.addToCollectionParentIndex(e,F))}),e.addOnCommittedListener(()=>{this.In[p]=v.keys()}),te.waitFor(C).next(()=>v)})}lookupMutationBatch(e,t){return rl(e).get(t).next(r=>r?(dt(r.userId===this.userId),ph(this.It,r)):null)}Tn(e,t){return this.In[t]?te.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return rl(e).Z({index:"userMutationsIndex",range:o},(l,p,v)=>{p.userId===this.userId&&(dt(p.batchId>=r),u=ph(this.It,p)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,l)=>{r=u.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rl(e).W("userMutationsIndex",t).next(r=>r.map(o=>ph(this.It,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=kE(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return yg(e).Z({range:o},(l,p,v)=>{const[D,C,S]=l,F=pa(C);if(D===this.userId&&t.path.isEqual(F))return rl(e).get(S).next(z=>{if(!z)throw Qe();dt(z.userId===this.userId),u.push(ph(this.It,z))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(Tt);const o=[];return t.forEach(u=>{const l=kE(this.userId,u.path),p=IDBKeyRange.lowerBound(l),v=yg(e).Z({range:p},(D,C,S)=>{const[F,z,ne]=D,be=pa(z);F===this.userId&&u.path.isEqual(be)?r=r.add(ne):S.done()});o.push(v)}),te.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=kE(this.userId,r),l=IDBKeyRange.lowerBound(u);let p=new rn(Tt);return yg(e).Z({range:l},(v,D,C)=>{const[S,F,z]=v,ne=pa(F);S===this.userId&&r.isPrefixOf(ne)?ne.length===o&&(p=p.add(z)):C.done()}).next(()=>this.En(e,p))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(rl(e).get(u).next(l=>{if(null===l)throw Qe();dt(l.userId===this.userId),r.push(ph(this.It,l))}))}),te.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return zM(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),te.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return te.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return yg(e).Z({range:r},(u,l,p)=>{if(u[0]===this.userId){const v=pa(u[1]);o.push(v)}else p.done()}).next(()=>{dt(0===o.length)})})}containsKey(e,t){return WM(e,this.userId,t)}Rn(e){return GM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function WM(n,e,t){const r=kE(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let l=!1;return yg(n).Z({range:u,X:!0},(p,v,D)=>{const[C,S,F]=p;C===e&&S===o&&(l=!0),D.done()}).next(()=>l)}function rl(n){return Mr(n,"mutations")}function yg(n){return Mr(n,"documentMutations")}function GM(n){return Mr(n,"mutationQueues")}class vh{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new vh(0)}static vn(){return new vh(-1)}}class h1{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new vh(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>mt.fromTimestamp(new bn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>vg(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return vg(e).Z((l,p)=>{const v=p_(p);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>te.waitFor(u)).next(()=>o)}forEachTarget(e,t){return vg(e).Z((r,o)=>{const u=p_(o);t(u)})}Vn(e){return qM(e).get("targetGlobalKey").next(t=>(dt(null!==t),t))}Sn(e,t){return qM(e).put("targetGlobalKey",t)}Dn(e,t){return vg(e).put(kM(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Eu(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return vg(e).Z({range:o,index:"queryTargetsIndex"},(l,p,v)=>{const D=p_(p);Qc(t,D.target)&&(u=D,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=il(e);return t.forEach(l=>{const p=ci(l.path);o.push(u.put({targetId:r,path:p})),o.push(this.referenceDelegate.addReference(e,r,l))}),te.waitFor(o)}removeMatchingKeys(e,t,r){const o=il(e);return te.forEach(t,u=>{const l=ci(u.path);return te.waitFor([o.delete([r,l]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=il(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=il(e);let u=Lt();return o.Z({range:r,X:!0},(l,p,v)=>{const D=pa(l[1]),C=new Ve(D);u=u.add(C)}).next(()=>u)}containsKey(e,t){const r=ci(t.path),o=IDBKeyRange.bound([r],[mE(r)],!1,!0);let u=0;return il(e).Z({index:"documentTargetsIndex",X:!0,range:o},([l,p],v,D)=>{0!==l&&(u++,D.done())}).next(()=>u>0)}se(e,t){return vg(e).get(t).next(r=>r?p_(r):null)}}function vg(n){return Mr(n,"targets")}function qM(n){return Mr(n,"targetGlobal")}function il(n){return Mr(n,"targetDocuments")}function KM([n,e],[t,r]){const o=Tt(n,t);return 0===o?Tt(e,r):o}class f1{constructor(e){this.xn=e,this.buffer=new rn(KM),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();KM(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class p1{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Re("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,G.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Sr(r)?Re("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield oa(r)}yield t.Fn(3e5)}))}}class g1{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return te.resolve(Fr.at);const r=new f1(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector","Garbage collection skipped; disabled"),te.resolve(HM)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Re("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),HM):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,o,u,l,p,v,D;const C=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,l=Date.now(),this.nthSequenceNumber(e,o))).next(S=>(r=S,p=Date.now(),this.removeTargets(e,r,t))).next(S=>(u=S,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(D=Date.now(),dE()<=os.in.DEBUG&&Re("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-C}ms\n\tDetermined least recently used ${o} in `+(p-l)+`ms\n\tRemoved ${u} targets in `+(v-p)+`ms\n\tRemoved ${S} documents in `+(D-v)+`ms\nTotal Duration: ${D-C}ms`),te.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S})))}}class m1{constructor(e,t){this.db=e,this.garbageCollector=new g1(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return $E(e,r)}removeReference(e,t,r){return $E(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $E(e,t)}Gn(e,t){return function(r,o){let u=!1;return GM(r).tt(l=>WM(r,l,o).next(p=>(p&&(u=!0),te.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(l,p)=>{if(p<=t){const v=this.Gn(e,l).next(D=>{if(!D)return u++,r.getEntry(e,l).next(()=>(r.removeEntry(l,mt.min()),il(e).delete([0,ci(l.path)])))});o.push(v)}}).next(()=>te.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $E(e,t)}Kn(e,t){const r=il(e);let o,u=Fr.at;return r.Z({index:"documentTargetsIndex"},([l,p],{path:v,sequenceNumber:D})=>{0===l?(u!==Fr.at&&t(new Ve(pa(o)),u),u=D,o=v):u=Fr.at}).next(()=>{u!==Fr.at&&t(new Ve(pa(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $E(n,e){return il(n).put((r=n.currentSequenceNumber,{targetId:0,path:ci(e.path),sequenceNumber:r}));var r}class ZM{constructor(){this.changes=new tl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?te.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class y1{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return _h(e).put(r)}removeEntry(e,t,r){return _h(e).delete(function(o,u){const l=o.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],OE(u),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=ln.newInvalidDocument(t);return _h(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(__(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:ln.newInvalidDocument(t)};return _h(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(__(t))},(o,u)=>{r={document:this.jn(t,u),size:VE(u)}}).next(()=>r)}getEntries(e,t){let r=Ti();return this.zn(e,t,(o,u)=>{const l=this.jn(o,u);r=r.insert(o,l)}).next(()=>r)}Hn(e,t){let r=Ti(),o=new Cn(Ve.comparator);return this.zn(e,t,(u,l)=>{const p=this.jn(u,l);r=r.insert(u,p),o=o.insert(u,VE(l))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return te.resolve();let o=new rn(XM);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(__(o.first()),__(o.last())),l=o.getIterator();let p=l.getNext();return _h(e).Z({index:"documentKeyIndex",range:u},(v,D,C)=>{const S=Ve.fromSegments([...D.prefixPath,D.collectionGroup,D.documentId]);for(;p&&XM(p,S)<0;)r(p,null),p=l.getNext();p&&p.isEqual(S)&&(r(p,D),p=l.hasNext()?l.getNext():null),p?C.j(__(p)):C.done()}).next(()=>{for(;p;)r(p,null),p=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const o=[t.popLast().toArray(),t.lastSegment(),OE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return _h(e).W(IDBKeyRange.bound(o,u,!0)).next(l=>{let p=Ti();for(const v of l){const D=this.jn(Ve.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);p=p.insert(D.key,D)}return p})}getAllFromCollectionGroup(e,t,r,o){let u=Ti();const l=JM(t,r),p=JM(t,Zr.max());return _h(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,p,!0)},(v,D,C)=>{const S=this.jn(Ve.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);u=u.insert(S.key,S),u.size===o&&C.done()}).next(()=>u)}newChangeBuffer(e){return new v1(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return QM(e).get("remoteDocumentGlobalKey").next(t=>(dt(!!t),t))}Qn(e,t){return QM(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function r1(n,e){let t;if(e.document)t=IM(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ve.fromSegments(e.noDocument.path),o=fh(e.noDocument.readTime);t=ln.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Qe();{const r=Ve.fromSegments(e.unknownDocument.path),o=fh(e.unknownDocument.version);t=ln.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new bn(r[0],r[1]);return mt.fromTimestamp(o)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(mt.min()))return r}return ln.newInvalidDocument(e)}}function YM(n){return new y1(n)}class v1 extends ZM{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new tl(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new rn((u,l)=>Tt(u.canonicalString(),l.canonicalString()));return this.changes.forEach((u,l)=>{const p=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,p.readTime)),l.isValidDocument()){const v=PM(this.Yn.It,l);o=o.add(u.path.popLast()),r+=VE(v)-p.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=p.size,this.trackRemovals){const v=PM(this.Yn.It,l.convertToNoDocument(mt.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),te.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,l)=>{this.Xn.set(u,{size:l,readTime:r.get(u).readTime})}),r))}}function QM(n){return Mr(n,"remoteDocumentGlobal")}function _h(n){return Mr(n,"remoteDocumentsV14")}function __(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JM(n,e){const t=e.documentKey.path.toArray();return[n,OE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function XM(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=Tt(t[u],r[u]),o)return o;return o=Tt(t.length,r.length),o||(o=Tt(t[t.length-2],r[r.length-2]),o||Tt(t[t.length-1],r[r.length-1]))}class _1{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class eR{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.getBaseDocument(e,t,r))).next(o=>(null!==r&&bu(r.mutation,o,Yr.empty(),bn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Lt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Lt()){const o=ha();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let l=o_();return u.forEach((p,v)=>{l=l.insert(p,v.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ha();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Lt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((l,p)=>{t.set(l,p)})})}computeViews(e,t,r,o){let u=Ti();const l=a_(),p=a_();return t.forEach((v,D)=>{const C=r.get(D.key);o.has(D.key)&&(void 0===C||C.mutation instanceof Cu)?u=u.insert(D.key,D):void 0!==C&&(l.set(D.key,C.mutation.getFieldMask()),bu(C.mutation,D,C.mutation.getFieldMask(),bn.now()))}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((D,C)=>l.set(D,C)),t.forEach((D,C)=>{var S;return p.set(D,new _1(C,null!==(S=l.get(D))&&void 0!==S?S:null))}),p))}recalculateAndSaveOverlays(e,t){const r=a_();let o=new Cn((l,p)=>l-p),u=Lt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const p of l)p.keys().forEach(v=>{const D=t.get(v);if(null===D)return;let C=r.get(v)||Yr.empty();C=p.applyToLocalView(D,C),r.set(v,C);const S=(o.get(p.batchId)||Lt()).add(v);o=o.insert(p.batchId,S)})}).next(()=>{const l=[],p=o.getReverseIterator();for(;p.hasNext();){const v=p.getNext(),D=v.key,C=v.value,S=lM();C.forEach(F=>{if(!u.has(F)){const z=dg(t.get(F),r.get(F));null!==z&&S.set(F,z),u=u.add(F)}}),l.push(this.documentOverlayCache.saveOverlays(e,D,S))}return te.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ve.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):RE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const l=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):te.resolve(ha());let p=-1,v=u;return l.next(D=>te.forEach(D,(C,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(C)?te.resolve():this.getBaseDocument(e,C,S).next(F=>{v=v.insert(C,F)}))).next(()=>this.populateOverlays(e,D,u)).next(()=>this.computeViews(e,v,D,Lt())).next(C=>({batchId:p,changes:cM(C)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ve(t)).next(r=>{let o=o_();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=o_();return this.indexManager.getCollectionParents(e,o).next(l=>te.forEach(l,p=>{const v=(D=t,C=p.child(o),new da(C,null,D.explicitOrderBy.slice(),D.filters.slice(),D.limit,D.limitType,D.startAt,D.endAt));var D,C;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(D=>{D.forEach((C,S)=>{u=u.insert(C,S)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(u=>(o=u,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(u=>{u.forEach((p,v)=>{const D=v.getKey();null===o.get(D)&&(o=o.insert(D,ln.newInvalidDocument(D)))});let l=o_();return o.forEach((p,v)=>{const D=u.get(p);void 0!==D&&bu(D.mutation,v,Yr.empty(),bn.now()),c(t,v)&&(l=l.insert(p,v))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):te.resolve(ln.newInvalidDocument(t))}}class w1{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return te.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),te.resolve()}getNamedQuery(e,t){return te.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:$T(r.bundledQuery),readTime:xr(r.readTime)}),te.resolve();var r}}class I1{constructor(){this.overlays=new Cn(Ve.comparator),this.es=new Map}getOverlay(e,t){return te.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ha();return te.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.ue(e,t,u)}),te.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),te.resolve()}getOverlaysForCollection(e,t,r){const o=ha(),u=t.length+1,l=new Ve(t.child("")),p=this.overlays.getIteratorFrom(l);for(;p.hasNext();){const v=p.getNext().value,D=v.getKey();if(!t.isPrefixOf(D.path))break;D.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return te.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new Cn((D,C)=>D-C);const l=this.overlays.getIterator();for(;l.hasNext();){const D=l.getNext().value;if(D.getKey().getCollectionGroup()===t&&D.largestBatchId>r){let C=u.get(D.largestBatchId);null===C&&(C=ha(),u=u.insert(D.largestBatchId,C)),C.set(D.getKey(),D)}}const p=ha(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((D,C)=>p.set(D,C)),!(p.size()>=o)););return te.resolve(p)}ue(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const l=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new BT(t,r));let u=this.es.get(t);void 0===u&&(u=Lt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class zT{constructor(){this.ns=new rn(Rr.ss),this.rs=new rn(Rr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Rr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Rr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new Ve(new $t([])),r=new Rr(t,e),o=new Rr(t,e+1),u=[];return this.rs.forEachInRange([r,o],l=>{this.cs(l),u.push(l.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Ve(new $t([])),r=new Rr(t,e),o=new Rr(t,e+1);let u=Lt();return this.rs.forEachInRange([r,o],l=>{u=u.add(l.key)}),u}containsKey(e){const t=new Rr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Rr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Ve.comparator(e.key,t.key)||Tt(e._s,t._s)}static os(e,t){return Tt(e._s,t._s)||Ve.comparator(e.key,t.key)}}class E1{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new rn(Rr.ss)}checkEmpty(e){return te.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const l=new UT(u,t,r,o);this.mutationQueue.push(l);for(const p of o)this.gs=this.gs.add(new Rr(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return te.resolve(l)}lookupMutationBatch(e,t){return te.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return te.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return te.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return te.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Rr(t,0),o=new Rr(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],l=>{const p=this.ys(l._s);u.push(p)}),te.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(Tt);return t.forEach(o=>{const u=new Rr(o,0),l=new Rr(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,l],p=>{r=r.add(p._s)})}),te.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;Ve.isDocumentKey(u)||(u=u.child(""));const l=new Rr(new Ve(u),0);let p=new rn(Tt);return this.gs.forEachWhile(v=>{const D=v.key.path;return!!r.isPrefixOf(D)&&(D.length===o&&(p=p.add(v._s)),!0)},l),te.resolve(this.Is(p))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return te.forEach(t.mutations,o=>{const u=new Rr(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Rr(t,0),o=this.gs.firstAfterOrEqual(r);return te.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return te.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class D1{constructor(e){this.Es=e,this.docs=new Cn(Ve.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return te.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=Ti();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():ln.newInvalidDocument(o))}),te.resolve(r)}getAllFromCollection(e,t,r){let o=Ti();const u=new Ve(t.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){const{key:p,value:{document:v}}=l.getNext();if(!t.isPrefixOf(p.path))break;p.path.length>t.length+1||Wv(zv(v),r)<=0||(o=o.insert(v.key,v.mutableCopy()))}return te.resolve(o)}getAllFromCollectionGroup(e,t,r,o){Qe()}As(e,t){return te.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new b1(this)}getSize(e){return te.resolve(this.size)}}class b1 extends ZM{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),te.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class C1{constructor(e){this.persistence=e,this.Rs=new tl(t=>Eu(t),Qc),this.lastRemoteSnapshotVersion=mt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new zT,this.targetCount=0,this.vs=vh.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),te.resolve()}getLastRemoteSnapshotVersion(e){return te.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return te.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),te.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),te.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new vh(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,te.resolve()}updateTargetData(e,t){return this.Dn(t),te.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,te.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((l,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.Rs.delete(l),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)}),te.waitFor(u).next(()=>o)}getTargetCount(e){return te.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return te.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),te.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(l=>{u.push(o.markPotentiallyOrphaned(e,l))}),te.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),te.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return te.resolve(r)}containsKey(e,t){return te.resolve(this.Ps.containsKey(t))}}class tR{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Fr(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new C1(this),this.indexManager=new l1,this.remoteDocumentCache=new D1(r=>this.referenceDelegate.xs(r)),this.It=new NM(t),this.Ns=new w1(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new I1,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new E1(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("MemoryPersistence","Starting transaction:",e);const o=new T1(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return te.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class T1 extends qv{constructor(e){super(),this.currentSequenceNumber=e}}class jE{constructor(e){this.persistence=e,this.Fs=new zT,this.$s=null}static Bs(e){return new jE(e)}get Ls(){if(this.$s)return this.$s;throw Qe()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),te.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),te.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),te.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return te.forEach(this.Ls,r=>{const o=Ve.fromPath(r);return this.Us(e,o).next(u=>{u||t.removeEntry(o,mt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return te.or([()=>te.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class S1{constructor(e){this.It=e}$(e,t,r,o){const u=new Gc("createOrUpgrade",t);var p;r<1&&o>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SM,{unique:!0}),p.createObjectStore("documentMutations"),nR(e),function(p){p.createObjectStore("remoteDocuments")}(e));let l=te.resolve();return r<3&&o>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),nR(e)),l=l.next(()=>function(p){const v=p.store("targetGlobal"),D={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:mt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",D)}(u))),r<4&&o>=4&&(0!==r&&(l=l.next(()=>function(p,v){return v.store("mutations").W().next(D=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SM,{unique:!0});const C=v.store("mutations"),S=D.map(F=>C.put(F));return te.waitFor(S)})}(e,u))),l=l.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(l=l.next(()=>this.qs(u))),r<6&&o>=6&&(l=l.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(l=l.next(()=>this.Gs(u))),r<8&&o>=8&&(l=l.next(()=>this.Qs(e,u))),r<9&&o>=9&&(l=l.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(l=l.next(()=>this.js(u))),r<11&&o>=11&&(l=l.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(l=l.next(()=>{!function(p){const v=p.createObjectStore("documentOverlays",{keyPath:JP});v.createIndex("collectionPathOverlayIndex",XP,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",e1,{unique:!1})}(e)})),r<13&&o>=13&&(l=l.next(()=>function(p){const v=p.createObjectStore("remoteDocumentsV14",{keyPath:$P});v.createIndex("documentKeyIndex",jP),v.createIndex("collectionGroupIndex",HP)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(l=l.next(()=>this.zs(e,u))),r<15&&o>=15&&(l=l.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:KP}).createIndex("sequenceNumberIndex",ZP,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:YP}).createIndex("documentKeyIndex",QP,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=VE(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>te.forEach(o,u=>{const l=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(p=>te.forEach(p,v=>{dt(v.userId===u.userId);const D=ph(this.It,v);return zM(e,u.userId,D).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((l,p)=>{const v=new $t(l),D=[0,ci(v)];u.push(t.get(D).next(C=>C?te.resolve():t.put({targetId:0,path:ci(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>te.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:qP});const r=t.store("collectionParents"),o=new HT,u=l=>{if(o.add(l)){const p=l.lastSegment(),v=l.popLast();return r.put({collectionId:p,parent:ci(v)})}};return t.store("remoteDocuments").Z({X:!0},(l,p)=>{const v=new $t(l);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,p,v],D)=>{const C=pa(p);return u(C.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=p_(o),l=kM(this.It,u);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,l)=>{const p=t.store("remoteDocumentsV14"),v=(D=l,D.document?new Ve($t.fromString(D.document.name).popFirst(5)):D.noDocument?Ve.fromSegments(D.noDocument.path):D.unknownDocument?Ve.fromSegments(D.unknownDocument.path):Qe()).path.toArray();var D;const C={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};o.push(p.put(C))}).next(()=>te.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=YM(this.It),u=new tR(jE.Bs,this.It.re);return r.W().next(l=>{const p=new Map;return l.forEach(v=>{var D;let C=null!==(D=p.get(v.userId))&&void 0!==D?D:Lt();ph(this.It,v).keys().forEach(S=>C=C.add(S)),p.set(v.userId,C)}),te.forEach(p,(v,D)=>{const C=new vr(D),S=LE.oe(this.It,C),F=u.getIndexManager(C),z=BE.oe(C,this.It,F,u.referenceDelegate);return new eR(o,z,S,F).recalculateAndSaveOverlaysForDocumentKeys(new FT(t,Fr.at),v).next()})})}}function nR(n){n.createObjectStore("targetDocuments",{keyPath:WP}).createIndex("documentTargetsIndex",GP,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",zP,{unique:!0}),n.createObjectStore("targetGlobal")}const WT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class GT{constructor(e,t,r,o,u,l,p,v,D,C,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=l,this.document=p,this.Js=D,this.Ys=C,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=F=>Promise.resolve(),!GT.C())throw new Ie(se.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new m1(this,o),this.ii=t+"main",this.It=new NM(v),this.ri=new cr(this.ii,this.Xs,new S1(this.It)),this.Cs=new h1(this.referenceDelegate,this.It),this.remoteDocumentCache=YM(this.It),this.Ns=new i1,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===C&&Wn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ie(se.FAILED_PRECONDITION,WT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Fr(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,G.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,G.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,G.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>HE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Sr(e))return Re("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Re("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return w_(e).get("owner").next(t=>te.resolve(this.mi(t)))}gi(e){return HE(e).delete(this.clientId)}yi(){var e=this;return(0,G.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Mr(r,"clientMetadata");return o.W().next(u=>{const l=e.Ii(u,18e5),p=u.filter(v=>-1===l.indexOf(v));return te.forEach(p,v=>o.delete(v.clientId)).next(()=>p)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?te.resolve(!0):w_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ie(se.FAILED_PRECONDITION,WT);return!1}}return!(!this.networkEnabled||!this.inForeground)||HE(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const l=!this.inForeground&&o.inForeground,p=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||l&&p)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Re("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,G.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new FT(t,Fr.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>HE(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return BE.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new d1(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return LE.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Re("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(l=this.Xs)?n1:14===l?RM:13===l?MM:12===l?t1:11===l?xM:void Qe();var l;let p;return this.ri.runTransaction(e,o,u,v=>(p=new FT(v,this.Ss?this.Ss.next():Fr.at),"readwrite-primary"===t?this.fi(p).next(D=>!!D||this.di(p)).next(D=>{if(!D)throw Wn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ie(se.FAILED_PRECONDITION,Gv);return r(p)}).next(D=>this.wi(p).next(()=>D)):this.Vi(p).next(()=>r(p)))).then(v=>(p.raiseOnCommittedEvent(),v))}Vi(e){return w_(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ie(se.FAILED_PRECONDITION,WT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return w_(e).put("owner",t)}static C(){return cr.C()}_i(e){const t=w_(e);return t.get("owner").next(r=>this.mi(r)?(Re("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):te.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Wn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,st.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Re("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Wn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Wn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function w_(n){return Mr(n,"owner")}function HE(n){return Mr(n,"clientMetadata")}function qT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class KT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=Lt(),o=Lt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new KT(e,t.fromCache,r,o)}}class rR{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(AE(t))return te.resolve(null);let r=Qr(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=n_(t,null,"F"),r=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const l=Lt(...u);return this.Ni.getDocuments(e,l).next(p=>this.indexManager.getMinOffset(e,r).next(v=>{const D=this.Fi(t,p);return this.$i(t,D,l,v.readTime)?this.ki(e,n_(t,null,"F")):this.Bi(e,D,t,v)}))})))}Oi(e,t,r,o){return AE(t)||o.isEqual(mt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const l=this.Fi(t,u);return this.$i(t,l,r,o)?this.Mi(e,t):(dE()<=os.in.DEBUG&&Re("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),a(t)),this.Bi(e,l,t,tg(o,-1)))})}Fi(e,t){let r=new rn(h(e));return t.forEach((o,u)=>{c(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return dE()<=os.in.DEBUG&&Re("QueryEngine","Using full collection scan to execute query:",a(t)),this.Ni.getDocumentsMatchingQuery(e,t,Zr.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(l=>{u=u.insert(l.key,l)}),u))}}class A1{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.It=o,this.Ui=new Cn(Tt),this.qi=new tl(u=>Eu(u),Qc),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eR(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function iR(n,e,t,r){return new A1(n,e,t,r)}function sR(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,G.Z)(function*(n,e){const t=Be(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const l=[],p=[];let v=Lt();for(const D of o){l.push(D.batchId);for(const C of D.mutations)v=v.add(C.key)}for(const D of u){p.push(D.batchId);for(const C of D.mutations)v=v.add(C.key)}return t.localDocuments.getDocuments(r,v).next(D=>({ji:D,removedBatchIds:l,addedBatchIds:p}))})})}),ZT.apply(this,arguments)}function x1(n,e){const t=Be(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,p,v,D){const C=v.batch,S=C.keys();let F=te.resolve();return S.forEach(z=>{F=F.next(()=>D.getEntry(p,z)).next(ne=>{const be=v.docVersions.get(z);dt(null!==be),ne.version.compareTo(be)<0&&(C.applyToRemoteDocument(ne,v),ne.isValidDocument()&&(ne.setReadTime(v.commitVersion),D.addEntry(ne)))})}),F.next(()=>l.mutationQueue.removeMutationBatch(p,C))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let p=Lt();for(let v=0;v<l.mutationResults.length;++v)l.mutationResults[v].transformResults.length>0&&(p=p.add(l.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function oR(n){const e=Be(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function M1(n,e){const t=Be(n),r=e.snapshotVersion;let o=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.Ui;const p=[];e.targetChanges.forEach((C,S)=>{const F=o.get(S);if(!F)return;p.push(t.Cs.removeMatchingKeys(u,C.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(u,C.addedDocuments,S)));let z=F.withSequenceNumber(u.currentSequenceNumber);var ne,be,Ee;e.targetMismatches.has(S)?z=z.withResumeToken(Nn.EMPTY_BYTE_STRING,mt.min()).withLastLimboFreeSnapshotVersion(mt.min()):C.resumeToken.approximateByteSize()>0&&(z=z.withResumeToken(C.resumeToken,r)),o=o.insert(S,z),be=z,Ee=C,(0===(ne=F).resumeToken.approximateByteSize()||be.snapshotVersion.toMicroseconds()-ne.snapshotVersion.toMicroseconds()>=3e8||Ee.addedDocuments.size+Ee.modifiedDocuments.size+Ee.removedDocuments.size>0)&&p.push(t.Cs.updateTargetData(u,z))});let v=Ti(),D=Lt();if(e.documentUpdates.forEach(C=>{e.resolvedLimboDocuments.has(C)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,C))}),p.push(aR(u,l,e.documentUpdates).next(C=>{v=C.Wi,D=C.zi})),!r.isEqual(mt.min())){const C=t.Cs.getLastRemoteSnapshotVersion(u).next(S=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(C)}return te.waitFor(p).next(()=>l.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,D)).next(()=>v)}).then(u=>(t.Ui=o,u))}function aR(n,e,t){let r=Lt(),o=Lt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let l=Ti();return t.forEach((p,v)=>{const D=u.get(p);v.isFoundDocument()!==D.isFoundDocument()&&(o=o.add(p)),v.isNoDocument()&&v.version.isEqual(mt.min())?(e.removeEntry(p,v.readTime),l=l.insert(p,v)):!D.isValidDocument()||v.version.compareTo(D.version)>0||0===v.version.compareTo(D.version)&&D.hasPendingWrites?(e.addEntry(v),l=l.insert(p,v)):Re("LocalStore","Ignoring outdated watch update for ",p,". Current version:",D.version," Watch version:",v.version)}),{Wi:l,zi:o}})}function R1(n,e){const t=Be(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function _g(n,e){const t=Be(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,te.resolve(o)):t.Cs.allocateTargetId(r).next(l=>(o=new nl(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.Ui.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function wg(n,e,t){return YT.apply(this,arguments)}function YT(){return YT=(0,G.Z)(function*(n,e,t){const r=Be(n),o=r.Ui.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,l=>r.persistence.referenceDelegate.removeTarget(l,o)))}catch(l){if(!Sr(l))throw l;Re("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(o.target)}),YT.apply(this,arguments)}function zE(n,e,t){const r=Be(n);let o=mt.min(),u=Lt();return r.persistence.runTransaction("Execute query","readonly",l=>function(p,v,D){const C=Be(p),S=C.qi.get(D);return void 0!==S?te.resolve(C.Ui.get(S)):C.Cs.getTargetData(v,D)}(r,l,Qr(e)).next(p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,p.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?o:mt.min(),t?u:Lt())).next(p=>(lR(r,d(e),p),{documents:p,Hi:u})))}function uR(n,e){const t=Be(n),r=Be(t.Cs),o=t.Ui.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.se(u,e).next(l=>l?l.target:null))}function cR(n,e){const t=Be(n),r=t.Ki.get(e)||mt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,tg(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(lR(t,e,o),o))}function lR(n,e,t){let r=n.Ki.get(e)||mt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function QT(){return QT=(0,G.Z)(function*(n,e,t,r){const o=Be(n);let u=Lt(),l=Ti();for(const D of t){const C=e.Ji(D.metadata.name);D.document&&(u=u.add(C));const S=e.Yi(D);S.setReadTime(e.Xi(D.metadata.readTime)),l=l.insert(C,S)}const p=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield _g(o,(D=r,Qr(lh($t.fromString(`__bundle__/docs/${D}`)))));var D;return o.persistence.runTransaction("Apply bundle documents","readwrite",D=>aR(D,p,l).next(C=>(p.apply(D),C)).next(C=>o.Cs.removeMatchingKeysForTargetId(D,v.targetId).next(()=>o.Cs.addMatchingKeys(D,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(D,C.Wi,C.zi)).next(()=>C.Wi)))}),QT.apply(this,arguments)}function P1(n,e){return JT.apply(this,arguments)}function JT(){return JT=(0,G.Z)(function*(n,e,t=Lt()){const r=yield _g(n,Qr($T(e.bundledQuery))),o=Be(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const l=xr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return o.Ns.saveNamedQuery(u,e);const p=r.withResumeToken(Nn.EMPTY_BYTE_STRING,l);return o.Ui=o.Ui.insert(p.targetId,p),o.Cs.updateTargetData(u,p).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),JT.apply(this,arguments)}function dR(n,e){return`firestore_clients_${n}_${e}`}function hR(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function XT(n,e){return`firestore_targets_${n}_${e}`}class WE{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,l="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return l&&o.error&&(l="string"==typeof o.error.message&&"string"==typeof o.error.code,l&&(u=new Ie(o.error.code,o.error.message))),l?new WE(e,t,o.state,u):(Wn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class I_{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Ie(r.error.code,r.error.message))),u?new I_(e,r.state,o):(Wn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class GE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=NE();for(let l=0;o&&l<r.activeTargetIds.length;++l)o=EE(r.activeTargetIds[l]),u=u.add(r.activeTargetIds[l]);return o?new GE(e,u):(Wn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class eS{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eS(t.clientId,t.onlineState):(Wn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class tS{constructor(){this.activeTargetIds=NE()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nS{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Cn(Tt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=dR(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new tS),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,G.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(dR(e.persistenceKey,o));if(u){const l=GE.Zi(o,u);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(XT(this.persistenceKey,e));if(r){const o=I_.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(XT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Re("SharedClientState","READ",e,t),t}setItem(e,t){Re("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Re("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Re("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Wn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,G.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let l=Fr.at;if(null!=u)try{const p=JSON.parse(u);dt("number"==typeof p),l=p}catch(p){Wn("SharedClientState","Failed to read sequence number from WebStorage",p)}return l}(r.newValue);o!==Fr.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new WE(this.currentUser,e,t,r),u=hR(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=hR(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=XT(this.persistenceKey,e),u=new I_(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return GE.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return WE.Zi(new vr(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return I_.Zi(o,t)}yr(e){return eS.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,G.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Re("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),l=[],p=[];return u.forEach(v=>{o.has(v)||l.push(v)}),o.forEach(v=>{u.has(v)||p.push(v)}),this.syncEngine.Br(l,p).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=NE();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class fR{constructor(){this.Lr=new tS,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new tS,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k1{qr(e){}shutdown(){}}class pR{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Re("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Re("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const O1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L1{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class F1 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const l=this.ho(e,t);Re("RestConnection","Sending: ",l,r);const p={};return this.lo(p,o,u),this.fo(e,l,p,r).then(v=>(Re("RestConnection","Received: ",v),v),v=>{throw ms("RestConnection",`${e} failed with error: `,v,"url: ",l,"request:",r),v})}_o(e,t,r,o,u,l){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+nh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${O1[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,l)=>{const p=new lE;p.setWithCredentials(!0),p.listenOnce(aE.COMPLETE,()=>{var D;try{switch(p.getLastErrorCode()){case eg.NO_ERROR:const C=p.getResponseJson();Re("Connection","XHR received:",JSON.stringify(C)),u(C);break;case eg.TIMEOUT:Re("Connection",'RPC "'+e+'" timed out'),l(new Ie(se.DEADLINE_EXCEEDED,"Request time out"));break;case eg.HTTP_ERROR:const S=p.getStatus();if(Re("Connection",'RPC "'+e+'" failed with status:',S,"response text:",p.getResponseText()),S>0){let F=p.getResponseJson();Array.isArray(F)&&(F=F[0]);const z=null===(D=F)||void 0===D?void 0:D.error;if(z&&z.status&&z.message){const ne=function(be){const Ee=be.toLowerCase().replace(/_/g,"-");return Object.values(se).indexOf(Ee)>=0?Ee:se.UNKNOWN}(z.status);l(new Ie(ne,z.message))}else l(new Ie(se.UNKNOWN,"Server responded with status "+p.getStatus()))}else l(new Ie(se.UNAVAILABLE,"Connection failed."));break;default:Qe()}}finally{Re("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);p.send(t,"POST",v,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=uT(),l=oE(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(p.xmlHttpFactory=new cT({})),this.lo(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const v=o.join("");Re("Connection","Creating WebChannel: "+v,p);const D=u.createWebChannel(v,p);let C=!1,S=!1;const F=new L1({Hr:ne=>{S?Re("Connection","Not sending because WebChannel is closed:",ne):(C||(Re("Connection","Opening WebChannel transport."),D.open(),C=!0),Re("Connection","WebChannel sending:",ne),D.send(ne))},Jr:()=>D.close()}),z=(ne,be,Ee)=>{ne.listen(be,vt=>{try{Ee(vt)}catch(It){setTimeout(()=>{throw It},0)}})};return z(D,jv.EventType.OPEN,()=>{S||Re("Connection","WebChannel transport opened.")}),z(D,jv.EventType.CLOSE,()=>{S||(S=!0,Re("Connection","WebChannel transport closed"),F.io())}),z(D,jv.EventType.ERROR,ne=>{S||(S=!0,ms("Connection","WebChannel transport errored:",ne),F.io(new Ie(se.UNAVAILABLE,"The operation could not be completed")))}),z(D,jv.EventType.MESSAGE,ne=>{var be;if(!S){const Ee=ne.data[0];dt(!!Ee);const vt=Ee,It=vt.error||(null===(be=vt[0])||void 0===be?void 0:be.error);if(It){Re("Connection","WebChannel received error:",It);const _t=It.status;let pt=function(Pt){const _r=dr[Pt];if(void 0!==_r)return aM(_r)}(_t),gt=It.message;void 0===pt&&(pt=se.INTERNAL,gt="Unknown error status: "+_t+" with message "+It.message),S=!0,F.io(new Ie(pt,gt)),D.close()}else Re("Connection","WebChannel received:",Ee),F.ro(Ee)}}),z(l,uE.STAT_EVENT,ne=>{ne.stat===cE.PROXY?Re("Connection","Detected buffering proxy"):ne.stat===cE.NOPROXY&&Re("Connection","Detected no buffering proxy")}),setTimeout(()=>{F.so()},0),F}}function gR(){return typeof window<"u"?window:null}function qE(){return typeof document<"u"?document:null}function E_(n){return new AP(n,!0)}class rS{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Re("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class mR{constructor(e,t,r,o,u,l,p,v){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=p,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new rS(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,G.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,G.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,G.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===se.RESOURCE_EXHAUSTED?(Wn(t.toString()),Wn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===se.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Ie(se.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,G.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Re("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Re("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class U1 extends mR{constructor(e,t,r,o,u,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,l),this.It=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function RP(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:Qe(),o=e.targetChange.targetIds||[],u=function(v,D){return v.gt?(dt(void 0===D||"string"==typeof D),Nn.fromBase64String(D||"")):(dt(void 0===D||D instanceof Uint8Array),Nn.fromUint8Array(D||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,p=l&&function(v){const D=void 0===v.code?se.UNKNOWN:aM(v.code);return new Ie(D,v.message||"")}(l);t=new hM(r,o,u,p||null)}else if("documentChange"in e){const r=e.documentChange,o=fa(n,r.document.name),u=xr(r.document.updateTime),l=new Ar({mapValue:{fields:r.document.fields}}),p=ln.newFoundDocument(o,u,l);t=new PE(r.targetIds||[],r.removedTargetIds||[],p.key,p)}else if("documentDelete"in e){const r=e.documentDelete,o=fa(n,r.document),u=r.readTime?xr(r.readTime):mt.min(),l=ln.newNoDocument(o,u);t=new PE([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,o=fa(n,r.document);t=new PE([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return Qe();{const r=e.filter,u=new wP(r.count||0);t=new dM(r.targetId,u)}}var v;return t}(this.It,e),r=function(o){if(!("targetChange"in o))return mt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?mt.min():u.readTime?xr(u.readTime):mt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=h_(this.It),t.addTarget=function(o,u){let l;const p=u.target;return l=uh(p)?{documents:EM(o,p)}:{query:LT(o,p)},l.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?l.resumeToken=mM(o,u.resumeToken):u.snapshotVersion.compareTo(mt.min())>0&&(l.readTime=l_(o,u.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function PP(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Qe()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=h_(this.It),t.removeTarget=e,this.Bo(t)}}class V1 extends mR{constructor(e,t,r,o,u,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,l),this.It=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function NP(n,e){return n&&n.length>0?(dt(void 0!==e),n.map(t=>function(r,o){let u=xr(r.updateTime?r.updateTime:o);return u.isEqual(mt.min())&&(u=xr(o)),new r_(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Zo(r,t)}return dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=h_(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>f_(this.It,r))};this.Bo(t)}}class B1 extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=o,this.nu=!1}su(){if(this.nu)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ie(se.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,l])=>this.connection._o(e,t,r,u,l,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===se.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Ie(se.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class j1{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Wn(t),this.ou=!1):Re("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class H1{constructor(e,t,r,o,u){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.qr(p=>{r.enqueueAndForget((0,G.Z)(function*(){var v;Tu(l)&&(Re("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,G.Z)(function*(D){const C=Be(D);C._u.add(4),yield Ig(C),C.gu.set("Unknown"),C._u.delete(4),yield D_(C)}),function(D){return v.apply(this,arguments)})(l))}))}),this.gu=new j1(r,o)}}function D_(n){return sS.apply(this,arguments)}function sS(){return sS=(0,G.Z)(function*(n){if(Tu(n))for(const e of n.wu)yield e(!0)}),sS.apply(this,arguments)}function Ig(n){return oS.apply(this,arguments)}function oS(){return oS=(0,G.Z)(function*(n){for(const e of n.wu)yield e(!1)}),oS.apply(this,arguments)}function KE(n,e){const t=Be(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),cS(t)?uS(t):Dg(t).ko()&&aS(t,e))}function b_(n,e){const t=Be(n),r=Dg(t);t.du.delete(e),r.ko()&&yR(t,e),0===t.du.size&&(r.ko()?r.Fo():Tu(t)&&t.gu.set("Unknown"))}function aS(n,e){n.yu.Mt(e.targetId),Dg(n).zo(e)}function yR(n,e){n.yu.Mt(e),Dg(n).Ho(e)}function uS(n){n.yu=new CP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Dg(n).start(),n.gu.uu()}function cS(n){return Tu(n)&&!Dg(n).No()&&n.du.size>0}function Tu(n){return 0===Be(n)._u.size}function vR(n){n.yu=void 0}function z1(n){return lS.apply(this,arguments)}function lS(){return lS=(0,G.Z)(function*(n){n.du.forEach((e,t)=>{aS(n,e)})}),lS.apply(this,arguments)}function W1(n,e){return dS.apply(this,arguments)}function dS(){return dS=(0,G.Z)(function*(n,e){vR(n),cS(n)?(n.gu.hu(e),uS(n)):n.gu.set("Unknown")}),dS.apply(this,arguments)}function G1(n,e,t){return hS.apply(this,arguments)}function hS(){return hS=(0,G.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof hM&&2===e.state&&e.cause)try{yield(r=(0,G.Z)(function*(o,u){const l=u.cause;for(const p of u.targetIds)o.du.has(p)&&(yield o.remoteSyncer.rejectListen(p,l),o.du.delete(p),o.yu.removeTarget(p))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Re("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZE(n,r)}else if(e instanceof PE?n.yu.Gt(e):e instanceof dM?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(mt.min()))try{const r=yield oR(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const l=o.yu.te(u);return l.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const D=o.du.get(v);D&&o.du.set(v,D.withResumeToken(p.resumeToken,u))}}),l.targetMismatches.forEach(p=>{const v=o.du.get(p);if(!v)return;o.du.set(p,v.withResumeToken(Nn.EMPTY_BYTE_STRING,v.snapshotVersion)),yR(o,p);const D=new nl(v.target,p,1,v.sequenceNumber);aS(o,D)}),o.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Re("RemoteStore","Failed to raise snapshot:",r),yield ZE(n,r)}var r}),hS.apply(this,arguments)}function ZE(n,e,t){return fS.apply(this,arguments)}function fS(){return fS=(0,G.Z)(function*(n,e,t){if(!Sr(e))throw e;n._u.add(1),yield Ig(n),n.gu.set("Offline"),t||(t=()=>oR(n.localStore)),n.asyncQueue.enqueueRetryable((0,G.Z)(function*(){Re("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield D_(n)}))}),fS.apply(this,arguments)}function _R(n,e){return e().catch(t=>ZE(n,t,e))}function Eg(n){return pS.apply(this,arguments)}function pS(){return pS=(0,G.Z)(function*(n){const e=Be(n),t=sl(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;q1(e);)try{const o=yield R1(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,K1(e,o)}catch(o){yield ZE(e,o)}wR(e)&&IR(e)}),pS.apply(this,arguments)}function q1(n){return Tu(n)&&n.fu.length<10}function K1(n,e){n.fu.push(e);const t=sl(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function wR(n){return Tu(n)&&!sl(n).No()&&n.fu.length>0}function IR(n){sl(n).start()}function Z1(n){return gS.apply(this,arguments)}function gS(){return gS=(0,G.Z)(function*(n){sl(n).eu()}),gS.apply(this,arguments)}function Y1(n){return mS.apply(this,arguments)}function mS(){return mS=(0,G.Z)(function*(n){const e=sl(n);for(const t of n.fu)e.Xo(t.mutations)}),mS.apply(this,arguments)}function Q1(n,e,t){return yS.apply(this,arguments)}function yS(){return yS=(0,G.Z)(function*(n,e,t){const r=n.fu.shift(),o=VT.from(r,e,t);yield _R(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield Eg(n)}),yS.apply(this,arguments)}function J1(n,e){return vS.apply(this,arguments)}function vS(){return vS=(0,G.Z)(function*(n,e){var t;e&&sl(n).Yo&&(yield(t=(0,G.Z)(function*(r,o){if(oM(u=o.code)&&u!==se.ABORTED){const l=r.fu.shift();sl(r).Mo(),yield _R(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,o)),yield Eg(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),wR(n)&&IR(n)}),vS.apply(this,arguments)}function ER(n,e){return _S.apply(this,arguments)}function _S(){return _S=(0,G.Z)(function*(n,e){const t=Be(n);t.asyncQueue.verifyOperationInProgress(),Re("RemoteStore","RemoteStore received new credentials");const r=Tu(t);t._u.add(3),yield Ig(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield D_(t)}),_S.apply(this,arguments)}function wS(n,e){return IS.apply(this,arguments)}function IS(){return IS=(0,G.Z)(function*(n,e){const t=Be(n);e?(t._u.delete(2),yield D_(t)):e||(t._u.add(2),yield Ig(t),t.gu.set("Unknown"))}),IS.apply(this,arguments)}function Dg(n){return n.pu||(n.pu=function(e,t,r){const o=Be(e);return o.su(),new U1(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:z1.bind(null,n),Zr:W1.bind(null,n),Wo:G1.bind(null,n)}),n.wu.push(function(){var e=(0,G.Z)(function*(t){t?(n.pu.Mo(),cS(n)?uS(n):n.gu.set("Unknown")):(yield n.pu.stop(),vR(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function sl(n){return n.Iu||(n.Iu=function(e,t,r){const o=Be(e);return o.su(),new V1(t,o.connection,o.authCredentials,o.appCheckCredentials,o.It,r)}(n.datastore,n.asyncQueue,{Yr:Z1.bind(null,n),Zr:J1.bind(null,n),tu:Y1.bind(null,n),Zo:Q1.bind(null,n)}),n.wu.push(function(){var e=(0,G.Z)(function*(t){t?(n.Iu.Mo(),yield Eg(n)):(yield n.Iu.stop(),n.fu.length>0&&(Re("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class ES{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new Gn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,o,u){const l=Date.now()+r,p=new ES(e,t,l,o,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ie(se.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bg(n,e){if(Wn("AsyncQueue",`${e}: ${n}`),Sr(n))return new Ie(se.UNAVAILABLE,`${e}: ${n}`);throw n}class Cg{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ve.comparator(t.key,r.key):(t,r)=>Ve.comparator(t.key,r.key),this.keyedMap=o_(),this.sortedSet=new Cn(this.comparator)}static emptySet(e){return new Cg(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Cg)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Cg;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class DR{constructor(){this.Tu=new Cn(Ve.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):Qe():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Tg{constructor(e,t,r,o,u,l,p,v,D){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=l,this.syncStateChanged=p,this.excludesMetadataChanges=v,this.hasCachedResults=D}static fromInitialDocuments(e,t,r,o,u){const l=[];return t.forEach(p=>{l.push({type:0,doc:p})}),new Tg(e,t,Cg.emptySet(t),l,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&i(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class X1{constructor(){this.Au=void 0,this.listeners=[]}}class ek{constructor(){this.queries=new tl(e=>s(e),i),this.onlineState="Unknown",this.Ru=new Set}}function DS(n,e){return bS.apply(this,arguments)}function bS(){return bS=(0,G.Z)(function*(n,e){const t=Be(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new X1),o)try{u.Au=yield t.onListen(r)}catch(l){const p=bg(l,`Initialization of query '${a(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&SS(t)}),bS.apply(this,arguments)}function CS(n,e){return TS.apply(this,arguments)}function TS(){return TS=(0,G.Z)(function*(n,e){const t=Be(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const l=u.listeners.indexOf(e);l>=0&&(u.listeners.splice(l,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),TS.apply(this,arguments)}function tk(n,e){const t=Be(n);let r=!1;for(const o of e){const l=t.queries.get(o.query);if(l){for(const p of l.listeners)p.Pu(o)&&(r=!0);l.Au=o}}r&&SS(t)}function nk(n,e,t){const r=Be(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function SS(n){n.Ru.forEach(e=>{e.next()})}class AS{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Tg(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Tg.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class rk{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class bR{constructor(e){this.It=e}Ji(e){return fa(this.It,e)}Yi(e){return e.metadata.exists?IM(this.It,e.document,!1):ln.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return xr(e)}}class ik{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=CR(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=$t.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new bR(this.It);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const l of o.metadata.queries){const p=(t.get(l)||Lt()).add(u);t.set(l,p)}}return t}complete(){var e=this;return(0,G.Z)(function*(){const t=yield function N1(n,e,t,r){return QT.apply(this,arguments)}(e.localStore,new bR(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield P1(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function CR(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class TR{constructor(e){this.key=e}}class SR{constructor(e){this.key=e}}class AR{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Lt(),this.mutatedKeys=Lt(),this.Gu=h(e),this.Qu=new Cg(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new DR,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,l=o,p=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,D="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((C,S)=>{const F=o.get(C),z=c(this.query,S)?S:null,ne=!!F&&this.mutatedKeys.has(F.key),be=!!z&&(z.hasLocalMutations||this.mutatedKeys.has(z.key)&&z.hasCommittedMutations);let Ee=!1;F&&z?F.data.isEqual(z.data)?ne!==be&&(r.track({type:3,doc:z}),Ee=!0):this.Hu(F,z)||(r.track({type:2,doc:z}),Ee=!0,(v&&this.Gu(z,v)>0||D&&this.Gu(z,D)<0)&&(p=!0)):!F&&z?(r.track({type:0,doc:z}),Ee=!0):F&&!z&&(r.track({type:1,doc:F}),Ee=!0,(v||D)&&(p=!0)),Ee&&(z?(l=l.add(z),u=be?u.add(C):u.delete(C)):(l=l.delete(C),u=u.delete(C)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const C="F"===this.query.limitType?l.last():l.first();l=l.delete(C.key),u=u.delete(C.key),r.track({type:1,doc:C})}return{Qu:l,zu:r,$i:p,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((D,C)=>function(S,F){const z=ne=>{switch(ne){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Qe()}};return z(S)-z(F)}(D.type,C.type)||this.Gu(D.doc,C.doc)),this.Ju(r);const l=t?this.Yu():[],p=0===this.Ku.size&&this.current?1:0,v=p!==this.qu;return this.qu=p,0!==u.length||v?{snapshot:new Tg(this.query,e.Qu,o,u,e.mutatedKeys,0===p,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:l}:{Xu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new DR,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Lt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new SR(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new TR(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=Lt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Tg.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class sk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class ok{constructor(e){this.key=e,this.nc=!1}}class ak{constructor(e,t,r,o,u,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=l,this.sc={},this.ic=new tl(p=>s(p),i),this.rc=new Map,this.oc=new Set,this.uc=new Cn(Ve.comparator),this.cc=new Map,this.ac=new zT,this.hc={},this.lc=new Map,this.fc=vh.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function uk(n,e){return xS.apply(this,arguments)}function xS(){return xS=(0,G.Z)(function*(n,e){const t=JS(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const l=yield _g(t.localStore,Qr(e));t.isPrimaryClient&&KE(t.remoteStore,l);const p=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,o=yield MS(t,e,r,"current"===p,l.resumeToken)}return o}),xS.apply(this,arguments)}function MS(n,e,t,r,o){return RS.apply(this,arguments)}function RS(){return RS=(0,G.Z)(function*(n,e,t,r,o){n._c=(S,F,z)=>{return(ne=(0,G.Z)(function*(be,Ee,vt,It){let _t=Ee.view.Wu(vt);_t.$i&&(_t=yield zE(be.localStore,Ee.query,!1).then(({documents:Pt})=>Ee.view.Wu(Pt,_t)));const pt=It&&It.targetChanges.get(Ee.targetId),gt=Ee.view.applyChanges(_t,be.isPrimaryClient,pt);return $S(be,Ee.targetId,gt.Xu),gt.snapshot}),function(be,Ee,vt,It){return ne.apply(this,arguments)})(n,S,F,z);var ne};const u=yield zE(n.localStore,e,!0),l=new AR(e,u.Hi),p=l.Wu(u.documents),v=c_.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),D=l.applyChanges(p,n.isPrimaryClient,v);$S(n,t,D.Xu);const C=new sk(e,t,l);return n.ic.set(e,C),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),D.snapshot}),RS.apply(this,arguments)}function ck(n,e){return NS.apply(this,arguments)}function NS(){return NS=(0,G.Z)(function*(n,e){const t=Be(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!i(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield wg(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),b_(t.remoteStore,r.targetId),Sg(t,r.targetId)}).catch(oa))):(Sg(t,r.targetId),yield wg(t.localStore,r.targetId,!0))}),NS.apply(this,arguments)}function PS(){return PS=(0,G.Z)(function*(n,e,t){const r=XS(n);try{const o=yield function(u,l){const p=Be(u),v=bn.now(),D=l.reduce((F,z)=>F.add(z.key),Lt());let C,S;return p.persistence.runTransaction("Locally write mutations","readwrite",F=>{let z=Ti(),ne=Lt();return p.Gi.getEntries(F,D).next(be=>{z=be,z.forEach((Ee,vt)=>{vt.isValidDocument()||(ne=ne.add(Ee))})}).next(()=>p.localDocuments.getOverlayedDocuments(F,z)).next(be=>{C=be;const Ee=[];for(const vt of l){const It=s_(vt,C.get(vt.key).overlayedDocument);null!=It&&Ee.push(new Cu(vt.key,It,DT(It.value.mapValue),gn.exists(!0)))}return p.mutationQueue.addMutationBatch(F,v,Ee,l)}).next(be=>{S=be;const Ee=be.applyToLocalDocumentSet(C,ne);return p.documentOverlayCache.saveOverlays(F,be.batchId,Ee)})}).then(()=>({batchId:S.batchId,changes:cM(C)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,l,p){let v=u.hc[u.currentUser.toKey()];v||(v=new Cn(Tt)),v=v.insert(l,p),u.hc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Su(r,o.changes),yield Eg(r.remoteStore)}catch(o){const u=bg(o,"Failed to persist write");t.reject(u)}}),PS.apply(this,arguments)}function xR(n,e){return kS.apply(this,arguments)}function kS(){return kS=(0,G.Z)(function*(n,e){const t=Be(n);try{const r=yield M1(t.localStore,e);e.targetChanges.forEach((o,u)=>{const l=t.cc.get(u);l&&(dt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?l.nc=!0:o.modifiedDocuments.size>0?dt(l.nc):o.removedDocuments.size>0&&(dt(l.nc),l.nc=!1))}),yield Su(t,r,e)}catch(r){yield oa(r)}}),kS.apply(this,arguments)}function MR(n,e,t){const r=Be(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,l)=>{const p=l.view.bu(e);p.snapshot&&o.push(p.snapshot)}),function(u,l){const p=Be(u);p.onlineState=l;let v=!1;p.queries.forEach((D,C)=>{for(const S of C.listeners)S.bu(l)&&(v=!0)}),v&&SS(p)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function dk(n,e,t){return OS.apply(this,arguments)}function OS(){return OS=(0,G.Z)(function*(n,e,t){const r=Be(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let l=new Cn(Ve.comparator);l=l.insert(u,ln.newNoDocument(u,mt.min()));const p=Lt().add(u),v=new u_(mt.min(),new Map,new rn(Tt),l,p);yield xR(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),jS(r)}else yield wg(r.localStore,e,!1).then(()=>Sg(r,e,t)).catch(oa)}),OS.apply(this,arguments)}function hk(n,e){return LS.apply(this,arguments)}function LS(){return LS=(0,G.Z)(function*(n,e){const t=Be(n),r=e.batch.batchId;try{const o=yield x1(t.localStore,e);BS(t,r,null),VS(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Su(t,o)}catch(o){yield oa(o)}}),LS.apply(this,arguments)}function fk(n,e,t){return FS.apply(this,arguments)}function FS(){return FS=(0,G.Z)(function*(n,e,t){const r=Be(n);try{const o=yield function(u,l){const p=Be(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let D;return p.mutationQueue.lookupMutationBatch(v,l).next(C=>(dt(null!==C),D=C.keys(),p.mutationQueue.removeMutationBatch(v,C))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,D,l)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,D)).next(()=>p.localDocuments.getDocuments(v,D))})}(r.localStore,e);BS(r,e,t),VS(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Su(r,o)}catch(o){yield oa(o)}}),FS.apply(this,arguments)}function US(){return US=(0,G.Z)(function*(n,e){const t=Be(n);Tu(t.remoteStore)||Re("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const l=Be(u);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>l.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=bg(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),US.apply(this,arguments)}function VS(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function BS(n,e,t){const r=Be(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function Sg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||RR(n,r)})}function RR(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(b_(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),jS(n))}function $S(n,e,t){for(const r of t)r instanceof TR?(n.ac.addReference(r.key,e),gk(n,r)):r instanceof SR?(Re("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||RR(n,r.key)):Qe()}function gk(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Re("SyncEngine","New document in limbo: "+t),n.oc.add(r),jS(n))}function jS(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Ve($t.fromString(e)),r=n.fc.next();n.cc.set(r,new ok(t)),n.uc=n.uc.insert(t,r),KE(n.remoteStore,new nl(Qr(lh(t.path)),r,2,Fr.at))}}function Su(n,e,t){return HS.apply(this,arguments)}function HS(){return HS=(0,G.Z)(function*(n,e,t){const r=Be(n),o=[],u=[],l=[];var p;r.ic.isEmpty()||(r.ic.forEach((p,v)=>{l.push(r._c(v,e,t).then(D=>{if((D||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,D?.fromCache?"not-current":"current"),D){o.push(D);const C=KT.Ci(v.targetId,D);u.push(C)}}))}),yield Promise.all(l),r.sc.Wo(o),yield(p=(0,G.Z)(function*(v,D){const C=Be(v);try{yield C.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>te.forEach(D,F=>te.forEach(F.Si,z=>C.persistence.referenceDelegate.addReference(S,F.targetId,z)).next(()=>te.forEach(F.Di,z=>C.persistence.referenceDelegate.removeReference(S,F.targetId,z)))))}catch(S){if(!Sr(S))throw S;Re("LocalStore","Failed to update sequence numbers: "+S)}for(const S of D){const F=S.targetId;if(!S.fromCache){const z=C.Ui.get(F),be=z.withLastLimboFreeSnapshotVersion(z.snapshotVersion);C.Ui=C.Ui.insert(F,be)}}}),function(v,D){return p.apply(this,arguments)})(r.localStore,u))}),HS.apply(this,arguments)}function mk(n,e){return zS.apply(this,arguments)}function zS(){return zS=(0,G.Z)(function*(n,e){const t=Be(n);if(!t.currentUser.isEqual(e)){Re("SyncEngine","User change. New user:",e.toKey());const r=yield sR(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(l=>{l.forEach(p=>{p.reject(new Ie(se.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Su(t,r.ji)}var o}),zS.apply(this,arguments)}function yk(n,e){const t=Be(n),r=t.cc.get(e);if(r&&r.nc)return Lt().add(r.key);{let o=Lt();const u=t.rc.get(e);if(!u)return o;for(const l of u){const p=t.ic.get(l);o=o.unionWith(p.view.ju)}return o}}function vk(n,e){return WS.apply(this,arguments)}function WS(){return WS=(0,G.Z)(function*(n,e){const t=Be(n),r=yield zE(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&$S(t,e.targetId,o.Xu),o}),WS.apply(this,arguments)}function _k(n,e){return GS.apply(this,arguments)}function GS(){return GS=(0,G.Z)(function*(n,e){const t=Be(n);return cR(t.localStore,e).then(r=>Su(t,r))}),GS.apply(this,arguments)}function wk(n,e,t,r){return qS.apply(this,arguments)}function qS(){return qS=(0,G.Z)(function*(n,e,t,r){const o=Be(n),u=yield function(l,p){const v=Be(l),D=Be(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",C=>D.Tn(C,p).next(S=>S?v.localDocuments.getDocuments(C,S):te.resolve(null)))}(o.localStore,e);var p;null!==u?("pending"===t?yield Eg(o.remoteStore):"acknowledged"===t||"rejected"===t?(BS(o,e,r||null),VS(o,e),p=e,Be(Be(o.localStore).mutationQueue).An(p)):Qe(),yield Su(o,u)):Re("SyncEngine","Cannot apply mutation batch with id: "+e)}),qS.apply(this,arguments)}function KS(){return KS=(0,G.Z)(function*(n,e){const t=Be(n);if(JS(t),XS(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield NR(t,r.toArray());t.dc=!0,yield wS(t.remoteStore,!0);for(const u of o)KE(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):o=o.then(()=>(Sg(t,l),wg(t.localStore,l,!0))),b_(t.remoteStore,l)}),yield o,yield NR(t,r),function(u){const l=Be(u);l.cc.forEach((p,v)=>{b_(l.remoteStore,v)}),l.ac.fs(),l.cc=new Map,l.uc=new Cn(Ve.comparator)}(t),t.dc=!1,yield wS(t.remoteStore,!1)}}),KS.apply(this,arguments)}function NR(n,e,t){return ZS.apply(this,arguments)}function ZS(){return ZS=(0,G.Z)(function*(n,e,t){const r=Be(n),o=[],u=[];for(const l of e){let p;const v=r.rc.get(l);if(v&&0!==v.length){p=yield _g(r.localStore,Qr(v[0]));for(const D of v){const C=r.ic.get(D),S=yield vk(r,C);S.snapshot&&u.push(S.snapshot)}}else{const D=yield uR(r.localStore,l);p=yield _g(r.localStore,D),yield MS(r,PR(D),l,!1,p.resumeToken)}o.push(p)}return r.sc.Wo(u),o}),ZS.apply(this,arguments)}function PR(n){return RT(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ek(n){const e=Be(n);return Be(Be(e.localStore).persistence).vi()}function Dk(n,e,t,r){return YS.apply(this,arguments)}function YS(){return YS=(0,G.Z)(function*(n,e,t,r){const o=Be(n);if(o.dc)return void Re("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const l=yield cR(o.localStore,d(u[0])),p=u_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Nn.EMPTY_BYTE_STRING);yield Su(o,l,p);break}case"rejected":yield wg(o.localStore,e,!0),Sg(o,e,r);break;default:Qe()}}),YS.apply(this,arguments)}function bk(n,e,t){return QS.apply(this,arguments)}function QS(){return QS=(0,G.Z)(function*(n,e,t){const r=JS(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Re("SyncEngine","Adding an already active target "+o);continue}const u=yield uR(r.localStore,o),l=yield _g(r.localStore,u);yield MS(r,PR(u),l.targetId,!1,l.resumeToken),KE(r.remoteStore,l)}for(const o of t)r.rc.has(o)&&(yield wg(r.localStore,o,!1).then(()=>{b_(r.remoteStore,o),Sg(r,o)}).catch(oa))}}),QS.apply(this,arguments)}function JS(n){const e=Be(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=xR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=yk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dk.bind(null,e),e.sc.Wo=tk.bind(null,e.eventManager),e.sc.wc=nk.bind(null,e.eventManager),e}function XS(n){const e=Be(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fk.bind(null,e),e}class kR{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,G.Z)(function*(){t.It=E_(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return iR(this.persistence,new rR,e.initialUser,this.It)}yc(e){return new tR(jE.Bs,this.It)}gc(e){return new fR}terminate(){var e=this;return(0,G.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class OR extends kR{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield XS(r.Ac.syncEngine),yield Eg(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return iR(this.persistence,new rR,e.initialUser,this.It)}Tc(e,t){return new p1(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new _T(t,this.persistence);return new vT(e.asyncQueue,r)}yc(e){const t=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Si.withCacheSize(this.cacheSizeBytes):Si.DEFAULT;return new GT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,gR(),qE(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new fR}}class Tk extends OR{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,G.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof nS&&(r.sharedClientState.syncEngine={Fr:wk.bind(null,o),$r:Dk.bind(null,o),Br:bk.bind(null,o),vi:Ek.bind(null,o),Mr:_k.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,G.Z)(function*(l){yield function Ik(n,e){return KS.apply(this,arguments)}(r.Ac.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return u.apply(this,arguments)}}())})()}gc(e){const t=gR();if(!nS.C(t))throw new Ie(se.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=qT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nS(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class eA{initialize(e,t){var r=this;return(0,G.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>MR(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=mk.bind(null,r.syncEngine),yield wS(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ek}createDatastore(e){const t=E_(e.databaseInfo.databaseId),r=new F1(e.databaseInfo);return new B1(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=p=>MR(this.syncEngine,p,0),l=pR.C()?new pR:new k1,new H1(t,r,o,u,l);var t,r,o,u,l}createSyncEngine(e,t){return function(r,o,u,l,p,v,D){const C=new ak(r,o,u,l,p,v);return D&&(C.dc=!0),C}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,G.Z)(function*(t){const r=Be(t);Re("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield Ig(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function tA(n,e,t){if(!t)throw new Ie(se.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function LR(n,e,t,r){if(!0===e&&!0===r)throw new Ie(se.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function FR(n){if(!Ve.isDocumentKey(n))throw new Ie(se.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function UR(n){if(Ve.isDocumentKey(n))throw new Ie(se.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function YE(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Qe()}function zt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ie(se.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=YE(n);throw new Ie(se.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function VR(n,e){if(e<=0)throw new Ie(se.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const BR=new Map;class $R{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ie(se.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ie(se.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,LR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class C_{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $R({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ie(se.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ie(se.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $R(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new gE;switch(t.type){case"gapi":return new hT(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ie(se.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=BR.get(e);t&&(Re("ComponentProvider","Removing Datastore"),BR.delete(e),t.terminate())}(this),Promise.resolve()}}function jR(n,e,t,r={}){var o;const u=(n=zt(n,C_))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&ms("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,p;if("string"==typeof r.mockUserToken)l=r.mockUserToken,p=vr.MOCK_USER;else{l=(0,st.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Ie(se.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new vr(v)}n._authCredentials=new Zx(new pE(l,p))}}class Tn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ga(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tn(this.firestore,e,this._key)}}class Jr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jr(this.firestore,e,this._query)}}class ga extends Jr{constructor(e,t,r){super(e,t,lh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tn(this.firestore,null,new Ve(e))}withConverter(e){return new ga(this.firestore,e,this._path)}}function HR(n,e,...t){if(n=(0,st.m9)(n),tA("collection","path",e),n instanceof C_){const r=$t.fromString(e,...t);return UR(r),new ga(n,null,r)}{if(!(n instanceof Tn||n instanceof ga))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return UR(r),new ga(n.firestore,null,r)}}function QE(n,e,...t){if(n=(0,st.m9)(n),1===arguments.length&&(e=pT.R()),tA("doc","path",e),n instanceof C_){const r=$t.fromString(e,...t);return FR(r),new Tn(n,null,new Ve(r))}{if(!(n instanceof Tn||n instanceof ga))throw new Ie(se.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child($t.fromString(e,...t));return FR(r),new Tn(n.firestore,n instanceof ga?n.converter:null,new Ve(r))}}function zR(n,e){return n=(0,st.m9)(n),e=(0,st.m9)(e),(n instanceof Tn||n instanceof ga)&&(e instanceof Tn||e instanceof ga)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nA(n,e){return n=(0,st.m9)(n),e=(0,st.m9)(e),n instanceof Jr&&e instanceof Jr&&n.firestore===e.firestore&&i(n._query,e._query)&&n.converter===e.converter}function WR(n,e=10240){let t=0;return{read:()=>(0,G.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,G.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class JE{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Wn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Ak{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Gn,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,G.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,G.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,G.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new rk(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,G.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,G.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,G.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class Rk{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,G.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ie(se.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,G.Z)(function*(u,l){const p=Be(u),v=h_(p.It)+"/documents",D={documents:l.map(z=>d_(p.It,z))},C=yield p._o("BatchGetDocuments",v,D,l.length),S=new Map;C.forEach(z=>{const ne=function MP(n,e){return"found"in e?function(t,r){dt(!!r.found);const o=fa(t,r.found.name),u=xr(r.found.updateTime),l=new Ar({mapValue:{fields:r.found.fields}});return ln.newFoundDocument(o,u,l)}(n,e):"missing"in e?function(t,r){dt(!!r.missing),dt(!!r.readTime);const o=fa(t,r.missing),u=xr(r.readTime);return ln.newNoDocument(o,u)}(n,e):Qe()}(p.It,z);S.set(ne.key.toString(),ne)});const F=[];return l.forEach(z=>{const ne=S.get(z.toString());dt(!!ne),F.push(ne)}),F}),function(u,l){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pg(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,G.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=Ve.fromPath(o);e.mutations.push(new NT(u,e.precondition(u)))}),yield(r=(0,G.Z)(function*(o,u){const l=Be(o),p=h_(l.It)+"/documents",v={writes:u.map(D=>f_(l.It,D))};yield l.ao("Commit",p,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Qe();t=mt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Ie(se.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(mt.min())?gn.exists(!1):gn.updateTime(t):gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(mt.min()))throw new Ie(se.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gn.updateTime(t)}return gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Nk{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new rS(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,G.Z)(function*(){const t=new Rk(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!Kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!oM(t)}return!1}}class Pk{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=vr.UNAUTHENTICATED,this.clientId=pT.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,G.Z)(function*(p){Re("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Re("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,G.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ie(se.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=bg(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function GR(n,e){return rA.apply(this,arguments)}function rA(){return rA=(0,G.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Re("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,G.Z)(function*(u){r.isEqual(u)||(yield sR(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),rA.apply(this,arguments)}function qR(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,G.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sA(n);Re("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>ER(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>ER(e.remoteStore,u)),n.onlineComponents=e}),iA.apply(this,arguments)}function sA(n){return oA.apply(this,arguments)}function oA(){return oA=(0,G.Z)(function*(n){return n.offlineComponents||(Re("FirestoreClient","Using default OfflineComponentProvider"),yield GR(n,new kR)),n.offlineComponents}),oA.apply(this,arguments)}function XE(n){return aA.apply(this,arguments)}function aA(){return aA=(0,G.Z)(function*(n){return n.onlineComponents||(Re("FirestoreClient","Using default OnlineComponentProvider"),yield qR(n,new eA)),n.onlineComponents}),aA.apply(this,arguments)}function KR(n){return sA(n).then(e=>e.persistence)}function eD(n){return sA(n).then(e=>e.localStore)}function uA(n){return XE(n).then(e=>e.remoteStore)}function cA(n){return XE(n).then(e=>e.syncEngine)}function Ag(n){return lA.apply(this,arguments)}function lA(){return lA=(0,G.Z)(function*(n){const e=yield XE(n),t=e.eventManager;return t.onListen=uk.bind(null,e.syncEngine),t.onUnlisten=ck.bind(null,e.syncEngine),t}),lA.apply(this,arguments)}function YR(n,e,t={}){const r=new Gn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,u,l,p,v){const D=new JE({next:S=>{u.enqueueAndForget(()=>CS(o,C));const F=S.docs.has(l);!F&&S.fromCache?v.reject(new Ie(se.UNAVAILABLE,"Failed to get document because the client is offline.")):F&&S.fromCache&&p&&"server"===p.source?v.reject(new Ie(se.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(S)},error:S=>v.reject(S)}),C=new AS(lh(l.path),D,{includeMetadataChanges:!0,Nu:!0});return DS(o,C)}(yield Ag(n),n.asyncQueue,e,t,r)})),r.promise}function QR(n,e,t={}){const r=new Gn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function(o,u,l,p,v){const D=new JE({next:S=>{u.enqueueAndForget(()=>CS(o,C)),S.fromCache&&"server"===p.source?v.reject(new Ie(se.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(S)},error:S=>v.reject(S)}),C=new AS(l,D,{includeMetadataChanges:!0,Nu:!0});return DS(o,C)}(yield Ag(n),n.asyncQueue,e,t,r)})),r.promise}class $k{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new rS(this,"async_queue_retry"),this.Wc=()=>{const t=qE();t&&Re("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=qE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=qE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Gn;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,G.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Sr(t))throw t;Re("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Wn("INTERNAL UNHANDLED ERROR: ",function(u){let l=u.message||"";return u.stack&&(l=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),l}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=ES.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.qc.push(o),o}zc(){this.Kc&&Qe()}verifyOperationInProgress(){}Xc(){var e=this;return(0,G.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function dA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class jk{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sn extends C_{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new $k,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||JR(this),this._firestoreClient.terminate()}}function zk(n,e){const t="object"==typeof n?n:(0,Mt.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,Mt._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,st.P0)("firestore");u&&jR(o,...u)}return o}function er(n){return n._firestoreClient||JR(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function JR(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Xx(n._databaseId,u,n._persistenceKey,(p=t).host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,p.useFetchStreams));var u,p;n._firestoreClient=new Pk(n._authCredentials,n._appCheckCredentials,n._queue,r)}function XR(n,e,t){const r=new Gn;return n.asyncQueue.enqueue((0,G.Z)(function*(){try{yield GR(n,t),yield qR(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(l=u).name?l.code===se.FAILED_PRECONDITION||l.code===se.UNIMPLEMENTED:!(typeof DOMException<"u"&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw u;ms("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var l})).then(()=>r.promise)}function eN(n){if(n._initialized||n._terminated)throw new Ie(se.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ma{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ma(Nn.fromBase64String(e))}catch(t){throw new Ie(se.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ma(Nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Au{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ie(se.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wh{constructor(e){this._methodName=e}}class tD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ie(se.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ie(se.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tt(this._lat,e._lat)||Tt(this._long,e._long)}}const Xk=/^__.*__$/;class eO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cu(e,this.data,this.fieldMask,t,this.fieldTransforms):new fg(e,this.data,t,this.fieldTransforms)}}class tN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Qe()}}class nD{constructor(e,t,r,o,u,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=l||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new nD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return sD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(nN(this.sa)&&Xk.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class tO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||E_(e)}da(e,t,r,o=!1){return new nD({sa:e,methodName:t,fa:r,path:Gt.emptyPath(),oa:!1,la:o},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Ih(n){const e=n._freezeSettings(),t=E_(n._databaseId);return new tO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rD(n,e,t,r,o,u={}){const l=n.da(u.merge||u.mergeFields?2:0,e,t,o);gA("Data must be an object, but it was:",l,r);const p=sN(r,l);let v,D;if(u.merge)v=new Yr(l.fieldMask),D=l.fieldTransforms;else if(u.mergeFields){const C=[];for(const S of u.mergeFields){const F=mA(e,S,t);if(!l.contains(F))throw new Ie(se.INVALID_ARGUMENT,`Field '${F}' is specified in your field mask but missing from your input data.`);aN(C,F)||C.push(F)}v=new Yr(C),D=l.fieldTransforms.filter(S=>v.covers(S.field))}else v=null,D=l.fieldTransforms;return new eO(new Ar(p),v,D)}class T_ extends wh{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof T_}}function rN(n,e,t){return new nD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class hA extends wh{_toFieldTransform(e){return new an(e.path,new ae)}isEqual(e){return e instanceof hA}}class nO extends wh{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rN(this,e,!0),r=this._a.map(u=>Eh(u,t)),o=new Se(r);return new an(e.path,o)}isEqual(e){return this===e}}class rO extends wh{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=rN(this,e,!0),r=this._a.map(u=>Eh(u,t)),o=new Ge(r);return new an(e.path,o)}isEqual(e){return this===e}}class iO extends wh{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new ge(e.It,b(e.It,this.wa));return new an(e.path,t)}isEqual(e){return this===e}}function fA(n,e,t,r){const o=n.da(1,e,t);gA("Data must be an object, but it was:",o,r);const u=[],l=Ar.empty();aa(r,(v,D)=>{const C=iD(e,v,t);D=(0,st.m9)(D);const S=o.ca(C);if(D instanceof T_)u.push(C);else{const F=Eh(D,S);null!=F&&(u.push(C),l.set(C,F))}});const p=new Yr(u);return new tN(l,p,o.fieldTransforms)}function pA(n,e,t,r,o,u){const l=n.da(1,e,t),p=[mA(e,r,t)],v=[o];if(u.length%2!=0)throw new Ie(se.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let F=0;F<u.length;F+=2)p.push(mA(e,u[F])),v.push(u[F+1]);const D=[],C=Ar.empty();for(let F=p.length-1;F>=0;--F)if(!aN(D,p[F])){const z=p[F];let ne=v[F];ne=(0,st.m9)(ne);const be=l.ca(z);if(ne instanceof T_)D.push(z);else{const Ee=Eh(ne,be);null!=Ee&&(D.push(z),C.set(z,Ee))}}const S=new Yr(D);return new tN(C,S,l.fieldTransforms)}function iN(n,e,t,r=!1){return Eh(t,n.da(r?4:3,e))}function Eh(n,e){if(oN(n=(0,st.m9)(n)))return gA("Unsupported field value:",e,n),sN(n,e);if(n instanceof wh)return function(t,r){if(!nN(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const l of t){let p=Eh(l,r.aa(u));null==p&&(p={nullValue:"NULL_VALUE"}),o.push(p),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,st.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return b(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=bn.fromDate(t);return{timestampValue:l_(r.It,o)}}if(t instanceof bn){const o=new bn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:l_(r.It,o)}}if(t instanceof tD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ma)return{bytesValue:mM(r.It,t._byteString)};if(t instanceof Tn){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:PT(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${YE(t)}`)}(n,e)}function sN(n,e){const t={};return _E(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):aa(n,(r,o)=>{const u=Eh(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function oN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof bn||n instanceof tD||n instanceof ma||n instanceof Tn||n instanceof wh)}function gA(n,e,t){if(!oN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=YE(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function mA(n,e,t){if((e=(0,st.m9)(e))instanceof Au)return e._internalPath;if("string"==typeof e)return iD(n,e);throw sD("Field path arguments must be of type string or ",n,!1,void 0,t)}const sO=new RegExp("[~\\*/\\[\\]]");function iD(n,e,t){if(e.search(sO)>=0)throw sD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Au(...e.split("."))._internalPath}catch{throw sD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sD(n,e,t,r,o){const u=r&&!r.isEmpty(),l=void 0!==o;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let v="";return(u||l)&&(v+=" (found",u&&(v+=` in field ${r}`),l&&(v+=` in document ${o}`),v+=")"),new Ie(se.INVALID_ARGUMENT,p+n+v)}function aN(n,e){return n.some(t=>t.isEqual(e))}class S_{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new oO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class oO extends S_{data(){return super.data()}}function oD(n,e){return"string"==typeof e?iD(n,e):e instanceof Au?e._internalPath:e._delegate._internalPath}function uN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ie(se.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class A_{}function ol(n,...e){for(const t of e)n=t._apply(n);return n}class aO extends A_{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Ih(e.firestore),r=function(o,u,l,p,v,D,C){let S;if(v.isKeyField()){if("array-contains"===D||"array-contains-any"===D)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. You can't perform '${D}' queries on documentId().`);if("in"===D||"not-in"===D){pN(C,D);const z=[];for(const ne of C)z.push(fN(p,o,ne));S={arrayValue:{values:z}}}else S=fN(p,o,C)}else"in"!==D&&"not-in"!==D&&"array-contains-any"!==D||pN(C,D),S=iN(l,"where",C,"in"===D||"not-in"===D);const F=lr.create(v,D,S);return function(z,ne){if(ne.dt()){const Ee=ME(z);if(null!==Ee&&!Ee.isEqual(ne.field))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ee.toString()}' and '${ne.field.toString()}'`);const vt=xE(z);null!==vt&&gN(0,ne.field,vt)}const be=function(Ee,vt){for(const It of Ee.filters)if(vt.indexOf(It.op)>=0)return It.op;return null}(z,function(Ee){switch(Ee){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ne.op));if(null!==be)throw new Ie(se.INVALID_ARGUMENT,be===ne.op?`Invalid query. You cannot use more than one '${ne.op.toString()}' filter.`:`Invalid query. You cannot use '${ne.op.toString()}' filters with '${be.toString()}' filters.`)}(o,F),F}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Jr(e.firestore,e.converter,function(o,u){const l=o.filters.concat([u]);return new da(o.path,o.collectionGroup,o.explicitOrderBy.slice(),l,o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class cO extends A_{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Jc(o,u);return function(p,v){if(null===xE(p)){const D=ME(p);null!==D&&gN(0,D,v.field)}}(r,l),l}(e._query,this.ma,this.pa);return new Jr(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new da(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class cN extends A_{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new Jr(e.firestore,e.converter,n_(e._query,this.Ia,this.Ta))}}class lN extends A_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hN(e,this.type,this.Ea,this.Aa);return new Jr(e.firestore,e.converter,(o=t,new da((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class dN extends A_{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=hN(e,this.type,this.Ea,this.Aa);return new Jr(e.firestore,e.converter,(o=t,new da((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function hN(n,e,t,r){if(t[0]=(0,st.m9)(t[0]),t[0]instanceof S_)return function(o,u,l,p,v){if(!p)throw new Ie(se.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const D=[];for(const C of dh(o))if(C.field.isKeyField())D.push(Iu(u,p.key));else{const S=p.data.field(C.field);if(ig(S))throw new Ie(se.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+C.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const F=C.field.canonicalString();throw new Ie(se.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${F}' (used as the orderBy) does not exist.`)}D.push(S)}return new la(D,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=Ih(n.firestore);return function(u,l,p,v,D,C){const S=u.explicitOrderBy;if(D.length>S.length)throw new Ie(se.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const F=[];for(let z=0;z<D.length;z++){const ne=D[z];if(S[z].field.isKeyField()){if("string"!=typeof ne)throw new Ie(se.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ne}`);if(!RE(u)&&-1!==ne.indexOf("/"))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ne}' contains a slash.`);const be=u.path.child($t.fromString(ne));if(!Ve.isDocumentKey(be))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${be}' is not because it contains an odd number of segments.`);const Ee=new Ve(be);F.push(Iu(l,Ee))}else{const be=iN(p,v,ne);F.push(be)}}return new la(F,C)}(n._query,n.firestore._databaseId,o,e,t,r)}}function fN(n,e,t){if("string"==typeof(t=(0,st.m9)(t))){if(""===t)throw new Ie(se.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RE(e)&&-1!==t.indexOf("/"))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child($t.fromString(t));if(!Ve.isDocumentKey(r))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Iu(n,new Ve(r))}if(t instanceof Tn)return Iu(n,t._key);throw new Ie(se.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${YE(t)}.`)}function pN(n,e){if(!Array.isArray(n)||0===n.length)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ie(se.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gN(n,e,t){if(!t.isEqual(e))throw new Ie(se.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class yA{convertValue(e,t="none"){switch(Zc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ua(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Qe()}}convertObject(e,t){const r={};return aa(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new tD(Pn(e.latitude),Pn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=IE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sh(e));default:return null}}convertTimestamp(e){const t=ho(e);return new bn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=$t.fromString(e);dt(CM(r));const o=new _u(r.get(1),r.get(3)),u=new Ve(r.popFirst(5));return o.isEqual(t)||Wn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function aD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class yO extends yA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}class Dh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xu extends S_{constructor(e,t,r,o,u,l){super(e,t,r,o,l),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new x_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class x_ extends xu{data(e={}){return super.data(e)}}class al{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Dh(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new x_(this._firestore,this._userDataWriter,r.key,r,new Dh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ie(se.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new x_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>o||3!==l.type).map(l=>{const p=new x_(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Dh(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,D=-1;return 0!==l.type&&(v=u.indexOf(l.doc.key),u=u.delete(l.doc.key)),1!==l.type&&(u=u.add(l.doc),D=u.indexOf(l.doc.key)),{type:vO(l.type),doc:p,oldIndex:v,newIndex:D}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function vO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Qe()}}function mN(n,e){return n instanceof xu&&e instanceof xu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof al&&e instanceof al&&n._firestore===e._firestore&&nA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ul extends yA{constructor(e){super(),this.firestore=e}convertBytes(e){return new ma(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Tn(this.firestore,null,t)}}function yN(n,e,t){n=zt(n,Tn);const r=zt(n.firestore,Sn),o=aD(n.converter,e,t);return xg(r,[rD(Ih(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,gn.none())])}function vN(n,e,t,...r){n=zt(n,Tn);const o=zt(n.firestore,Sn),u=Ih(o);let l;return l="string"==typeof(e=(0,st.m9)(e))||e instanceof Au?pA(u,"updateDoc",n._key,e,t,r):fA(u,"updateDoc",n._key,e),xg(o,[l.toMutation(n._key,gn.exists(!0))])}function _N(n,...e){var t,r,o;n=(0,st.m9)(n);let u={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dA(e[l])||(u=e[l],l++);const p={includeMetadataChanges:u.includeMetadataChanges};if(dA(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(o=S.complete)||void 0===o?void 0:o.bind(S)}let v,D,C;if(n instanceof Tn)D=zt(n.firestore,Sn),C=lh(n._key.path),v={next:S=>{e[l]&&e[l](vA(D,n,S))},error:e[l+1],complete:e[l+2]};else{const S=zt(n,Jr);D=zt(S.firestore,Sn),C=S._query;const F=new ul(D);v={next:z=>{e[l]&&e[l](new al(D,F,S,z))},error:e[l+1],complete:e[l+2]},uN(n._query)}return function(S,F,z,ne){const be=new JE(ne),Ee=new AS(F,be,z);return S.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return DS(yield Ag(S),Ee)})),()=>{be.bc(),S.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return CS(yield Ag(S),Ee)}))}}(er(D),C,p,v)}function xg(n,e){return function(t,r){const o=new Gn;return t.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function lk(n,e,t){return PS.apply(this,arguments)}(yield cA(t),r,o)})),o.promise}(er(n),e)}function vA(n,e,t){const r=t.docs.get(e._key),o=new ul(n);return new xu(n,o,e._key,r,new Dh(t.hasPendingWrites,t.fromCache),e.converter)}const AO={maxAttempts:5};class wN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ih(e)}set(e,t,r){this._verifyNotCommitted();const o=cl(e,this._firestore),u=aD(o.converter,t,r),l=rD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(l.toMutation(o._key,gn.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=cl(e,this._firestore);let l;return l="string"==typeof(t=(0,st.m9)(t))||t instanceof Au?pA(this._dataReader,"WriteBatch.update",u._key,t,r,o):fA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(l.toMutation(u._key,gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cl(e,this._firestore);return this._mutations=this._mutations.concat(new pg(t._key,gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ie(se.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cl(n,e){if((n=(0,st.m9)(n)).firestore!==e)throw new Ie(se.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class xO extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ih(e)}get(e){const t=cl(e,this._firestore),r=new yO(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return Qe();const u=o[0];if(u.isFoundDocument())return new S_(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new S_(this._firestore,r,t._key,null,t.converter);throw Qe()})}set(e,t,r){const o=cl(e,this._firestore),u=aD(o.converter,t,r),l=rD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,l),this}update(e,t,r,...o){const u=cl(e,this._firestore);let l;return l="string"==typeof(t=(0,st.m9)(t))||t instanceof Au?pA(this._dataReader,"Transaction.update",u._key,t,r,o):fA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,l),this}delete(e){const t=cl(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cl(e,this._firestore),r=new ul(this._firestore);return super.get(e).then(o=>new xu(this._firestore,r,t._key,o._document,new Dh(!1,!1),t.converter))}}function _A(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ie("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EN(){if(typeof Uint8Array>"u")throw new Ie("unimplemented","Uint8Arrays are not available in this environment.")}function DN(){if(!function wE(){return typeof atob<"u"}())throw new Ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){nh=Mt.SDK_VERSION,(0,Mt._registerComponent)(new ss.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),l=new Sn(new Yx(t.getProvider("auth-internal")),new fT(t.getProvider("app-check-internal")),function(p,v){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new Ie(se.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _u(p.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),(0,Mt.registerVersion)(lT,"3.7.3",n),(0,Mt.registerVersion)(lT,"3.7.3","esm2017")}();class M_{constructor(e){this._delegate=e}static fromBase64String(e){return DN(),new M_(ma.fromBase64String(e))}static fromUint8Array(e){return EN(),new M_(ma.fromUint8Array(e))}toBase64(){return DN(),this._delegate.toBase64()}toUint8Array(){return EN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wA(n){return function UO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class VO{enableIndexedDbPersistence(e,t){return function Wk(n,e){eN(n=zt(n,Sn));const t=er(n),r=n._freezeSettings(),o=new eA;return XR(t,o,new OR(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Gk(n){eN(n=zt(n,Sn));const e=er(n),t=n._freezeSettings(),r=new eA;return XR(e,r,new Tk(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function qk(n){if(n._initialized&&!n._terminated)throw new Ie(se.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gn;return n._queue.enqueueAndForgetEvenWhileRestricted((0,G.Z)(function*(){try{yield(t=(0,G.Z)(function*(r){if(!cr.C())return Promise.resolve();const o=r+"main";yield cr.delete(o)}),function(r){return t.apply(this,arguments)})(qT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class bN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof _u||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ms("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){jR(this._delegate,e,t,r)}enableNetwork(){return function Zk(n){return function kk(n){return n.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield KR(n),t=yield uA(n);return e.setNetworkEnabled(!0),function(r){const o=Be(r);return o._u.delete(0),D_(o)}(t)}))}(er(n=zt(n,Sn)))}(this._delegate)}disableNetwork(){return function Yk(n){return function Ok(n){return n.asyncQueue.enqueue((0,G.Z)(function*(){const e=yield KR(n),t=yield uA(n);return e.setNetworkEnabled(!1),(r=(0,G.Z)(function*(o){const u=Be(o);u._u.add(0),yield Ig(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(er(n=zt(n,Sn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,LR("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Kk(n){return function(e){const t=new Gn;return e.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return function pk(n,e){return US.apply(this,arguments)}(yield cA(e),t)})),t.promise}(er(n=zt(n,Sn)))}(this._delegate)}onSnapshotsInSync(e){return function SO(n,e){return function Uk(n,e){const t=new JE(e);return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return r=yield Ag(n),o=t,Be(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return r=yield Ag(n),o=t,void Be(r).Ru.delete(o);var r,o}))}}(er(n=zt(n,Sn)),dA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mg(this,HR(this._delegate,e))}catch(t){throw li(t,"collection()","Firestore.collection()")}}doc(e){try{return new ys(this,QE(this._delegate,e))}catch(t){throw li(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new di(this,function Sk(n,e){if(n=zt(n,C_),tA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ie(se.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Jr(n,null,(t=e,new da($t.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw li(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function MO(n,e,t){n=zt(n,Sn);const r=Object.assign(Object.assign({},AO),t);return function(o){if(o.maxAttempts<1)throw new Ie(se.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,l){const p=new Gn;return o.asyncQueue.enqueueAndForget((0,G.Z)(function*(){const v=yield function ZR(n){return XE(n).then(e=>e.datastore)}(o);new Nk(o.asyncQueue,v,l,u,p).run()})),p.promise}(er(n),o=>e(new xO(n,o)),r)}(this._delegate,t=>e(new CN(this,t)))}batch(){return er(this._delegate),new TN(new wN(this._delegate,e=>xg(this._delegate,e)))}loadBundle(e){return function Qk(n,e){const t=er(n=zt(n,Sn)),r=new jk;return function Vk(n,e,t,r){const o=function(u,l){let p;return p="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,D){if(v instanceof Uint8Array)return WR(v,D);if(v instanceof ArrayBuffer)return WR(new Uint8Array(v),D);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new Ak(v,l);var v}(t,E_(e));n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){!function Ck(n,e,t){const r=Be(n);var o;(o=(0,G.Z)(function*(u,l,p){try{const v=yield l.getMetadata();if(yield function(F,z){const ne=Be(F),be=xr(z.createTime);return ne.persistence.runTransaction("hasNewerBundle","readonly",Ee=>ne.Ns.getBundleMetadata(Ee,z.id)).then(Ee=>!!Ee&&Ee.createTime.compareTo(be)>=0)}(u.localStore,v))return yield l.close(),p._completeWith({taskState:"Success",documentsLoaded:(F=v).totalDocuments,bytesLoaded:F.totalBytes,totalDocuments:F.totalDocuments,totalBytes:F.totalBytes}),Promise.resolve(new Set);p._updateProgress(CR(v));const D=new ik(v,u.localStore,l.It);let C=yield l.mc();for(;C;){const F=yield D.Fu(C);F&&p._updateProgress(F),C=yield l.mc()}const S=yield D.complete();return yield Su(u,S.Lu,void 0),yield function(F,z){const ne=Be(F);return ne.persistence.runTransaction("Save bundle","readwrite",be=>ne.Ns.saveBundleMetadata(be,z))}(u.localStore,v),p._completeWith(S.progress),Promise.resolve(S.Bu)}catch(v){return ms("SyncEngine",`Loading bundle failed with ${v}`),p._failWith(v),Promise.resolve(new Set)}var F}),function(u,l,p){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield cA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Jk(n,e){return function Bk(n,e){return n.asyncQueue.enqueue((0,G.Z)(function*(){return function(t,r){const o=Be(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield eD(n),e)}))}(er(n=zt(n,Sn)),e).then(t=>t?new Jr(n,null,t.query):null)}(this._delegate,e).then(t=>t?new di(this,t):null)}}class uD extends yA{constructor(e){super(),this.firestore=e}convertBytes(e){return new M_(new ma(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ys.forKey(t,this.firestore,null)}}class CN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=Ch(e);return this._delegate.get(t).then(r=>new R_(this._firestore,new xu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Ch(e);return r?(_A("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ch(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ch(e);return this._delegate.delete(t),this}}class TN{constructor(e){this._delegate=e}set(e,t,r){const o=Ch(e);return r?(_A("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Ch(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Ch(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bh{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new x_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new N_(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=bh.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new bh(e,new uD(e),t),o.set(t,u)),u}}bh.INSTANCES=new WeakMap;class ys{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ys(t,new Tn(t._delegate,r,new Ve(e)))}static forKey(e,t,r){return new ys(t,new Tn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Mg(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mg(this.firestore,HR(this._delegate,e))}catch(t){throw li(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,st.m9)(e))instanceof Tn&&zR(this._delegate,e)}set(e,t){t=_A("DocumentReference.set",t);try{return t?yN(this._delegate,e,t):yN(this._delegate,e)}catch(r){throw li(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?vN(this._delegate,e):vN(this._delegate,e,t,...r)}catch(o){throw li(o,"updateDoc()","DocumentReference.update()")}}delete(){return function CO(n){return xg(zt(n.firestore,Sn),[new pg(n._key,gn.none())])}(this._delegate)}onSnapshot(...e){const t=SN(e),r=AN(e,o=>new R_(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return _N(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function wO(n){n=zt(n,Tn);const e=zt(n.firestore,Sn),t=er(e),r=new ul(e);return function Lk(n,e){const t=new Gn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,u,l){try{const p=yield function(v,D){const C=Be(v);return C.persistence.runTransaction("read document","readonly",S=>C.localDocuments.getDocument(S,D))}(o,u);p.isFoundDocument()?l.resolve(p):p.isNoDocument()?l.resolve(null):l.reject(new Ie(se.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const v=bg(p,`Failed to get document '${u} from cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._key).then(o=>new xu(e,r,n._key,o,new Dh(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function IO(n){n=zt(n,Tn);const e=zt(n.firestore,Sn);return YR(er(e),n._key,{source:"server"}).then(t=>vA(e,n,t))}(this._delegate):function _O(n){n=zt(n,Tn);const e=zt(n.firestore,Sn);return YR(er(e),n._key).then(t=>vA(e,n,t))}(this._delegate),t.then(r=>new R_(this.firestore,new xu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ys(this.firestore,this._delegate.withConverter(e?bh.getInstance(this.firestore,e):null))}}function li(n,e,t){return n.message=n.message.replace(e,t),n}function SN(n){for(const e of n)if("object"==typeof e&&!wA(e))return e;return{}}function AN(n,e){var t,r;let o;return o=wA(n[0])?n[0]:wA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class R_{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ys(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mN(this._delegate,e._delegate)}}class N_ extends R_{data(e){const t=this._delegate.data(e);return function fE(n,e){n||Qe()}(void 0!==t),t}}class di{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new di(this.firestore,ol(this._delegate,function uO(n,e,t){const r=e,o=oD("where",n);return new aO(o,r,t)}(e,t,r)))}catch(o){throw li(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new di(this.firestore,ol(this._delegate,function lO(n,e="asc"){const t=e,r=oD("orderBy",n);return new cO(r,t)}(e,t)))}catch(r){throw li(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new di(this.firestore,ol(this._delegate,function dO(n){return VR("limit",n),new cN("limit",n,"F")}(e)))}catch(t){throw li(t,"limit()","Query.limit()")}}limitToLast(e){try{return new di(this.firestore,ol(this._delegate,function hO(n){return VR("limitToLast",n),new cN("limitToLast",n,"L")}(e)))}catch(t){throw li(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new di(this.firestore,ol(this._delegate,function fO(...n){return new lN("startAt",n,!0)}(...e)))}catch(t){throw li(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new di(this.firestore,ol(this._delegate,function pO(...n){return new lN("startAfter",n,!1)}(...e)))}catch(t){throw li(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new di(this.firestore,ol(this._delegate,function gO(...n){return new dN("endBefore",n,!1)}(...e)))}catch(t){throw li(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new di(this.firestore,ol(this._delegate,function mO(...n){return new dN("endAt",n,!0)}(...e)))}catch(t){throw li(t,"endAt()","Query.endAt()")}}isEqual(e){return nA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function DO(n){n=zt(n,Jr);const e=zt(n.firestore,Sn),t=er(e),r=new ul(e);return function Fk(n,e){const t=new Gn;return n.asyncQueue.enqueueAndForget((0,G.Z)(function*(){return(r=(0,G.Z)(function*(o,u,l){try{const p=yield zE(o,u,!0),v=new AR(u,p.Hi),D=v.Wu(p.documents),C=v.applyChanges(D,!1);l.resolve(C.snapshot)}catch(p){const v=bg(p,`Failed to execute query '${u} against cache`);l.reject(v)}}),function(o,u,l){return r.apply(this,arguments)})(yield eD(n),e,t);var r})),t.promise}(t,n._query).then(o=>new al(e,r,n,o))}(this._delegate):"server"===e?.source?function bO(n){n=zt(n,Jr);const e=zt(n.firestore,Sn),t=er(e),r=new ul(e);return QR(t,n._query,{source:"server"}).then(o=>new al(e,r,n,o))}(this._delegate):function EO(n){n=zt(n,Jr);const e=zt(n.firestore,Sn),t=er(e),r=new ul(e);return uN(n._query),QR(t,n._query).then(o=>new al(e,r,n,o))}(this._delegate),t.then(r=>new IA(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=SN(e),r=AN(e,o=>new IA(this.firestore,new al(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return _N(this._delegate,t,r)}withConverter(e){return new di(this.firestore,this._delegate.withConverter(e?bh.getInstance(this.firestore,e):null))}}class $O{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new N_(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class IA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new di(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new N_(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new $O(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new N_(this._firestore,r))})}isEqual(e){return mN(this._delegate,e._delegate)}}class Mg extends di{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ys(this.firestore,e):null}doc(e){try{return new ys(this.firestore,void 0===e?QE(this._delegate):QE(this._delegate,e))}catch(t){throw li(t,"doc()","CollectionReference.doc()")}}add(e){return function TO(n,e){const t=zt(n.firestore,Sn),r=QE(n),o=aD(n.converter,e);return xg(t,[rD(Ih(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,gn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ys(this.firestore,t))}isEqual(e){return zR(this._delegate,e._delegate)}withConverter(e){return new Mg(this.firestore,this._delegate.withConverter(e?bh.getInstance(this.firestore,e):null))}}function Ch(n){return zt(n,Tn)}class EA{constructor(...e){this._delegate=new Au(...e)}static documentId(){return new EA(Gt.keyField().canonicalString())}isEqual(e){return(e=(0,st.m9)(e))instanceof Au&&this._delegate._internalPath.isEqual(e._internalPath)}}class Th{constructor(e){this._delegate=e}static serverTimestamp(){const e=function NO(){return new hA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Th(e)}static delete(){const e=function RO(){return new T_("deleteField")}();return e._methodName="FieldValue.delete",new Th(e)}static arrayUnion(...e){const t=function PO(...n){return new nO("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Th(t)}static arrayRemove(...e){const t=function kO(...n){return new rO("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Th(t)}static increment(e){const t=function OO(n){return new iO("increment",n)}(e);return t._methodName="FieldValue.increment",new Th(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const jO={Firestore:bN,GeoPoint:tD,Timestamp:bn,Blob:M_,Transaction:CN,WriteBatch:TN,DocumentReference:ys,DocumentSnapshot:R_,Query:di,QueryDocumentSnapshot:N_,QuerySnapshot:IA,CollectionReference:Mg,FieldPath:EA,FieldValue:Th,setLogLevel:function BO(n){!function Kx(n){mu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function zO(n){(function HO(n,e){n.INTERNAL.registerComponent(new ss.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},jO)))})(n,(e,t)=>new bN(e,t,new VO)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(FC.Z);var WO=O(6451);class GO extends Oi.x{constructor(e=1/0,t=1/0,r=qm){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:l}=this;t||(r.push(e),!o&&r.push(u.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let l=0;l<u.length&&!e.closed;l+=r?1:2)e.next(u[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const l=t.now();let p=0;for(let v=1;v<r.length&&r[v]<=l;v+=2)p=v;p&&r.splice(0,p+1)}}}var qO=O(3099);function xN(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,qO.B)({connector:()=>new GO(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function MN(n,e){return(0,Fi.m)(e)?Hn(()=>n,e):Hn(()=>n)}class Rg{constructor(e){return e}}class DA{constructor(){return(0,Mt.getApps)()}}const bA=new y.OlP("angularfire2._apps"),ZO={provide:Rg,useFactory:function KO(n){return n&&1===n.length?n[0]:new Rg((0,Mt.getApp)())},deps:[[new y.FiY,bA]]},YO={provide:DA,deps:[[new y.FiY,bA]]};function QO(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Rg(r)}}let JO=(()=>{class n{constructor(t){(0,Mt.registerVersion)("angularfire",Ld.full,"core"),(0,Mt.registerVersion)("angularfire",Ld.full,"app"),(0,Mt.registerVersion)("angular",y.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(y.Lbi))},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[ZO,YO]}),n})();function XO(n,...e){return{ngModule:JO,providers:[{provide:bA,useFactory:QO(n),multi:!0,deps:[y.R0b,y.zs3,Tc,...e]}]}}const eL=Ac(Mt.initializeApp,!0),CA=new Map,RN={activated:!1,tokenObservers:[]},tL={initialized:!1,enabled:!1};function Ur(n){return CA.get(n)||Object.assign({},RN)}function cD(){return tL}class aL{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,G.Z)(function*(){t.stop();try{t.pending=new st.BH,yield function uL(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new st.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const hi=new st.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function PN(n){if(!Ur(n).activated)throw hi.create("use-before-activation",{appName:n.name})}function AA(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,G.Z)(function*({url:n,body:e},t){var r,o;const u={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const z=yield l.getHeartbeatsHeader();z&&(u["X-Firebase-Client"]=z)}const p={method:"POST",body:JSON.stringify(e),headers:u};let v,D;try{v=yield fetch(n,p)}catch(z){throw hi.create("fetch-network-error",{originalErrorMessage:null===(r=z)||void 0===r?void 0:r.message})}if(200!==v.status)throw hi.create("fetch-status-error",{httpStatus:v.status});try{D=yield v.json()}catch(z){throw hi.create("fetch-parse-error",{originalErrorMessage:null===(o=z)||void 0===o?void 0:o.message})}const C=D.ttl.match(/^([\d.]+)(s)$/);if(!C||!C[2]||isNaN(Number(C[1])))throw hi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${D.ttl}`});const S=1e3*Number(C[1]),F=Date.now();return{token:D.token,expireTimeMillis:F+S,issuedAtTimeMillis:F}}),xA.apply(this,arguments)}function hL(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const P_="firebase-app-check-store";let hD=null;function ON(){return hD||(hD=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=o=>{n(o.target.result)},r.onerror=o=>{var u;e(hi.create("storage-open",{originalErrorMessage:null===(u=o.target.error)||void 0===u?void 0:u.message}))},r.onupgradeneeded=o=>{0===o.oldVersion&&o.target.result.createObjectStore(P_,{keyPath:"compositeKey"})}}catch(r){e(hi.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),hD)}function MA(){return MA=(0,G.Z)(function*(n,e){const r=(yield ON()).transaction(P_,"readwrite"),u=r.objectStore(P_).put({compositeKey:n,value:e});return new Promise((l,p)=>{u.onsuccess=v=>{l()},r.onerror=v=>{var D;p(hi.create("storage-set",{originalErrorMessage:null===(D=v.target.error)||void 0===D?void 0:D.message}))}})}),MA.apply(this,arguments)}const k_=new os.Yd("@firebase/app-check");function PA(n,e){return(0,st.hl)()?function mL(n,e){return function LN(n,e){return MA.apply(this,arguments)}(function UN(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{k_.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function VN(){return cD().enabled}function BN(){return OA.apply(this,arguments)}function OA(){return OA=(0,G.Z)(function*(){const n=cD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),OA.apply(this,arguments)}const EL={error:"UNKNOWN_ERROR"};function DL(n){return st.US.encodeString(JSON.stringify(n),!1)}function fD(n){return LA.apply(this,arguments)}function LA(){return LA=(0,G.Z)(function*(n,e=!1){const t=n.app;PN(t);const r=Ur(t);let u,o=r.token;if(o&&!Ng(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(Ng(v)?o=v:yield PA(t,void 0))}if(!e&&o&&Ng(o))return{token:o.token};let p,l=!1;if(VN()){r.exchangeTokenPromise||(r.exchangeTokenPromise=AA(hL(t,yield BN()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const v=yield r.exchangeTokenPromise;return yield PA(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),o=yield Ur(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?k_.warn(v.message):k_.error(v),u=v}return o?u?p=Ng(o)?{token:o.token,internalError:u}:HN(u):(p={token:o.token},r.token=o,yield PA(t,o)):p=HN(u),l&&jN(t,p),p}),LA.apply(this,arguments)}function UA(n,e){const t=Ur(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function $N(n){const{app:e}=n,t=Ur(e);let r=t.tokenRefresher;r||(r=function bL(n){const{app:e}=n;return new aL((0,G.Z)(function*(){let r;if(r=Ur(e).token?yield fD(n,!0):yield fD(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=Ur(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function jN(n,e){const t=Ur(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ng(n){return n.expireTimeMillis-Date.now()>0}function HN(n){return{token:DL(EL),error:n}}class CL{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Ur(this.app);for(const t of e)UA(this.app,t.next);return Promise.resolve()}}const QN="app-check-internal";!function VL(){(0,Mt._registerComponent)(new ss.wA("app-check",n=>function TL(n,e){return new CL(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(QN).initialize()})),(0,Mt._registerComponent)(new ss.wA(QN,n=>function SL(n){return{getToken:e=>fD(n,e),addTokenListener:e=>function FA(n,e,t,r){const{app:o}=n,u=Ur(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&Ng(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),$N(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>$N(n))}(n,"INTERNAL",e),removeTokenListener:e=>UA(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Mt.registerVersion)("@firebase/app-check","0.5.17")}();class O_{constructor(){return Xo("app-check")}}typeof window<"u"&&window,O(127);const XN=new y.OlP("angularfire2.auth.use-emulator"),eP=new y.OlP("angularfire2.auth.settings"),tP=new y.OlP("angularfire2.auth.tenant-id"),nP=new y.OlP("angularfire2.auth.langugage-code"),rP=new y.OlP("angularfire2.auth.use-device-language"),iP=new y.OlP("angularfire.auth.persistence"),sP=(n,e,t,r,o,u,l,p)=>(0,bi.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),l)for(const[D,C]of Object.entries(l))v.settings[D]=C;return p&&v.setPersistence(p),v},[t,r,o,u,l,p]);let oP=(()=>{class n{constructor(t,r,o,u,l,p,v,D,C,S,F,z){const ne=new Oi.x,be=Je(void 0).pipe((0,uu.Q)(l.outsideAngular),Hn(()=>u.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,rt.U)(()=>(0,bi.on)(t,u,r)),(0,rt.U)(Ee=>sP(Ee,u,p,D,C,S,v,F)),xN({bufferSize:1,refCount:!1}));if(ba(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Je(null);else{be.pipe(ni()).subscribe();const vt=be.pipe(Hn(pt=>pt.getRedirectResult().then(gt=>gt,()=>null)),ai,xN({bufferSize:1,refCount:!1})),It=be.pipe(Hn(pt=>new rr.y(gt=>({unsubscribe:u.runOutsideAngular(()=>pt.onAuthStateChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))})))),_t=be.pipe(Hn(pt=>new rr.y(gt=>({unsubscribe:u.runOutsideAngular(()=>pt.onIdTokenChanged(Pt=>gt.next(Pt),Pt=>gt.error(Pt),()=>gt.complete()))}))));this.authState=vt.pipe(MN(It),(0,bc.R)(l.outsideAngular),(0,uu.Q)(l.insideAngular)),this.user=vt.pipe(MN(_t),(0,bc.R)(l.outsideAngular),(0,uu.Q)(l.insideAngular)),this.idToken=this.user.pipe(Hn(pt=>pt?(0,tn.D)(pt.getIdToken()):Je(null))),this.idTokenResult=this.user.pipe(Hn(pt=>pt?(0,tn.D)(pt.getIdTokenResult()):Je(null))),this.credential=(0,WO.T)(vt,ne,this.authState.pipe(zr(pt=>!pt))).pipe((0,rt.U)(pt=>pt?.user?pt:null),(0,bc.R)(l.outsideAngular),(0,uu.Q)(l.insideAngular))}return(0,bi.pX)(this,be,u,{spy:{apply:(Ee,vt,It)=>{(Ee.startsWith("signIn")||Ee.startsWith("createUser"))&&It.then(_t=>ne.next(_t))}}})}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(bi.Dh),y.LFG(bi.xv,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Tc),y.LFG(XN,8),y.LFG(eP,8),y.LFG(tP,8),y.LFG(nP,8),y.LFG(rP,8),y.LFG(iP,8),y.LFG(O_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function aP(n,e){return function WL(n,e=Km){return new rr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function HA(n,e){return aP(n,e).pipe((0,rt.U)(t=>({payload:t,type:"query"})))}function gD(n,e){return HA(n,e).pipe($s(void 0),xc(),(0,rt.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,p)=>{const v=o.find(C=>C.doc.ref.isEqual(l.ref)),D=t?.payload.docs.find(C=>C.ref.isEqual(l.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(l.metadata)||!v&&D&&JSON.stringify(D.metadata)===JSON.stringify(l.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:l}})}),u}))}function uP(n,e,t){return gD(n,t).pipe(Ao((r,o)=>function qL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function KL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return zA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return zA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Mn(n,e=Us.y){return n=n??Hx,(0,jn.e)((t,r)=>{let o,u=!0;t.subscribe((0,ir.x)(r,l=>{const p=e(l);(u||!n(o,p))&&(u=!1,o=p,r.next(l))}))})}(),(0,rt.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function zA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function cP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class lP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=gD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,rt.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe($s(void 0),xc(),zr(([r,o])=>o.length>0||!r),(0,rt.U)(([r,o])=>o),ai)}auditTrail(e){return this.stateChanges(e).pipe(Ao((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cP(e);return uP(this.query,t,this.afs.schedulers.outsideAngular).pipe(ai)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ai)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ai)}add(e){return this.ref.add(e)}doc(e){return new dP(this.ref.doc(e),this.afs)}}class dP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=hP(r,t);return new lP(o,u,this.afs)}snapshotChanges(){return function GL(n,e){return aP(n,e).pipe($s(void 0),xc(),(0,rt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ai)}valueChanges(e={}){return this.snapshotChanges().pipe((0,rt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,tn.D)(this.ref.get(e)).pipe(ai)}}class ZL{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?gD(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),zr(t=>t.length>0),ai):gD(this.query,this.afs.schedulers.outsideAngular).pipe(ai)}auditTrail(e){return this.stateChanges(e).pipe(Ao((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=cP(e);return uP(this.query,t,this.afs.schedulers.outsideAngular).pipe(ai)}valueChanges(e={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe((0,rt.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),ai)}get(e){return(0,tn.D)(this.query.get(e)).pipe(ai)}}const YL=new y.OlP("angularfire2.enableFirestorePersistence"),QL=new y.OlP("angularfire2.firestore.persistenceSettings"),JL=new y.OlP("angularfire2.firestore.settings"),XL=new y.OlP("angularfire2.firestore.use-emulator");function hP(n,e=(t=>t)){return{query:e(n),ref:n}}let eF=(()=>{class n{constructor(t,r,o,u,l,p,v,D,C,S,F,z,ne,be,Ee,vt,It){this.schedulers=v;const _t=(0,bi.on)(t,p,r),pt=C;S&&sP(_t,p,F,ne,be,Ee,z,vt),[this.firestore,this.persistenceEnabled$]=(0,bi.cc)(`${_t.name}.firestore`,"AngularFirestore",_t.name,()=>{const gt=p.runOutsideAngular(()=>_t.firestore());if(u&&gt.settings(u),pt&&gt.useEmulator(...pt),o&&!ba(l)){const Pt=()=>{try{return(0,tn.D)(gt.enablePersistence(D||void 0).then(()=>!0,()=>!1))}catch(_r){return typeof console<"u"&&console.warn(_r),Je(!1)}};return[gt,p.runOutsideAngular(Pt)]}return[gt,Je(!1)]},[u,pt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:l}=hP(o,r),p=this.schedulers.ngZone.run(()=>u);return new lP(p,l,this)}collectionGroup(t,r){const o=r||(l=>l),u=this.firestore.collectionGroup(t);return new ZL(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new dP(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(bi.Dh),y.LFG(bi.xv,8),y.LFG(YL,8),y.LFG(JL,8),y.LFG(y.Lbi),y.LFG(y.R0b),y.LFG(Tc),y.LFG(QL,8),y.LFG(XL,8),y.LFG(oP,8),y.LFG(XN,8),y.LFG(eP,8),y.LFG(tP,8),y.LFG(nP,8),y.LFG(rP,8),y.LFG(iP,8),y.LFG(O_,8))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tF=(()=>{class n{constructor(t){this.afs=t,this.PersonasCollection=t.collection("Personas")}getPersonasFire(){return console.log(this.PersonasCollection),this.PersonasCollection.valueChanges()}}return n.\u0275fac=function(t){return new(t||n)(y.LFG(eF))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function nF(n,e){if(1&n&&(y.TgZ(0,"tr")(1,"th"),y._uU(2),y.qZA(),y.TgZ(3,"th"),y._uU(4),y.qZA(),y.TgZ(5,"th"),y._uU(6),y.qZA(),y.TgZ(7,"th"),y._uU(8),y.qZA()()),2&n){const t=e.$implicit;y.xp6(2),y.Oqu(t.cedula),y.xp6(2),y.Oqu(t.nombre),y.xp6(2),y.Oqu(t.Fecha),y.xp6(2),y.Oqu(t.Carga)}}let fP=(()=>{class n{constructor(t,r){this.router=t,this.personasService=r,this.listaPersonas=new Array}ngOnInit(){this.cargarPersonas()}cargarPersonas(){this.personas=this.personasService.getPersonasFire()}}return n.\u0275fac=function(t){return new(t||n)(y.Y36(zn),y.Y36(tF))},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-listar"]],decls:18,vars:3,consts:[[1,"styled-table"],[4,"ngFor","ngForOf"]],template:function(t,r){1&t&&(y.TgZ(0,"p"),y._uU(1,"listar works!"),y.qZA(),y._UZ(2,"br")(3,"br"),y.TgZ(4,"h1"),y._uU(5,"Lista de Personas"),y.qZA(),y.TgZ(6,"table",0)(7,"tr")(8,"th"),y._uU(9,"Cedula"),y.qZA(),y.TgZ(10,"th"),y._uU(11,"Nombre"),y.qZA(),y.TgZ(12,"th"),y._uU(13,"Fecha Nacimiento"),y.qZA(),y.TgZ(14,"th"),y._uU(15,"Cargas Familiares"),y.qZA()(),y.YNc(16,nF,9,4,"tr",1),y.ALo(17,"async"),y.qZA()),2&t&&(y.xp6(16),y.Q6J("ngForOf",y.lcZ(17,1,r.personas)))},dependencies:[Mi,Og]}),n})();const rF=[{path:"",component:fP},{path:"Personas/listar",component:fP}];let iF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({imports:[zm.forRoot(rF),zm]}),n})(),sF=(()=>{class n{constructor(){this.title="pruebaAng"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=y.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[["role","banner",1,"toolbar"],[2,"font-size","larger"]],template:function(t,r){1&t&&(y.TgZ(0,"div",0)(1,"span",1),y._uU(2,"Lista de personas"),y.qZA()(),y._UZ(3,"router-outlet"))},dependencies:[xm],styles:['[_nghost-%COMP%] {\n    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";\n    font-size: 14px;\n    color: #333;\n    box-sizing: border-box;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%] {\n    margin: 8px 0;\n  }\n\n  p[_ngcontent-%COMP%] {\n    margin: 0;\n  }\n\n  .spacer[_ngcontent-%COMP%] {\n    flex: 1;\n  }\n\n  .toolbar[_ngcontent-%COMP%] {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 60px;\n    display: flex;\n    align-items: center;\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 8px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%] {\n    height: 40px;\n    margin: 0 16px;\n  }\n\n  .toolbar[_ngcontent-%COMP%]   #twitter-logo[_ngcontent-%COMP%]:hover, .toolbar[_ngcontent-%COMP%]   #youtube-logo[_ngcontent-%COMP%]:hover {\n    opacity: 0.8;\n  }\n\n  .content[_ngcontent-%COMP%] {\n    display: flex;\n    margin: 82px auto 32px;\n    padding: 0 16px;\n    max-width: 960px;\n    flex-direction: column;\n    align-items: center;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%] {\n    height: 24px;\n    width: auto;\n  }\n\n  svg.material-icons[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 8px;\n  }\n\n  .card[_ngcontent-%COMP%]   svg.material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: #888;\n  }\n\n  .card-container[_ngcontent-%COMP%] {\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: center;\n    margin-top: 16px;\n  }\n\n  .card[_ngcontent-%COMP%] {\n    all: unset;\n    border-radius: 4px;\n    border: 1px solid #eee;\n    background-color: #fafafa;\n    height: 40px;\n    width: 200px;\n    margin: 0 8px 16px;\n    padding: 16px;\n    display: flex;\n    flex-direction: row;\n    justify-content: center;\n    align-items: center;\n    transition: all 0.2s ease-in-out;\n    line-height: 24px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(:last-child) {\n    margin-right: 0;\n  }\n\n  .card.card-small[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 168px;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card) {\n    cursor: pointer;\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover {\n    transform: translateY(-3px);\n    box-shadow: 0 4px 17px rgba(0, 0, 0, 0.35);\n  }\n\n  .card-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:not(.highlight-card):hover   .material-icons[_ngcontent-%COMP%]   path[_ngcontent-%COMP%] {\n    fill: rgb(105, 103, 103);\n  }\n\n  .card.highlight-card[_ngcontent-%COMP%] {\n    background-color: #1976d2;\n    color: white;\n    font-weight: 600;\n    border: none;\n    width: auto;\n    min-width: 30%;\n    position: relative;\n  }\n\n  .card.card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n    margin-left: 60px;\n  }\n\n  svg#rocket[_ngcontent-%COMP%] {\n    width: 80px;\n    position: absolute;\n    left: -10px;\n    top: -24px;\n  }\n\n  svg#rocket-smoke[_ngcontent-%COMP%] {\n    height: calc(100vh - 95px);\n    position: absolute;\n    top: 10px;\n    right: 180px;\n    z-index: -10;\n  }\n\n  a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:visited, a[_ngcontent-%COMP%]:hover {\n    color: #1976d2;\n    text-decoration: none;\n  }\n\n  a[_ngcontent-%COMP%]:hover {\n    color: #125699;\n  }\n\n  .terminal[_ngcontent-%COMP%] {\n    position: relative;\n    width: 80%;\n    max-width: 600px;\n    border-radius: 6px;\n    padding-top: 45px;\n    margin-top: 8px;\n    overflow: hidden;\n    background-color: rgb(15, 15, 16);\n  }\n\n  .terminal[_ngcontent-%COMP%]::before {\n    content: "\\2022 \\2022 \\2022";\n    position: absolute;\n    top: 0;\n    left: 0;\n    height: 4px;\n    background: rgb(58, 58, 58);\n    color: #c2c3c4;\n    width: 100%;\n    font-size: 2rem;\n    line-height: 0;\n    padding: 14px 0;\n    text-indent: 4px;\n  }\n\n  .terminal[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%] {\n    font-family: SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;\n    color: white;\n    padding: 0 1rem 1rem;\n    margin: 0;\n  }\n\n  .circle-link[_ngcontent-%COMP%] {\n    height: 40px;\n    width: 40px;\n    border-radius: 40px;\n    margin: 8px;\n    background-color: white;\n    border: 1px solid #eeeeee;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    cursor: pointer;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);\n    transition: 1s ease-out;\n  }\n\n  .circle-link[_ngcontent-%COMP%]:hover {\n    transform: translateY(-0.25rem);\n    box-shadow: 0px 3px 15px rgba(0, 0, 0, 0.2);\n  }\n\n  footer[_ngcontent-%COMP%] {\n    margin-top: 8px;\n    display: flex;\n    align-items: center;\n    line-height: 20px;\n  }\n\n  footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\n    display: flex;\n    align-items: center;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%] {\n    color: #24292e;\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 3px 10px;\n    border: 1px solid rgba(27,31,35,.2);\n    border-radius: 3px;\n    background-image: linear-gradient(-180deg,#fafbfc,#eff3f6 90%);\n    margin-left: 4px;\n    font-weight: 600;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]:hover {\n    background-image: linear-gradient(-180deg,#f0f3f6,#e6ebf1 90%);\n    border-color: rgba(27,31,35,.35);\n    background-position: -.5em;\n  }\n\n  .github-star-badge[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%] {\n    height: 16px;\n    width: 16px;\n    margin-right: 4px;\n  }\n\n  svg#clouds[_ngcontent-%COMP%] {\n    position: fixed;\n    bottom: -160px;\n    left: -230px;\n    z-index: -10;\n    width: 1920px;\n  }\n\n  \n  @media screen and (max-width: 767px) {\n    .card-container[_ngcontent-%COMP%]    > *[_ngcontent-%COMP%]:not(.circle-link), .terminal[_ngcontent-%COMP%] {\n      width: 100%;\n    }\n\n    .card[_ngcontent-%COMP%]:not(.highlight-card) {\n      height: 16px;\n      margin: 8px 0;\n    }\n\n    .card.highlight-card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\n      margin-left: 72px;\n    }\n\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      right: 120px;\n      transform: rotate(-5deg);\n    }\n  }\n\n  @media screen and (max-width: 575px) {\n    svg#rocket-smoke[_ngcontent-%COMP%] {\n      display: none;\n      visibility: hidden;\n    }\n  }']}),n})();const WA={firebase:{projectId:"pruebaangular-c864c",appId:"1:767102829008:web:d84a31a3d1c03737e4f9d5",storageBucket:"pruebaangular-c864c.appspot.com",apiKey:"AIzaSyCbvxDh8ZkVugUs5fkQi7QyqErCsGYwnwk",authDomain:"pruebaangular-c864c.firebaseapp.com",messagingSenderId:"767102829008"},production:!0};var oF=O(8247);class GA{constructor(e){return e}}class gP{constructor(){return Xo("auth")}}const qA=new y.OlP("angularfire2.auth-instances");function uF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new GA(r)}}const cF={provide:gP,deps:[[new y.FiY,qA]]},lF={provide:GA,useFactory:function aF(n,e){const t=Qy("auth",n,e);return t&&new GA(t)},deps:[[new y.FiY,qA],Rg]};let dF=(()=>{class n{constructor(){(0,Mt.registerVersion)("angularfire",Ld.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[lF,cF]}),n})();function hF(n,...e){return{ngModule:dF,providers:[{provide:qA,useFactory:uF(n),multi:!0,deps:[y.R0b,y.zs3,Tc,DA,[new y.FiY,O_],...e]}]}}const fF=Ac(oF.n,!0);class KA{constructor(e){return e}}const mP="firestore",ZA=new y.OlP("angularfire2.firestore-instances");function mF(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new KA(r)}}const yF={provide:class pF{constructor(){return Xo(mP)}},deps:[[new y.FiY,ZA]]},vF={provide:KA,useFactory:function gF(n,e){const t=Qy(mP,n,e);return t&&new KA(t)},deps:[[new y.FiY,ZA],Rg]};let _F=(()=>{class n{constructor(){(0,Mt.registerVersion)("angularfire",Ld.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n}),n.\u0275inj=y.cJS({providers:[vF,yF]}),n})();function wF(n,...e){return{ngModule:_F,providers:[{provide:ZA,useFactory:mF(n),multi:!0,deps:[y.R0b,y.zs3,Tc,DA,[new y.FiY,gP],[new y.FiY,O_],...e]}]}}const IF=Ac(zk,!0);let EF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=y.oAB({type:n,bootstrap:[sF]}),n.\u0275inj=y.cJS({providers:[{provide:bi.Dh,useValue:WA.firebase}],imports:[Eo,iF,XO(()=>eL(WA.firebase)),hF(()=>fF()),wF(()=>IF())]}),n})();WA.production&&(0,y.G48)(),Oa().bootstrapModule(EF).catch(n=>console.error(n))},127:(lt,Te,O)=>{O.d(Te,{Z:()=>y.Z});var y=O(3942);y.Z.registerVersion("firebase","9.14.0","app-compat")},5881:(lt,Te,O)=>{O.r(Te);var y=O(5861),U=O(3942),P=O(8247),oe=O(2090),Ce=(O(9681),O(1877),O(4859));function fe(){return window}function j(){return(j=(0,y.Z)(function*(k,x,N){var Q;const{BuildInfo:De}=fe();(0,P.ap)(x.sessionId,"AuthEvent did not contain a session ID");const qe=yield ue(x.sessionId),Ye={};return(0,P.aq)()?Ye.ibi=De.packageName:(0,P.ar)()?Ye.apn=De.packageName:(0,P.as)(k,"operation-not-supported-in-this-environment"),De.displayName&&(Ye.appDisplayName=De.displayName),Ye.sessionId=qe,(0,P.at)(k,N,x.type,void 0,null!==(Q=x.eventId)&&void 0!==Q?Q:void 0,Ye)})).apply(this,arguments)}function Oe(){return(Oe=(0,y.Z)(function*(k){const{BuildInfo:x}=fe(),N={};(0,P.aq)()?N.iosBundleId=x.packageName:(0,P.ar)()?N.androidPackageName=x.packageName:(0,P.as)(k,"operation-not-supported-in-this-environment"),yield(0,P.au)(k,N)})).apply(this,arguments)}function He(){return(He=(0,y.Z)(function*(k,x,N){const{cordova:Q}=fe();let De=()=>{};try{yield new Promise((qe,Ye)=>{let he=null;function Ae(){var At;qe();const Yt=null===(At=Q.plugins.browsertab)||void 0===At?void 0:At.close;"function"==typeof Yt&&Yt(),"function"==typeof N?.close&&N.close()}function wt(){he||(he=window.setTimeout(()=>{Ye((0,P.aw)(k,"redirect-cancelled-by-user"))},2e3))}function Zt(){"visible"===document?.visibilityState&&wt()}x.addPassiveListener(Ae),document.addEventListener("resume",wt,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",Zt,!1),De=()=>{x.removePassiveListener(Ae),document.removeEventListener("resume",wt,!1),document.removeEventListener("visibilitychange",Zt,!1),he&&window.clearTimeout(he)}})}finally{De()}})).apply(this,arguments)}function ue(k){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,y.Z)(function*(k){const x=Ze(k),N=yield crypto.subtle.digest("SHA-256",x);return Array.from(new Uint8Array(N)).map(De=>De.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ze(k){if((0,P.ap)(/[0-9a-zA-Z]+/.test(k),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(k);const x=new ArrayBuffer(k.length),N=new Uint8Array(x);for(let Q=0;Q<k.length;Q++)N[Q]=k.charCodeAt(Q);return N}class ve extends P.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(x=>{this.resolveInialized=x})}addPassiveListener(x){this.passiveListeners.add(x)}removePassiveListener(x){this.passiveListeners.delete(x)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(x){return this.resolveInialized(),this.passiveListeners.forEach(N=>N(x)),super.onEvent(x)}initialized(){var x=this;return(0,y.Z)(function*(){yield x.initPromise})()}}function J(k){return ee.apply(this,arguments)}function ee(){return(ee=(0,y.Z)(function*(k){const x=yield q()._get(ie(k));return x&&(yield q()._remove(ie(k))),x})).apply(this,arguments)}function W(){const k=[],x="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let N=0;N<20;N++){const Q=Math.floor(Math.random()*x.length);k.push(x.charAt(Q))}return k.join("")}function q(){return(0,P.az)(P.b)}function ie(k){return(0,P.aA)("authEvent",k.config.apiKey,k.name)}function Me(k){if(!k?.includes("?"))return{};const[x,...N]=k.split("?");return(0,oe.zd)(N.join("?"))}function Fe(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.aw)("no-auth-event")}}function Ot(){var k;return(null===(k=self?.location)||void 0===k?void 0:k.protocol)||null}function wr(k=(0,oe.z$)()){return!("file:"!==Ot()&&"ionic:"!==Ot()&&"capacitor:"!==Ot()||!k.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ai(){try{const k=self.localStorage,x=P.aI();if(k)return k.setItem(x,"1"),k.removeItem(x),!function qi(k=(0,oe.z$)()){return function Gi(){return(0,oe.w1)()&&11===document?.documentMode}()||function Dn(k=(0,oe.z$)()){return/Edge\/\d+/.test(k)}(k)}()||(0,oe.hl)()}catch{return Ir()&&(0,oe.hl)()}return!1}function Ir(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Er(){return(function St(){return"http:"===Ot()||"https:"===Ot()}()||(0,oe.ru)()||wr())&&!function fi(){return(0,oe.b$)()||(0,oe.UG)()}()&&Ai()&&!Ir()}function xi(){return wr()&&typeof document<"u"}function ze(){return(ze=(0,y.Z)(function*(){return!!xi()&&new Promise(k=>{const x=setTimeout(()=>{k(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(x),k(!0)})})})).apply(this,arguments)}const Un={LOCAL:"local",NONE:"none",SESSION:"session"},dn=P.ax,Nr="persistence";function mn(k){return yn.apply(this,arguments)}function yn(){return(yn=(0,y.Z)(function*(k){yield k._initializationPromise;const x=tt(),N=P.aA(Nr,k.config.apiKey,k.name);x&&x.setItem(N,k._getPersistence())})).apply(this,arguments)}function tt(){var k;try{return(null===(k=function qn(){return typeof window<"u"?window:null}())||void 0===k?void 0:k.sessionStorage)||null}catch{return null}}const nt=P.ax;class Dt{constructor(){this.browserResolver=P.az(P.k),this.cordovaResolver=P.az(class jt{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(x){var N=this;return(0,y.Z)(function*(){const Q=x._key();let De=N.eventManagers.get(Q);return De||(De=new ve(x),N.eventManagers.set(Q,De),N.attachCallbackListeners(x,De)),De})()}_openPopup(x){(0,P.as)(x,"operation-not-supported-in-this-environment")}_openRedirect(x,N,Q,De){var qe=this;return(0,y.Z)(function*(){!function re(k){var x,N,Q,De,qe,Ye,he,Ae,wt,Zt;const At=fe();(0,P.ax)("function"==typeof(null===(x=At?.universalLinks)||void 0===x?void 0:x.subscribe),k,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.ax)(typeof(null===(N=At?.BuildInfo)||void 0===N?void 0:N.packageName)<"u",k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.ax)("function"==typeof(null===(qe=null===(De=null===(Q=At?.cordova)||void 0===Q?void 0:Q.plugins)||void 0===De?void 0:De.browsertab)||void 0===qe?void 0:qe.openUrl),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Ae=null===(he=null===(Ye=At?.cordova)||void 0===Ye?void 0:Ye.plugins)||void 0===he?void 0:he.browsertab)||void 0===Ae?void 0:Ae.isAvailable),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.ax)("function"==typeof(null===(Zt=null===(wt=At?.cordova)||void 0===wt?void 0:wt.InAppBrowser)||void 0===Zt?void 0:Zt.open),k,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(x);const Ye=yield qe._initialize(x);yield Ye.initialized(),Ye.resetRedirect(),(0,P.aD)(),yield qe._originValidation(x);const he=function le(k,x,N=null){return{type:x,eventId:N,urlResponse:null,sessionId:W(),postBody:null,tenantId:k.tenantId,error:(0,P.aw)(k,"no-auth-event")}}(x,Q,De);yield function Le(k,x){return q()._set(ie(k),x)}(x,he);const Ae=yield function $(k,x,N){return j.apply(this,arguments)}(x,he,N),wt=yield function ke(k){const{cordova:x}=fe();return new Promise(N=>{x.plugins.browsertab.isAvailable(Q=>{let De=null;Q?x.plugins.browsertab.openUrl(k):De=x.InAppBrowser.open(k,(0,P.av)()?"_blank":"_system","location=yes"),N(De)})})}(Ae);return function ye(k,x,N){return He.apply(this,arguments)}(x,Ye,wt)})()}_isIframeWebStorageSupported(x,N){throw new Error("Method not implemented.")}_originValidation(x){const N=x._key();return this.originValidationPromises[N]||(this.originValidationPromises[N]=function K(k){return Oe.apply(this,arguments)}(x)),this.originValidationPromises[N]}attachCallbackListeners(x,N){const{universalLinks:Q,handleOpenURL:De,BuildInfo:qe}=fe(),Ye=setTimeout((0,y.Z)(function*(){yield J(x),N.onEvent(Fe())}),500),he=function(){var Zt=(0,y.Z)(function*(At){clearTimeout(Ye);const Yt=yield J(x);let gi=null;Yt&&At?.url&&(gi=function ce(k,x){var N,Q;const De=function xe(k){const x=Me(k),N=x.link?decodeURIComponent(x.link):void 0,Q=Me(N).link,De=x.deep_link_id?decodeURIComponent(x.deep_link_id):void 0;return Me(De).link||De||Q||N||k}(x);if(De.includes("/__/auth/callback")){const qe=Me(De),Ye=qe.firebaseError?function X(k){try{return JSON.parse(k)}catch{return null}}(decodeURIComponent(qe.firebaseError)):null,he=null===(Q=null===(N=Ye?.code)||void 0===N?void 0:N.split("auth/"))||void 0===Q?void 0:Q[1],Ae=he?(0,P.aw)(he):null;return Ae?{type:k.type,eventId:k.eventId,tenantId:k.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:k.type,eventId:k.eventId,tenantId:k.tenantId,sessionId:k.sessionId,urlResponse:De,postBody:null}}return null}(Yt,At.url)),N.onEvent(gi||Fe())});return function(Yt){return Zt.apply(this,arguments)}}();typeof Q<"u"&&"function"==typeof Q.subscribe&&Q.subscribe(null,he);const Ae=De,wt=`${qe.packageName.toLowerCase()}://`;fe().handleOpenURL=function(){var Zt=(0,y.Z)(function*(At){if(At.toLowerCase().startsWith(wt)&&he({url:At}),"function"==typeof Ae)try{Ae(At)}catch(Yt){console.error(Yt)}});return function(At){return Zt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aB,this._overrideRedirectResult=P.aC}_initialize(x){var N=this;return(0,y.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._initialize(x)})()}_openPopup(x,N,Q,De){var qe=this;return(0,y.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openPopup(x,N,Q,De)})()}_openRedirect(x,N,Q,De){var qe=this;return(0,y.Z)(function*(){return yield qe.selectUnderlyingResolver(),qe.assertedUnderlyingResolver._openRedirect(x,N,Q,De)})()}_isIframeWebStorageSupported(x,N){this.assertedUnderlyingResolver._isIframeWebStorageSupported(x,N)}_originValidation(x){return this.assertedUnderlyingResolver._originValidation(x)}get _shouldInitProactively(){return xi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return nt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var x=this;return(0,y.Z)(function*(){if(x.underlyingResolver)return;const N=yield function vs(){return ze.apply(this,arguments)}();x.underlyingResolver=N?x.cordovaResolver:x.browserResolver})()}}function Pr(k){return k.unwrap()}function Dr(k){return br(k)}function br(k){const{_tokenResponse:x}=k instanceof oe.ZR?k.customData:k;if(!x)return null;if(!(k instanceof oe.ZR)&&"temporaryProof"in x&&"phoneNumber"in x)return P.P.credentialFromResult(k);const N=x.providerId;if(!N||N===P.o.PASSWORD)return null;let Q;switch(N){case P.o.GOOGLE:Q=P.Q;break;case P.o.FACEBOOK:Q=P.N;break;case P.o.GITHUB:Q=P.T;break;case P.o.TWITTER:Q=P.W;break;default:const{oauthIdToken:De,oauthAccessToken:qe,oauthTokenSecret:Ye,pendingToken:he,nonce:Ae}=x;return qe||Ye||De||he?he?N.startsWith("saml.")?P.aL._create(N,he):P.J._fromParams({providerId:N,signInMethod:N,pendingToken:he,idToken:De,accessToken:qe}):new P.U(N).credential({idToken:De,accessToken:qe,rawNonce:Ae}):null}return k instanceof oe.ZR?Q.credentialFromError(k):Q.credentialFromResult(k)}function bt(k,x){return x.catch(N=>{throw N instanceof oe.ZR&&function yt(k,x){var N,Q;const De=null===(N=x.customData)||void 0===N?void 0:N._tokenResponse;if("auth/multi-factor-auth-required"===(null===(Q=x)||void 0===Q?void 0:Q.code))x.resolver=new tr(k,P.an(k,x));else if(De){const qe=br(x),Ye=x;qe&&(Ye.credential=qe,Ye.tenantId=De.tenantId||void 0,Ye.email=De.email||void 0,Ye.phoneNumber=De.phoneNumber||void 0)}}(k,N),N}).then(N=>{const De=N.user;return{operationType:N.operationType,credential:Dr(N),additionalUserInfo:P.al(N),user:In.getOrCreate(De)}})}function pi(k,x){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,y.Z)(function*(k,x){const N=yield x;return{verificationId:N.verificationId,confirm:Q=>bt(k,N.confirm(Q))}})).apply(this,arguments)}class tr{constructor(x,N){this.resolver=N,this.auth=function Kn(k){return k.wrapped()}(x)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(x){return bt(Pr(this.auth),this.resolver.resolveSignIn(x))}}class In{constructor(x){this._delegate=x,this.multiFactor=P.ao(x)}static getOrCreate(x){return In.USER_MAP.has(x)||In.USER_MAP.set(x,new In(x)),In.USER_MAP.get(x)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(x){return this._delegate.getIdTokenResult(x)}getIdToken(x){return this._delegate.getIdToken(x)}linkAndRetrieveDataWithCredential(x){return this.linkWithCredential(x)}linkWithCredential(x){var N=this;return(0,y.Z)(function*(){return bt(N.auth,P.Z(N._delegate,x))})()}linkWithPhoneNumber(x,N){var Q=this;return(0,y.Z)(function*(){return pi(Q.auth,P.l(Q._delegate,x,N))})()}linkWithPopup(x){var N=this;return(0,y.Z)(function*(){return bt(N.auth,P.d(N._delegate,x,Dt))})()}linkWithRedirect(x){var N=this;return(0,y.Z)(function*(){return yield mn(P.aE(N.auth)),P.g(N._delegate,x,Dt)})()}reauthenticateAndRetrieveDataWithCredential(x){return this.reauthenticateWithCredential(x)}reauthenticateWithCredential(x){var N=this;return(0,y.Z)(function*(){return bt(N.auth,P._(N._delegate,x))})()}reauthenticateWithPhoneNumber(x,N){return pi(this.auth,P.r(this._delegate,x,N))}reauthenticateWithPopup(x){return bt(this.auth,P.e(this._delegate,x,Dt))}reauthenticateWithRedirect(x){var N=this;return(0,y.Z)(function*(){return yield mn(P.aE(N.auth)),P.h(N._delegate,x,Dt)})()}sendEmailVerification(x){return P.ab(this._delegate,x)}unlink(x){var N=this;return(0,y.Z)(function*(){return yield P.ak(N._delegate,x),N})()}updateEmail(x){return P.ag(this._delegate,x)}updatePassword(x){return P.ah(this._delegate,x)}updatePhoneNumber(x){return P.u(this._delegate,x)}updateProfile(x){return P.af(this._delegate,x)}verifyBeforeUpdateEmail(x,N){return P.ac(this._delegate,x,N)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}In.USER_MAP=new WeakMap;const je=P.ax;let pe=(()=>{class k{constructor(N,Q){if(this.app=N,Q.isInitialized())return this._delegate=Q.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:De}=N.options;je(De,"invalid-api-key",{appName:N.name}),je(De,"invalid-api-key",{appName:N.name});const qe=typeof window<"u"?Dt:void 0;this._delegate=Q.initialize({options:{persistence:ut(De,N.name),popupRedirectResolver:qe}}),this._delegate._updateErrorMap(P.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?In.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(N){this._delegate.languageCode=N}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(N){this._delegate.tenantId=N}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(N,Q){P.G(this._delegate,N,Q)}applyActionCode(N){return P.a2(this._delegate,N)}checkActionCode(N){return P.a3(this._delegate,N)}confirmPasswordReset(N,Q){return P.a1(this._delegate,N,Q)}createUserWithEmailAndPassword(N,Q){var De=this;return(0,y.Z)(function*(){return bt(De._delegate,P.a5(De._delegate,N,Q))})()}fetchProvidersForEmail(N){return this.fetchSignInMethodsForEmail(N)}fetchSignInMethodsForEmail(N){return P.aa(this._delegate,N)}isSignInWithEmailLink(N){return P.a8(this._delegate,N)}getRedirectResult(){var N=this;return(0,y.Z)(function*(){je(Er(),N._delegate,"operation-not-supported-in-this-environment");const Q=yield P.j(N._delegate,Dt);return Q?bt(N._delegate,Promise.resolve(Q)):{credential:null,user:null}})()}addFrameworkForLogging(N){!function Jt(k,x){(0,P.aE)(k)._logFramework(x)}(this._delegate,N)}onAuthStateChanged(N,Q,De){const{next:qe,error:Ye,complete:he}=We(N,Q,De);return this._delegate.onAuthStateChanged(qe,Ye,he)}onIdTokenChanged(N,Q,De){const{next:qe,error:Ye,complete:he}=We(N,Q,De);return this._delegate.onIdTokenChanged(qe,Ye,he)}sendSignInLinkToEmail(N,Q){return P.a7(this._delegate,N,Q)}sendPasswordResetEmail(N,Q){return P.a0(this._delegate,N,Q||void 0)}setPersistence(N){var Q=this;return(0,y.Z)(function*(){let De;switch(function ya(k,x){dn(Object.values(Un).includes(x),k,"invalid-persistence-type"),(0,oe.b$)()?dn(x!==Un.SESSION,k,"unsupported-persistence-type"):(0,oe.UG)()?dn(x===Un.NONE,k,"unsupported-persistence-type"):Ir()?dn(x===Un.NONE||x===Un.LOCAL&&(0,oe.hl)(),k,"unsupported-persistence-type"):dn(x===Un.NONE||Ai(),k,"unsupported-persistence-type")}(Q._delegate,N),N){case Un.SESSION:De=P.a;break;case Un.LOCAL:De=(yield P.az(P.i)._isAvailable())?P.i:P.b;break;case Un.NONE:De=P.L;break;default:return P.as("argument-error",{appName:Q._delegate.name})}return Q._delegate.setPersistence(De)})()}signInAndRetrieveDataWithCredential(N){return this.signInWithCredential(N)}signInAnonymously(){return bt(this._delegate,P.X(this._delegate))}signInWithCredential(N){return bt(this._delegate,P.Y(this._delegate,N))}signInWithCustomToken(N){return bt(this._delegate,P.$(this._delegate,N))}signInWithEmailAndPassword(N,Q){return bt(this._delegate,P.a6(this._delegate,N,Q))}signInWithEmailLink(N,Q){return bt(this._delegate,P.a9(this._delegate,N,Q))}signInWithPhoneNumber(N,Q){return pi(this._delegate,P.s(this._delegate,N,Q))}signInWithPopup(N){var Q=this;return(0,y.Z)(function*(){return je(Er(),Q._delegate,"operation-not-supported-in-this-environment"),bt(Q._delegate,P.c(Q._delegate,N,Dt))})()}signInWithRedirect(N){var Q=this;return(0,y.Z)(function*(){return je(Er(),Q._delegate,"operation-not-supported-in-this-environment"),yield mn(Q._delegate),P.f(Q._delegate,N,Dt)})()}updateCurrentUser(N){return this._delegate.updateCurrentUser(N)}verifyPasswordResetCode(N){return P.a4(this._delegate,N)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return k.Persistence=Un,k})();function We(k,x,N){let Q=k;"function"!=typeof k&&({next:Q,error:x,complete:N}=k);const De=Q;return{next:Ye=>De(Ye&&In.getOrCreate(Ye)),error:x,complete:N}}function ut(k,x){const N=function nn(k,x){const N=tt();if(!N)return[];const Q=P.aA(Nr,k,x);switch(N.getItem(Q)){case Un.NONE:return[P.L];case Un.LOCAL:return[P.i,P.a];case Un.SESSION:return[P.a];default:return[]}}(k,x);if(typeof self<"u"&&!N.includes(P.i)&&N.push(P.i),typeof window<"u")for(const Q of[P.b,P.a])N.includes(Q)||N.push(Q);return N.includes(P.L)||N.push(P.L),N}class ht{constructor(){this.providerId="phone",this._delegate=new P.P(Pr(U.Z.auth()))}static credential(x,N){return P.P.credential(x,N)}verifyPhoneNumber(x,N){return this._delegate.verifyPhoneNumber(x,N)}unwrap(){return this._delegate}}ht.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,ht.PROVIDER_ID=P.P.PROVIDER_ID;const Bt=P.ax;class V{constructor(x,N,Q=U.Z.app()){var De;Bt(null===(De=Q.options)||void 0===De?void 0:De.apiKey,"invalid-api-key",{appName:Q.name}),this._delegate=new P.R(x,N,Q.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function H(k){k.INTERNAL.registerComponent(new Ce.wA("auth-compat",x=>{const N=x.getProvider("app-compat").getImmediate(),Q=x.getProvider("auth");return new pe(N,Q)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.M,FacebookAuthProvider:P.N,GithubAuthProvider:P.T,GoogleAuthProvider:P.Q,OAuthProvider:P.U,SAMLAuthProvider:P.V,PhoneAuthProvider:ht,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:V,TwitterAuthProvider:P.W,Auth:pe,AuthCredential:P.H,Error:oe.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),k.registerVersion("@firebase/auth-compat","0.2.24")}(U.Z)},9751:(lt,Te,O)=>{O.d(Te,{y:()=>fe});var y=O(2961),U=O(727),P=O(8822),oe=O(9635),we=O(2416),me=O(576),Ce=O(2806);let fe=(()=>{class K{constructor(ke){ke&&(this._subscribe=ke)}lift(ke){const ye=new K;return ye.source=this,ye.operator=ke,ye}subscribe(ke,ye,He){const re=function j(K){return K&&K instanceof y.Lv||function $(K){return K&&(0,me.m)(K.next)&&(0,me.m)(K.error)&&(0,me.m)(K.complete)}(K)&&(0,U.Nn)(K)}(ke)?ke:new y.Hp(ke,ye,He);return(0,Ce.x)(()=>{const{operator:ue,source:Ke}=this;re.add(ue?ue.call(re,Ke):Ke?this._subscribe(re):this._trySubscribe(re))}),re}_trySubscribe(ke){try{return this._subscribe(ke)}catch(ye){ke.error(ye)}}forEach(ke,ye){return new(ye=Ne(ye))((He,re)=>{const ue=new y.Hp({next:Ke=>{try{ke(Ke)}catch(Ze){re(Ze),ue.unsubscribe()}},error:re,complete:He});this.subscribe(ue)})}_subscribe(ke){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(ke)}[P.L](){return this}pipe(...ke){return(0,oe.U)(ke)(this)}toPromise(ke){return new(ke=Ne(ke))((ye,He)=>{let re;this.subscribe(ue=>re=ue,ue=>He(ue),()=>ye(re))})}}return K.create=Oe=>new K(Oe),K})();function Ne(K){var Oe;return null!==(Oe=K??we.v.Promise)&&void 0!==Oe?Oe:Promise}},7579:(lt,Te,O)=>{O.d(Te,{x:()=>Ce});var y=O(9751),U=O(727);const oe=(0,O(3888).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=O(8737),me=O(2806);let Ce=(()=>{class Ne extends y.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(j){const K=new fe(this,this);return K.operator=j,K}_throwIfClosed(){if(this.closed)throw new oe}next(j){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(j)}})}error(j){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=j;const{observers:K}=this;for(;K.length;)K.shift().error(j)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:j}=this;for(;j.length;)j.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var j;return(null===(j=this.observers)||void 0===j?void 0:j.length)>0}_trySubscribe(j){return this._throwIfClosed(),super._trySubscribe(j)}_subscribe(j){return this._throwIfClosed(),this._checkFinalizedStatuses(j),this._innerSubscribe(j)}_innerSubscribe(j){const{hasError:K,isStopped:Oe,observers:ke}=this;return K||Oe?U.Lc:(this.currentObservers=null,ke.push(j),new U.w0(()=>{this.currentObservers=null,(0,we.P)(ke,j)}))}_checkFinalizedStatuses(j){const{hasError:K,thrownError:Oe,isStopped:ke}=this;K?j.error(Oe):ke&&j.complete()}asObservable(){const j=new y.y;return j.source=this,j}}return Ne.create=($,j)=>new fe($,j),Ne})();class fe extends Ce{constructor($,j){super(),this.destination=$,this.source=j}next($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.next)||void 0===K||K.call(j,$)}error($){var j,K;null===(K=null===(j=this.destination)||void 0===j?void 0:j.error)||void 0===K||K.call(j,$)}complete(){var $,j;null===(j=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===j||j.call($)}_subscribe($){var j,K;return null!==(K=null===(j=this.source)||void 0===j?void 0:j.subscribe($))&&void 0!==K?K:U.Lc}}},2961:(lt,Te,O)=>{O.d(Te,{Hp:()=>He,Lv:()=>K});var y=O(576),U=O(727),P=O(2416),oe=O(7849);function we(){}const me=Ne("C",void 0,void 0);function Ne(Pe,ve,le){return{kind:Pe,value:ve,error:le}}var $=O(3410),j=O(2806);class K extends U.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,U.Nn)(ve)&&ve.add(this)):this.destination=Ze}static create(ve,le,Le){return new He(ve,le,Le)}next(ve){this.isStopped?Ke(function fe(Pe){return Ne("N",Pe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?Ke(function Ce(Pe){return Ne("E",void 0,Pe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?Ke(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Oe=Function.prototype.bind;function ke(Pe,ve){return Oe.call(Pe,ve)}class ye{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:le}=this;if(le.next)try{le.next(ve)}catch(Le){re(Le)}}error(ve){const{partialObserver:le}=this;if(le.error)try{le.error(ve)}catch(Le){re(Le)}else re(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(le){re(le)}}}class He extends K{constructor(ve,le,Le){let J;if(super(),(0,y.m)(ve)||!ve)J={next:ve??void 0,error:le??void 0,complete:Le??void 0};else{let ee;this&&P.v.useDeprecatedNextContext?(ee=Object.create(ve),ee.unsubscribe=()=>this.unsubscribe(),J={next:ve.next&&ke(ve.next,ee),error:ve.error&&ke(ve.error,ee),complete:ve.complete&&ke(ve.complete,ee)}):J=ve}this.destination=new ye(J)}}function re(Pe){P.v.useDeprecatedSynchronousErrorHandling?(0,j.O)(Pe):(0,oe.h)(Pe)}function Ke(Pe,ve){const{onStoppedNotification:le}=P.v;le&&$.z.setTimeout(()=>le(Pe,ve))}const Ze={closed:!0,next:we,error:function ue(Pe){throw Pe},complete:we}},727:(lt,Te,O)=>{O.d(Te,{Lc:()=>me,w0:()=>we,Nn:()=>Ce});var y=O(576);const P=(0,O(3888).d)(Ne=>function(j){Ne(this),this.message=j?`${j.length} errors occurred during unsubscription:\n${j.map((K,Oe)=>`${Oe+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=j});var oe=O(8737);class we{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:j}=this;if(j)if(this._parentage=null,Array.isArray(j))for(const ke of j)ke.remove(this);else j.remove(this);const{initialTeardown:K}=this;if((0,y.m)(K))try{K()}catch(ke){$=ke instanceof P?ke.errors:[ke]}const{_finalizers:Oe}=this;if(Oe){this._finalizers=null;for(const ke of Oe)try{fe(ke)}catch(ye){$=$??[],ye instanceof P?$=[...$,...ye.errors]:$.push(ye)}}if($)throw new P($)}}add($){var j;if($&&$!==this)if(this.closed)fe($);else{if($ instanceof we){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(j=this._finalizers)&&void 0!==j?j:[]).push($)}}_hasParent($){const{_parentage:j}=this;return j===$||Array.isArray(j)&&j.includes($)}_addParent($){const{_parentage:j}=this;this._parentage=Array.isArray(j)?(j.push($),j):j?[j,$]:$}_removeParent($){const{_parentage:j}=this;j===$?this._parentage=null:Array.isArray(j)&&(0,oe.P)(j,$)}remove($){const{_finalizers:j}=this;j&&(0,oe.P)(j,$),$ instanceof we&&$._removeParent(this)}}we.EMPTY=(()=>{const Ne=new we;return Ne.closed=!0,Ne})();const me=we.EMPTY;function Ce(Ne){return Ne instanceof we||Ne&&"closed"in Ne&&(0,y.m)(Ne.remove)&&(0,y.m)(Ne.add)&&(0,y.m)(Ne.unsubscribe)}function fe(Ne){(0,y.m)(Ne)?Ne():Ne.unsubscribe()}},2416:(lt,Te,O)=>{O.d(Te,{v:()=>y});const y={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Te,O)=>{O.d(Te,{E:()=>U});const U=new(O(9751).y)(we=>we.complete())},8996:(lt,Te,O)=>{O.d(Te,{D:()=>ve});var y=O(8421),U=O(5363),P=O(9468),me=O(9751),fe=O(2202),Ne=O(576),$=O(9672);function K(le,Le){if(!le)throw new Error("Iterable cannot be null");return new me.y(J=>{(0,$.f)(J,Le,()=>{const ee=le[Symbol.asyncIterator]();(0,$.f)(J,Le,()=>{ee.next().then(ce=>{ce.done?J.complete():J.next(ce.value)})},0,!0)})})}var Oe=O(3670),ke=O(8239),ye=O(1144),He=O(6495),re=O(2206),ue=O(4532),Ke=O(3260);function ve(le,Le){return Le?function Pe(le,Le){if(null!=le){if((0,Oe.c)(le))return function oe(le,Le){return(0,y.Xf)(le).pipe((0,P.R)(Le),(0,U.Q)(Le))}(le,Le);if((0,ye.z)(le))return function Ce(le,Le){return new me.y(J=>{let ee=0;return Le.schedule(function(){ee===le.length?J.complete():(J.next(le[ee++]),J.closed||this.schedule())})})}(le,Le);if((0,ke.t)(le))return function we(le,Le){return(0,y.Xf)(le).pipe((0,P.R)(Le),(0,U.Q)(Le))}(le,Le);if((0,re.D)(le))return K(le,Le);if((0,He.T)(le))return function j(le,Le){return new me.y(J=>{let ee;return(0,$.f)(J,Le,()=>{ee=le[fe.h](),(0,$.f)(J,Le,()=>{let ce,W;try{({value:ce,done:W}=ee.next())}catch(q){return void J.error(q)}W?J.complete():J.next(ce)},0,!0)}),()=>(0,Ne.m)(ee?.return)&&ee.return()})}(le,Le);if((0,Ke.L)(le))return function Ze(le,Le){return K((0,Ke.Q)(le),Le)}(le,Le)}throw(0,ue.z)(le)}(le,Le):(0,y.Xf)(le)}},8421:(lt,Te,O)=>{O.d(Te,{Xf:()=>Oe});var y=O(655),U=O(1144),P=O(8239),oe=O(9751),we=O(3670),me=O(2206),Ce=O(4532),fe=O(6495),Ne=O(3260),$=O(576),j=O(7849),K=O(8822);function Oe(Pe){if(Pe instanceof oe.y)return Pe;if(null!=Pe){if((0,we.c)(Pe))return function ke(Pe){return new oe.y(ve=>{const le=Pe[K.L]();if((0,$.m)(le.subscribe))return le.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,U.z)(Pe))return function ye(Pe){return new oe.y(ve=>{for(let le=0;le<Pe.length&&!ve.closed;le++)ve.next(Pe[le]);ve.complete()})}(Pe);if((0,P.t)(Pe))return function He(Pe){return new oe.y(ve=>{Pe.then(le=>{ve.closed||(ve.next(le),ve.complete())},le=>ve.error(le)).then(null,j.h)})}(Pe);if((0,me.D)(Pe))return ue(Pe);if((0,fe.T)(Pe))return function re(Pe){return new oe.y(ve=>{for(const le of Pe)if(ve.next(le),ve.closed)return;ve.complete()})}(Pe);if((0,Ne.L)(Pe))return function Ke(Pe){return ue((0,Ne.Q)(Pe))}(Pe)}throw(0,Ce.z)(Pe)}function ue(Pe){return new oe.y(ve=>{(function Ze(Pe,ve){var le,Le,J,ee;return(0,y.mG)(this,void 0,void 0,function*(){try{for(le=(0,y.KL)(Pe);!(Le=yield le.next()).done;)if(ve.next(Le.value),ve.closed)return}catch(ce){J={error:ce}}finally{try{Le&&!Le.done&&(ee=le.return)&&(yield ee.call(le))}finally{if(J)throw J.error}}ve.complete()})})(Pe,ve).catch(le=>ve.error(le))})}},6451:(lt,Te,O)=>{O.d(Te,{T:()=>me});var y=O(8189),U=O(8421),P=O(515),oe=O(7669),we=O(8996);function me(...Ce){const fe=(0,oe.yG)(Ce),Ne=(0,oe._6)(Ce,1/0),$=Ce;return $.length?1===$.length?(0,U.Xf)($[0]):(0,y.J)(Ne)((0,we.D)($,fe)):P.E}},5403:(lt,Te,O)=>{O.d(Te,{x:()=>U});var y=O(2961);function U(oe,we,me,Ce,fe){return new P(oe,we,me,Ce,fe)}class P extends y.Lv{constructor(we,me,Ce,fe,Ne,$){super(we),this.onFinalize=Ne,this.shouldUnsubscribe=$,this._next=me?function(j){try{me(j)}catch(K){we.error(K)}}:super._next,this._error=fe?function(j){try{fe(j)}catch(K){we.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=Ce?function(){try{Ce()}catch(j){we.error(j)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},4004:(lt,Te,O)=>{O.d(Te,{U:()=>P});var y=O(4482),U=O(5403);function P(oe,we){return(0,y.e)((me,Ce)=>{let fe=0;me.subscribe((0,U.x)(Ce,Ne=>{Ce.next(oe.call(we,Ne,fe++))}))})}},8189:(lt,Te,O)=>{O.d(Te,{J:()=>P});var y=O(5577),U=O(4671);function P(oe=1/0){return(0,y.z)(U.y,oe)}},5577:(lt,Te,O)=>{O.d(Te,{z:()=>fe});var y=O(4004),U=O(8421),P=O(4482),oe=O(9672),we=O(5403),Ce=O(576);function fe(Ne,$,j=1/0){return(0,Ce.m)($)?fe((K,Oe)=>(0,y.U)((ke,ye)=>$(K,ke,Oe,ye))((0,U.Xf)(Ne(K,Oe))),j):("number"==typeof $&&(j=$),(0,P.e)((K,Oe)=>function me(Ne,$,j,K,Oe,ke,ye,He){const re=[];let ue=0,Ke=0,Ze=!1;const Pe=()=>{Ze&&!re.length&&!ue&&$.complete()},ve=Le=>ue<K?le(Le):re.push(Le),le=Le=>{ke&&$.next(Le),ue++;let J=!1;(0,U.Xf)(j(Le,Ke++)).subscribe((0,we.x)($,ee=>{Oe?.(ee),ke?ve(ee):$.next(ee)},()=>{J=!0},void 0,()=>{if(J)try{for(ue--;re.length&&ue<K;){const ee=re.shift();ye?(0,oe.f)($,ye,()=>le(ee)):le(ee)}Pe()}catch(ee){$.error(ee)}}))};return Ne.subscribe((0,we.x)($,ve,()=>{Ze=!0,Pe()})),()=>{He?.()}}(K,Oe,Ne,j)))}},5363:(lt,Te,O)=>{O.d(Te,{Q:()=>oe});var y=O(9672),U=O(4482),P=O(5403);function oe(we,me=0){return(0,U.e)((Ce,fe)=>{Ce.subscribe((0,P.x)(fe,Ne=>(0,y.f)(fe,we,()=>fe.next(Ne),me),()=>(0,y.f)(fe,we,()=>fe.complete(),me),Ne=>(0,y.f)(fe,we,()=>fe.error(Ne),me)))})}},3099:(lt,Te,O)=>{O.d(Te,{B:()=>we});var y=O(8421),U=O(7579),P=O(2961),oe=O(4482);function we(Ce={}){const{connector:fe=(()=>new U.x),resetOnError:Ne=!0,resetOnComplete:$=!0,resetOnRefCountZero:j=!0}=Ce;return K=>{let Oe,ke,ye,He=0,re=!1,ue=!1;const Ke=()=>{ke?.unsubscribe(),ke=void 0},Ze=()=>{Ke(),Oe=ye=void 0,re=ue=!1},Pe=()=>{const ve=Oe;Ze(),ve?.unsubscribe()};return(0,oe.e)((ve,le)=>{He++,!ue&&!re&&Ke();const Le=ye=ye??fe();le.add(()=>{He--,0===He&&!ue&&!re&&(ke=me(Pe,j))}),Le.subscribe(le),!Oe&&He>0&&(Oe=new P.Hp({next:J=>Le.next(J),error:J=>{ue=!0,Ke(),ke=me(Ze,Ne,J),Le.error(J)},complete:()=>{re=!0,Ke(),ke=me(Ze,$),Le.complete()}}),(0,y.Xf)(ve).subscribe(Oe))})(K)}}function me(Ce,fe,...Ne){if(!0===fe)return void Ce();if(!1===fe)return;const $=new P.Hp({next:()=>{$.unsubscribe(),Ce()}});return fe(...Ne).subscribe($)}},9468:(lt,Te,O)=>{O.d(Te,{R:()=>U});var y=O(4482);function U(P,oe=0){return(0,y.e)((we,me)=>{me.add(P.schedule(()=>we.subscribe(me),oe))})}},3410:(lt,Te,O)=>{O.d(Te,{z:()=>y});const y={setTimeout(U,P,...oe){const{delegate:we}=y;return we?.setTimeout?we.setTimeout(U,P,...oe):setTimeout(U,P,...oe)},clearTimeout(U){const{delegate:P}=y;return(P?.clearTimeout||clearTimeout)(U)},delegate:void 0}},2202:(lt,Te,O)=>{O.d(Te,{h:()=>U});const U=function y(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Te,O)=>{O.d(Te,{L:()=>y});const y="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(lt,Te,O)=>{O.d(Te,{_6:()=>me,jO:()=>oe,yG:()=>we});var y=O(576);function P(Ce){return Ce[Ce.length-1]}function oe(Ce){return(0,y.m)(P(Ce))?Ce.pop():void 0}function we(Ce){return function U(Ce){return Ce&&(0,y.m)(Ce.schedule)}(P(Ce))?Ce.pop():void 0}function me(Ce,fe){return"number"==typeof P(Ce)?Ce.pop():fe}},8737:(lt,Te,O)=>{function y(U,P){if(U){const oe=U.indexOf(P);0<=oe&&U.splice(oe,1)}}O.d(Te,{P:()=>y})},3888:(lt,Te,O)=>{function y(U){const oe=U(we=>{Error.call(we),we.stack=(new Error).stack});return oe.prototype=Object.create(Error.prototype),oe.prototype.constructor=oe,oe}O.d(Te,{d:()=>y})},2806:(lt,Te,O)=>{O.d(Te,{O:()=>oe,x:()=>P});var y=O(2416);let U=null;function P(we){if(y.v.useDeprecatedSynchronousErrorHandling){const me=!U;if(me&&(U={errorThrown:!1,error:null}),we(),me){const{errorThrown:Ce,error:fe}=U;if(U=null,Ce)throw fe}}else we()}function oe(we){y.v.useDeprecatedSynchronousErrorHandling&&U&&(U.errorThrown=!0,U.error=we)}},9672:(lt,Te,O)=>{function y(U,P,oe,we=0,me=!1){const Ce=P.schedule(function(){oe(),me?U.add(this.schedule(null,we)):this.unsubscribe()},we);if(U.add(Ce),!me)return Ce}O.d(Te,{f:()=>y})},4671:(lt,Te,O)=>{function y(U){return U}O.d(Te,{y:()=>y})},1144:(lt,Te,O)=>{O.d(Te,{z:()=>y});const y=U=>U&&"number"==typeof U.length&&"function"!=typeof U},2206:(lt,Te,O)=>{O.d(Te,{D:()=>U});var y=O(576);function U(P){return Symbol.asyncIterator&&(0,y.m)(P?.[Symbol.asyncIterator])}},576:(lt,Te,O)=>{function y(U){return"function"==typeof U}O.d(Te,{m:()=>y})},3670:(lt,Te,O)=>{O.d(Te,{c:()=>P});var y=O(8822),U=O(576);function P(oe){return(0,U.m)(oe[y.L])}},6495:(lt,Te,O)=>{O.d(Te,{T:()=>P});var y=O(2202),U=O(576);function P(oe){return(0,U.m)(oe?.[y.h])}},8239:(lt,Te,O)=>{O.d(Te,{t:()=>U});var y=O(576);function U(P){return(0,y.m)(P?.then)}},3260:(lt,Te,O)=>{O.d(Te,{L:()=>oe,Q:()=>P});var y=O(655),U=O(576);function P(we){return(0,y.FC)(this,arguments,function*(){const Ce=we.getReader();try{for(;;){const{value:fe,done:Ne}=yield(0,y.qq)(Ce.read());if(Ne)return yield(0,y.qq)(void 0);yield yield(0,y.qq)(fe)}}finally{Ce.releaseLock()}})}function oe(we){return(0,U.m)(we?.getReader)}},4482:(lt,Te,O)=>{O.d(Te,{A:()=>U,e:()=>P});var y=O(576);function U(oe){return(0,y.m)(oe?.lift)}function P(oe){return we=>{if(U(we))return we.lift(function(me){try{return oe(me,this)}catch(Ce){this.error(Ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(lt,Te,O)=>{O.d(Te,{U:()=>P,z:()=>U});var y=O(4671);function U(...oe){return P(oe)}function P(oe){return 0===oe.length?y.y:1===oe.length?oe[0]:function(me){return oe.reduce((Ce,fe)=>fe(Ce),me)}}},7849:(lt,Te,O)=>{O.d(Te,{h:()=>P});var y=O(2416),U=O(3410);function P(oe){U.z.setTimeout(()=>{const{onUnhandledError:we}=y.v;if(!we)throw oe;we(oe)})}},4532:(lt,Te,O)=>{function y(U){return new TypeError(`You provided ${null!==U&&"object"==typeof U?"an invalid object":`'${U}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(Te,{z:()=>y})},655:(lt,Te,O)=>{function oe(W,q){var ie={};for(var X in W)Object.prototype.hasOwnProperty.call(W,X)&&q.indexOf(X)<0&&(ie[X]=W[X]);if(null!=W&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(X=Object.getOwnPropertySymbols(W);xe<X.length;xe++)q.indexOf(X[xe])<0&&Object.prototype.propertyIsEnumerable.call(W,X[xe])&&(ie[X[xe]]=W[X[xe]])}return ie}function fe(W,q,ie,X){return new(ie||(ie=Promise))(function(Me,et){function jt(Jt){try{Fe(X.next(Jt))}catch(An){et(An)}}function kt(Jt){try{Fe(X.throw(Jt))}catch(An){et(An)}}function Fe(Jt){Jt.done?Me(Jt.value):function xe(Me){return Me instanceof ie?Me:new ie(function(et){et(Me)})}(Jt.value).then(jt,kt)}Fe((X=X.apply(W,q||[])).next())})}function re(W){return this instanceof re?(this.v=W,this):new re(W)}function ue(W,q,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,X=ie.apply(W,q||[]),Me=[];return xe={},et("next"),et("throw"),et("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function et(Xt){X[Xt]&&(xe[Xt]=function(Ht){return new Promise(function(Ot,St){Me.push([Xt,Ht,Ot,St])>1||jt(Xt,Ht)})})}function jt(Xt,Ht){try{!function kt(Xt){Xt.value instanceof re?Promise.resolve(Xt.value.v).then(Fe,Jt):An(Me[0][2],Xt)}(X[Xt](Ht))}catch(Ot){An(Me[0][3],Ot)}}function Fe(Xt){jt("next",Xt)}function Jt(Xt){jt("throw",Xt)}function An(Xt,Ht){Xt(Ht),Me.shift(),Me.length&&jt(Me[0][0],Me[0][1])}}function Ze(W){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,q=W[Symbol.asyncIterator];return q?q.call(W):(W=function K(W){var q="function"==typeof Symbol&&Symbol.iterator,ie=q&&W[q],X=0;if(ie)return ie.call(W);if(W&&"number"==typeof W.length)return{next:function(){return W&&X>=W.length&&(W=void 0),{value:W&&W[X++],done:!W}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}(W),ie={},X("next"),X("throw"),X("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function X(Me){ie[Me]=W[Me]&&function(et){return new Promise(function(jt,kt){!function xe(Me,et,jt,kt){Promise.resolve(kt).then(function(Fe){Me({value:Fe,done:jt})},et)}(jt,kt,(et=W[Me](et)).done,et.value)})}}}O.d(Te,{FC:()=>ue,KL:()=>Ze,_T:()=>oe,mG:()=>fe,qq:()=>re})},4650:(lt,Te,O)=>{O.d(Te,{$8M:()=>Ju,$Z:()=>W0,AFp:()=>fE,ALo:()=>Gd,AaK:()=>fe,CRH:()=>WI,CZH:()=>dt,CqO:()=>Pw,D6c:()=>AT,EJc:()=>fT,F4k:()=>Oy,FYo:()=>dd,FiY:()=>_n,G48:()=>sh,GfV:()=>x0,JOm:()=>Gr,LFG:()=>fn,LSH:()=>ac,Lbi:()=>pE,Lck:()=>ZC,MMx:()=>Nc,NdJ:()=>Ly,OlP:()=>sn,Oqu:()=>up,PXZ:()=>Kv,Q6J:()=>Ny,QGY:()=>ep,QP$:()=>De,Qsj:()=>db,R0b:()=>ur,RDi:()=>ND,Rgc:()=>on,SBq:()=>tu,Sil:()=>jc,Suo:()=>zI,TTD:()=>As,TgZ:()=>Ec,X6Q:()=>IE,XFs:()=>ze,Xpm:()=>pe,Xts:()=>Sf,Y36:()=>iu,YKP:()=>vv,YNc:()=>Mw,Yjl:()=>k,Yz7:()=>Ht,Z0I:()=>fi,ZZ4:()=>t_,_UZ:()=>Nd,_Vd:()=>jo,_c5:()=>la,_uU:()=>ds,aQg:()=>lg,c2e:()=>dT,cJS:()=>St,cg1:()=>vp,dDg:()=>oa,dqk:()=>Dt,eFA:()=>aa,eoX:()=>ng,f3M:()=>zr,g9A:()=>Gn,h0i:()=>na,hGG:()=>Jc,iGM:()=>Kp,ifc:()=>nt,ip1:()=>Qe,jDz:()=>CI,kL8:()=>Tc,lG2:()=>H,lcZ:()=>$p,lqb:()=>$o,lri:()=>Gv,oAB:()=>Bt,q4F:()=>M0,qLn:()=>nu,qZA:()=>Rd,rWj:()=>qv,sBO:()=>oh,sIi:()=>Ad,s_b:()=>Qd,soG:()=>rh,tb:()=>gE,tp0:()=>js,uIk:()=>Jf,vHH:()=>ye,vpe:()=>ui,wAp:()=>at,xp6:()=>O0,z2F:()=>Nn,zSh:()=>Vm,zs3:()=>Mt});var y=O(7579),U=O(727),P=O(9751),oe=O(6451),we=O(3099);function me(i){for(let s in i)if(i[s]===me)return s;throw Error("Could not find renamed property on target object.")}function fe(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(fe).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function Ne(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const $=me({__forward_ref__:me});function j(i){return i.__forward_ref__=j,i.toString=function(){return fe(this())},i}function K(i){return function Oe(i){return"function"==typeof i&&i.hasOwnProperty($)&&i.__forward_ref__===j}(i)?i():i}class ye extends Error{constructor(s,a){super(function He(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function re(i){return"string"==typeof i?i:null==i?"":String(i)}function ve(i,s){throw new ye(-201,!1)}function kt(i,s){null==i&&function Fe(i,s,a,c){throw new Error(`ASSERTION ERROR: ${i}`+(null==c?"":` [Expected=> ${a} ${c} ${s} <=Actual]`))}(s,i,null,"!=")}function Ht(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function St(i){return{providers:i.providers||[],imports:i.imports||[]}}function wr(i){return Gi(i,Ir)||Gi(i,xi)}function fi(i){return null!==wr(i)}function Gi(i,s){return i.hasOwnProperty(s)?i[s]:null}function Ai(i){return i&&(i.hasOwnProperty(Er)||i.hasOwnProperty(vs))?i[Er]:null}const Ir=me({\u0275prov:me}),Er=me({\u0275inj:me}),xi=me({ngInjectableDef:me}),vs=me({ngInjectorDef:me});var ze=(()=>((ze=ze||{})[ze.Default=0]="Default",ze[ze.Host=1]="Host",ze[ze.Self=2]="Self",ze[ze.SkipSelf=4]="SkipSelf",ze[ze.Optional=8]="Optional",ze))();let qn;function dn(i){const s=qn;return qn=i,s}function Nr(i,s,a){const c=wr(i);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:a&ze.Optional?null:void 0!==s?s:void ve(fe(i))}function mn(i){return{toString:i}.toString()}var yn=(()=>((yn=yn||{})[yn.OnPush=0]="OnPush",yn[yn.Default=1]="Default",yn))(),nt=(()=>{return(i=nt||(nt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",nt;var i})();const Dt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Dr={},yt=[],br=me({\u0275cmp:me}),bt=me({\u0275dir:me}),pi=me({\u0275pipe:me}),Vt=me({\u0275mod:me}),tr=me({\u0275fac:me}),In=me({__NG_ELEMENT_ID__:me});let je=0;function pe(i){return mn(()=>{const a=!0===i.standalone,c={},d={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===yn.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||yt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||nt.Emulated,id:"c"+je++,styles:i.styles||yt,_:null,setInput:null,schemas:i.schemas||null,tView:null},h=i.dependencies,m=i.features;return d.inputs=L(i.inputs,c),d.outputs=L(i.outputs),m&&m.forEach(w=>w(d)),d.directiveDefs=h?()=>("function"==typeof h?h():h).map(ut).filter(ht):null,d.pipeDefs=h?()=>("function"==typeof h?h():h).map(Q).filter(ht):null,d})}function ut(i){return x(i)||N(i)}function ht(i){return null!==i}function Bt(i){return mn(()=>({type:i.type,bootstrap:i.bootstrap||yt,declarations:i.declarations||yt,imports:i.imports||yt,exports:i.exports||yt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function L(i,s){if(null==i)return Dr;const a={};for(const c in i)if(i.hasOwnProperty(c)){let d=i[c],h=d;Array.isArray(d)&&(h=d[1],d=d[0]),a[d]=c,s&&(s[d]=h)}return a}const H=pe;function k(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function x(i){return i[br]||null}function N(i){return i[bt]||null}function Q(i){return i[pi]||null}function De(i){const s=x(i)||N(i)||Q(i);return null!==s&&s.standalone}function qe(i,s){const a=i[Vt]||null;if(!a&&!0===s)throw new Error(`Type ${fe(i)} does not have '\u0275mod' property.`);return a}function Zn(i){return Array.isArray(i)&&"object"==typeof i[1]}function kr(i){return Array.isArray(i)&&!0===i[1]}function Ts(i){return 0!=(8&i.flags)}function Nu(i){return 2==(2&i.flags)}function go(i){return 1==(1&i.flags)}function mi(i){return null!==i.template}function Pu(i){return 0!=(256&i[2])}function nr(i,s){return i.hasOwnProperty(tr)?i[tr]:null}class yo{constructor(s,a,c){this.previousValue=s,this.currentValue=a,this.firstChange=c}isFirstChange(){return this.firstChange}}function As(){return Ph}function Ph(i){return i.type.prototype.ngOnChanges&&(i.setInput=pl),fl}function fl(){const i=vo(this),s=i?.current;if(s){const a=i.previous;if(a===Dr)i.previous=s;else for(let c in s)a[c]=s[c];i.current=null,this.ngOnChanges(s)}}function pl(i,s,a,c){const d=vo(i)||function Lg(i,s){return i[kh]=s}(i,{previous:Dr,current:null}),h=d.current||(d.current={}),m=d.previous,w=this.declaredInputs[a],E=m[w];h[w]=new yo(E&&E.currentValue,s,m===Dr),i[c]=s}As.ngInherit=!0;const kh="__ngSimpleChanges__";function vo(i){return i[kh]||null}function En(i){for(;Array.isArray(i);)i=i[0];return i}function hr(i,s){return En(s[i.index])}function Ta(i,s){return i.data[s]}function Wt(i,s){const a=s[i];return Zn(a)?a:a[0]}function Zi(i){return 64==(64&i[2])}function yi(i,s){return null==s?null:i[s]}function Sa(i){i[18]=0}function Aa(i,s){i[5]+=s;let a=i,c=i[3];for(;null!==c&&(1===s&&1===a[5]||-1===s&&0===a[5]);)c[5]+=s,a=c,c=c[3]}const Et={lFrame:Tl(null),bindingsEnabled:!0};function xa(){return Et.bindingsEnabled}function _e(){return Et.lFrame.lView}function Ft(){return Et.lFrame.tView}function Bn(){let i=Lu();for(;null!==i&&64===i.type;)i=i.parent;return i}function Lu(){return Et.lFrame.currentTNode}function jr(i,s){const a=Et.lFrame;a.currentTNode=i,a.isParent=s}function wl(){return Et.lFrame.isParent}function Ra(){return Et.lFrame.bindingIndex++}function Uh(i,s){const a=Et.lFrame;a.bindingIndex=a.bindingRootIndex=i,Vu(s)}function Vu(i){Et.lFrame.currentDirectiveIndex=i}function Dl(){return Et.lFrame.currentQueryIndex}function bl(i){Et.lFrame.currentQueryIndex=i}function Cl(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function Wg(i,s,a){if(a&ze.SkipSelf){let d=s,h=i;for(;!(d=d.parent,null!==d||a&ze.Host||(d=Cl(h),null===d||(h=h[15],10&d.type))););if(null===d)return!1;s=d,i=h}const c=Et.lFrame=Gg();return c.currentTNode=s,c.lView=i,!0}function Bu(i){const s=Gg(),a=i[1];Et.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function Gg(){const i=Et.lFrame,s=null===i?null:i.child;return null===s?Tl(i):s}function Tl(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function qg(){const i=Et.lFrame;return Et.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const Vh=qg;function wo(){const i=qg();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function vn(){return Et.lFrame.selectedIndex}function Ni(i){Et.lFrame.selectedIndex=i}function hn(){const i=Et.lFrame;return Ta(i.tView,i.selectedIndex)}function Na(i,s){for(let a=s.directiveStart,c=s.directiveEnd;a<c;a++){const h=i.data[a].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:w,ngAfterViewInit:E,ngAfterViewChecked:b,ngOnDestroy:A}=h;m&&(i.contentHooks||(i.contentHooks=[])).push(-a,m),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),E&&(i.viewHooks||(i.viewHooks=[])).push(-a,E),b&&((i.viewHooks||(i.viewHooks=[])).push(a,b),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,b)),null!=A&&(i.destroyHooks||(i.destroyHooks=[])).push(a,A)}}function ju(i,s,a){xl(i,s,3,a)}function Rs(i,s,a,c){(3&i[2])===a&&xl(i,s,a,c)}function Al(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function xl(i,s,a,c){const h=c??-1,m=s.length-1;let w=0;for(let E=void 0!==c?65535&i[18]:0;E<m;E++)if("number"==typeof s[E+1]){if(w=s[E],null!=c&&w>=c)break}else s[E]<0&&(i[18]+=65536),(w<h||-1==h)&&(Bh(i,a,s,E),i[18]=(4294901760&i[18])+E+2),E++}function Bh(i,s,a,c){const d=a[c]<0,h=a[c+1],w=i[d?-a[c]:a[c]];if(d){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{h.call(w)}finally{}}}else try{h.call(w)}finally{}}class Hr{constructor(s,a,c){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=c}}function Pi(i,s,a){let c=0;for(;c<a.length;){const d=a[c];if("number"==typeof d){if(0!==d)break;c++;const h=a[c++],m=a[c++],w=a[c++];i.setAttribute(s,m,w,h)}else{const h=d,m=a[++c];Pl(h)?i.setProperty(s,h,m):i.setAttribute(s,h,m),c++}}return c}function Nl(i){return 3===i||4===i||6===i}function Pl(i){return 64===i.charCodeAt(0)}function ka(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let c=0;c<s.length;c++){const d=s[c];"number"==typeof d?a=d:0===a||jh(i,a,d,null,-1===a||2===a?s[++c]:null)}}return i}function jh(i,s,a,c,d){let h=0,m=i.length;if(-1===s)m=-1;else for(;h<i.length;){const w=i[h++];if("number"==typeof w){if(w===s){m=-1;break}if(w>s){m=h-1;break}}}for(;h<i.length;){const w=i[h];if("number"==typeof w)break;if(w===a){if(null===c)return void(null!==d&&(i[h+1]=d));if(c===i[h+1])return void(i[h+2]=d)}h++,null!==c&&h++,null!==d&&h++}-1!==m&&(i.splice(m,0,s),h=m+1),i.splice(h++,0,a),null!==c&&i.splice(h++,0,c),null!==d&&i.splice(h++,0,d)}function tm(i){return-1!==i}function Ns(i){return 32767&i}function Qi(i,s){let a=function nm(i){return i>>16}(i),c=s;for(;a>0;)c=c[15],a--;return c}let kl=!0;function Wu(i){const s=kl;return kl=i,s}let Hh=0;const ti={};function Ps(i,s){const a=Gu(i,s);if(-1!==a)return a;const c=s[1];c.firstCreatePass&&(i.injectorIndex=s.length,Ol(c.data,i),Ol(s,null),Ol(c.blueprint,null));const d=Oa(i,s),h=i.injectorIndex;if(tm(d)){const m=Ns(d),w=Qi(d,s),E=w[1].data;for(let b=0;b<8;b++)s[h+b]=w[m+b]|E[m+b]}return s[h+8]=d,h}function Ol(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Gu(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function Oa(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,c=null,d=s;for(;null!==d;){if(c=Qu(d),null===c)return-1;if(a++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|a<<16}return-1}function La(i,s,a){!function im(i,s,a){let c;"string"==typeof a?c=a.charCodeAt(0)||0:a.hasOwnProperty(In)&&(c=a[In]),null==c&&(c=a[In]=Hh++);const d=255&c;s.data[i+(d>>5)]|=1<<d}(i,s,a)}function qu(i,s,a){if(a&ze.Optional||void 0!==i)return i;ve()}function Eo(i,s,a,c){if(a&ze.Optional&&void 0===c&&(c=null),0==(a&(ze.Self|ze.Host))){const d=i[9],h=dn(void 0);try{return d?d.get(s,c,a&ze.Optional):Nr(s,c,a&ze.Optional)}finally{dn(h)}}return qu(c,0,a)}function Ku(i,s,a,c=ze.Default,d){if(null!==i){if(1024&s[2]){const m=function om(i,s,a,c,d){let h=i,m=s;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const w=zh(h,m,a,c|ze.Self,ti);if(w!==ti)return w;let E=h.parent;if(!E){const b=m[21];if(b){const A=b.get(a,ti,c);if(A!==ti)return A}E=Qu(m),m=m[15]}h=E}return d}(i,s,a,c,ti);if(m!==ti)return m}const h=zh(i,s,a,c,ti);if(h!==ti)return h}return Eo(s,a,c,d)}function zh(i,s,a,c,d){const h=function sm(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(In)?i[In]:void 0;return"number"==typeof s?s>=0?255&s:qh:s}(a);if("function"==typeof h){if(!Wg(s,i,c))return c&ze.Host?qu(d,0,c):Eo(s,a,c,d);try{const m=h(c);if(null!=m||c&ze.Optional)return m;ve()}finally{Vh()}}else if("number"==typeof h){let m=null,w=Gu(i,s),E=-1,b=c&ze.Host?s[16][6]:null;for((-1===w||c&ze.SkipSelf)&&(E=-1===w?Oa(i,s):s[w+8],-1!==E&&Gh(c,!1)?(m=s[1],w=Ns(E),s=Qi(E,s)):w=-1);-1!==w;){const A=s[1];if(Zu(h,w,A.data)){const R=Wh(w,s,a,m,c,b);if(R!==ti)return R}E=s[w+8],-1!==E&&Gh(c,s[1].data[w+8]===b)&&Zu(h,w,s)?(m=A,w=Ns(E),s=Qi(E,s)):w=-1}}return d}function Wh(i,s,a,c,d,h){const m=s[1],w=m.data[i+8],A=Ua(w,m,a,null==c?Nu(w)&&kl:c!=m&&0!=(3&w.type),d&ze.Host&&h===w);return null!==A?Ji(s,m,A,w):ti}function Ua(i,s,a,c,d){const h=i.providerIndexes,m=s.data,w=1048575&h,E=i.directiveStart,A=h>>20,B=d?w+A:i.directiveEnd;for(let Y=c?w:w+A;Y<B;Y++){const ae=m[Y];if(Y<E&&a===ae||Y>=E&&ae.type===a)return Y}if(d){const Y=m[E];if(Y&&mi(Y)&&Y.type===a)return E}return null}function Ji(i,s,a,c){let d=i[a];const h=s.data;if(function Ml(i){return i instanceof Hr}(d)){const m=d;m.resolving&&function Ke(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new ye(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ue(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():re(i)}(h[a]));const w=Wu(m.canSeeViewProviders);m.resolving=!0;const E=m.injectImpl?dn(m.injectImpl):null;Wg(i,c,ze.Default);try{d=i[a]=m.factory(void 0,h,i,c),s.firstCreatePass&&a>=c.directiveStart&&function $u(i,s,a){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:h}=s.type.prototype;if(c){const m=Ph(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,m),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,m)}d&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,d),h&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,h),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,h))}(a,h[a],s)}finally{null!==E&&dn(E),Wu(w),m.resolving=!1,Vh()}}return d}function Zu(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function Gh(i,s){return!(i&ze.Self||i&ze.Host&&s)}class Va{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,c){return Ku(this._tNode,this._lView,s,c,a)}}function qh(){return new Va(Bn(),_e())}function Qu(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function Ju(i){return function Fa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const c=a.length;let d=0;for(;d<c;){const h=a[d];if(Nl(h))break;if(0===h)d+=2;else if("number"==typeof h)for(d++;d<c&&"string"==typeof a[d];)d++;else{if(h===s)return a[d+1];d+=2}}}return null}(Bn(),i)}const Ba="__parameters__";function $a(i,s,a){return mn(()=>{const c=function Kh(i){return function(...a){if(i){const c=i(...a);for(const d in c)this[d]=c[d]}}}(s);function d(...h){if(this instanceof d)return c.apply(this,h),this;const m=new d(...h);return w.annotation=m,w;function w(E,b,A){const R=E.hasOwnProperty(Ba)?E[Ba]:Object.defineProperty(E,Ba,{value:[]})[Ba];for(;R.length<=A;)R.push(null);return(R[A]=R[A]||[]).push(m),E}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=i,d.annotationCls=d,d})}class sn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=Ht({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let c=i[a];Array.isArray(c)?(s===i&&(s=i.slice(0,a)),cn(c,s)):s!==i&&s.push(c)}return s}function Li(i,s){i.forEach(a=>Array.isArray(a)?Li(a,s):s(a))}function Ls(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function rr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}const So={},$l="__NG_DI_FLAG__",Fi="ngTempTokenPath",Ui=/\n/gm,jn="__source";let es;function ts(i){const s=es;return es=i,s}function Hn(i,s=ze.Default){if(void 0===es)throw new ye(-203,!1);return null===es?Nr(i,void 0,s):es.get(i,s&ze.Optional?null:void 0,s)}function fn(i,s=ze.Default){return(function Un(){return qn}()||Hn)(K(i),s)}function zr(i,s=ze.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),fn(i,s)}function Yn(i){const s=[];for(let a=0;a<i.length;a++){const c=K(i[a]);if(Array.isArray(c)){if(0===c.length)throw new ye(900,!1);let d,h=ze.Default;for(let m=0;m<c.length;m++){const w=c[m],E=tf(w);"number"==typeof E?-1===E?d=w.token:h|=E:d=w}s.push(fn(d,h))}else s.push(fn(c))}return s}function _i(i,s){return i[$l]=s,i.prototype[$l]=s,i}function tf(i){return i[$l]}const _n=_i($a("Optional"),8),js=_i($a("SkipSelf"),4);var Gr=(()=>((Gr=Gr||{})[Gr.Important=1]="Important",Gr[Gr.DashCase=2]="DashCase",Gr))();const qa=new Map;let cf=0;const f="__ngContext__";function g(i,s){Zn(s)?(i[f]=s[20],function vm(i){qa.set(i[20],i)}(s)):i[f]=s}function Ka(i,s){return undefined(i,s)}function qs(i){const s=i[3];return kr(s)?s[3]:s}function Ks(i){return pf(i[13])}function rs(i){return pf(i[4])}function pf(i){for(;null!==i&&!kr(i);)i=i[4];return i}function Fo(i,s,a,c,d){if(null!=c){let h,m=!1;kr(c)?h=c:Zn(c)&&(m=!0,c=c[0]);const w=En(c);0===i&&null!==a?null==d?a0(s,a,w):Uo(s,a,w,d||null,!0):1===i&&null!==a?Uo(s,a,w,d||null,!0):2===i?function vf(i,s,a){const c=wi(i,s);c&&function Dm(i,s,a,c){i.removeChild(s,a,c)}(i,c,s,a)}(s,w,m):3===i&&s.destroyNode(w),null!=h&&function xD(i,s,a,c,d){const h=a[7];h!==En(a)&&Fo(s,i,c,h,d);for(let w=10;w<a.length;w++){const E=a[w];Qa(E[1],E,i,s,c,h)}}(s,i,h,a,d)}}function Jl(i,s,a){return i.createElement(s,a)}function n0(i,s){const a=i[9],c=a.indexOf(s),d=s[3];512&s[2]&&(s[2]&=-513,Aa(d,-1)),a.splice(c,1)}function wm(i,s){if(i.length<=10)return;const a=10+s,c=i[a];if(c){const d=c[17];null!==d&&d!==i&&n0(d,c),s>0&&(i[a-1][4]=c[4]);const h=rr(i,10+s);!function Za(i,s){Qa(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(c[1],c);const m=h[19];null!==m&&m.detachView(h[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function r0(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&Qa(i,s,a,3,null,null),function DD(i){let s=i[13];if(!s)return Im(i[1],i);for(;s;){let a=null;if(Zn(s))a=s[13];else{const c=s[10];c&&(a=c)}if(!a){for(;s&&!s[4]&&s!==i;)Zn(s)&&Im(s[1],s),s=s[3];null===s&&(s=i),Zn(s)&&Im(s[1],s),a=s&&s[4]}s=a}}(s)}}function Im(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function SD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let c=0;c<a.length;c+=2){const d=s[a[c]];if(!(d instanceof Hr)){const h=a[c+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const w=d[h[m]],E=h[m+1];try{E.call(w)}finally{}}else try{h.call(d)}finally{}}}}(i,s),function TD(i,s){const a=i.cleanup,c=s[7];let d=-1;if(null!==a)for(let h=0;h<a.length-1;h+=2)if("string"==typeof a[h]){const m=a[h+1],w="function"==typeof m?m(s):En(s[m]),E=c[d=a[h+2]],b=a[h+3];"boolean"==typeof b?w.removeEventListener(a[h],E,b):b>=0?c[d=b]():c[d=-b].unsubscribe(),h+=2}else{const m=c[d=a[h+1]];a[h].call(m)}if(null!==c){for(let h=d+1;h<c.length;h++)(0,c[h])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&kr(s[3])){a!==s[3]&&n0(a,s);const c=s[19];null!==c&&c.detachView(i)}!function tc(i){qa.delete(i[20])}(s)}}function s0(i,s,a){return function o0(i,s,a){let c=s;for(;null!==c&&40&c.type;)c=(s=c).parent;if(null===c)return a[0];if(2&c.flags){const d=i.data[c.directiveStart].encapsulation;if(d===nt.None||d===nt.Emulated)return null}return hr(c,a)}(i,s.parent,a)}function Uo(i,s,a,c,d){i.insertBefore(s,a,c,d)}function a0(i,s,a){i.appendChild(s,a)}function Em(i,s,a,c,d){null!==c?Uo(i,s,a,c,d):a0(i,s,a)}function wi(i,s){return i.parentNode(s)}let Mm,c0=function Cm(i,s,a){return 40&i.type?hr(i,a):null};function yf(i,s,a,c){const d=s0(i,c,s),h=s[11],w=function bm(i,s,a){return c0(i,s,a)}(c.parent||s[6],c,s);if(null!=d)if(Array.isArray(a))for(let E=0;E<a.length;E++)Em(h,d,a[E],w,!1);else Em(h,d,a,w,!1)}function Ya(i,s){if(null!==s){const a=s.type;if(3&a)return hr(s,i);if(4&a)return Xl(-1,i[s.index]);if(8&a){const c=s.child;if(null!==c)return Ya(i,c);{const d=i[s.index];return kr(d)?Xl(-1,d):En(d)}}if(32&a)return Ka(s,i)()||En(i[s.index]);{const c=Sm(i,s);return null!==c?Array.isArray(c)?c[0]:Ya(qs(i[16]),c):Ya(i,s.next)}}return null}function Sm(i,s){return null!==s?i[16][6].projection[s.projection]:null}function Xl(i,s){const a=10+i+1;if(a<s.length){const c=s[a],d=c[1].firstChild;if(null!==d)return Ya(c,d)}return s[7]}function ed(i,s,a,c,d,h,m){for(;null!=a;){const w=c[a.index],E=a.type;if(m&&0===s&&(w&&g(En(w),c),a.flags|=4),64!=(64&a.flags))if(8&E)ed(i,s,a.child,c,d,h,!1),Fo(s,i,d,w,h);else if(32&E){const b=Ka(a,c);let A;for(;A=b();)Fo(s,i,d,A,h);Fo(s,i,d,w,h)}else 16&E?sc(i,s,c,a,d,h):Fo(s,i,d,w,h);a=m?a.projectionNext:a.next}}function Qa(i,s,a,c,d,h){ed(a,c,i.firstChild,s,d,h,!1)}function sc(i,s,a,c,d,h){const m=a[16],E=m[6].projection[c.projection];if(Array.isArray(E))for(let b=0;b<E.length;b++)Fo(s,i,d,E[b],h);else ed(i,s,E,m[3],d,h,!0)}function _f(i,s,a){i.setAttribute(s,"style",a)}function wf(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function ND(i){Mm=i}class Df{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const sd=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var xn=(()=>((xn=xn||{})[xn.NONE=0]="NONE",xn[xn.HTML=1]="HTML",xn[xn.STYLE=2]="STYLE",xn[xn.SCRIPT=3]="SCRIPT",xn[xn.URL=4]="URL",xn[xn.RESOURCE_URL=5]="RESOURCE_URL",xn))();function ac(i){const s=function Bo(){const i=_e();return i&&i[12]}();return s?s.sanitize(xn.URL,i)||"":function Js(i,s){const a=function VD(i){return i instanceof Df&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?function Qs(i){return i instanceof Df?i.changingThisBreaksApplicationSecurity:i}(i):function Xa(i){return(i=String(i)).match(sd)?i:"unsafe:"+i}(re(i))}const Sf=new sn("ENVIRONMENT_INITIALIZER"),uc=new sn("INJECTOR",-1),Om=new sn("INJECTOR_DEF_TYPES");class _0{get(s,a=So){if(a===So){const c=new Error(`NullInjectorError: No provider for ${fe(s)}!`);throw c.name="NullInjectorError",c}return a}}function XD(...i){return{\u0275providers:w0(0,i)}}function w0(i,...s){const a=[],c=new Set;let d;return Li(s,h=>{const m=h;Lm(m,a,[],c)&&(d||(d=[]),d.push(m))}),void 0!==d&&I0(d,a),a}function I0(i,s){for(let a=0;a<i.length;a++){const{providers:d}=i[a];Li(d,h=>{s.push(h)})}}function Lm(i,s,a,c){if(!(i=K(i)))return!1;let d=null,h=Ai(i);const m=!h&&x(i);if(h||m){if(m&&!m.standalone)return!1;d=i}else{const E=i.ngModule;if(h=Ai(E),!h)return!1;d=E}const w=c.has(d);if(m){if(w)return!1;if(c.add(d),m.dependencies){const E="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const b of E)Lm(b,s,a,c)}}else{if(!h)return!1;{if(null!=h.imports&&!w){let b;c.add(d);try{Li(h.imports,A=>{Lm(A,s,a,c)&&(b||(b=[]),b.push(A))})}finally{}void 0!==b&&I0(b,s)}if(!w){const b=nr(d)||(()=>new d);s.push({provide:d,useFactory:b,deps:yt},{provide:Om,useValue:d,multi:!0},{provide:Sf,useValue:()=>fn(d),multi:!0})}const E=h.providers;null==E||w||Li(E,A=>{s.push(A)})}}return d!==i&&void 0!==i.providers}const eb=me({provide:String,useValue:me});function Um(i){return null!==i&&"object"==typeof i&&eb in i}function eu(i){return"function"==typeof i}const Vm=new sn("Set Injector scope."),cd={},nb={};let Af;function ld(){return void 0===Af&&(Af=new _0),Af}class $o{}class Bm extends $o{constructor(s,a,c,d){super(),this.parent=a,this.source=c,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mf(s,m=>this.processProvider(m)),this.records.set(uc,cc(void 0,this)),d.has("environment")&&this.records.set($o,cc(void 0,this));const h=this.records.get(Vm);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Om.multi,yt,ze.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=ts(this),c=dn(void 0);try{return s()}finally{ts(a),dn(c)}}get(s,a=So,c=ze.Default){this.assertNotDestroyed();const d=ts(this),h=dn(void 0);try{if(!(c&ze.SkipSelf)){let w=this.records.get(s);if(void 0===w){const E=function C0(i){return"function"==typeof i||"object"==typeof i&&i instanceof sn}(s)&&wr(s);w=E&&this.injectableDefInScope(E)?cc(xf(s),cd):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(c&ze.Self?ld():this.parent).get(s,a=c&ze.Optional&&a===So?null:a)}catch(m){if("NullInjectorError"===m.name){if((m[Fi]=m[Fi]||[]).unshift(fe(s)),d)throw m;return function lm(i,s,a,c){const d=i[Fi];throw s[jn]&&d.unshift(s[jn]),i.message=function ni(i,s,a,c=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let d=fe(s);if(Array.isArray(s))d=s.map(fe).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let w=s[m];h.push(m+":"+("string"==typeof w?JSON.stringify(w):fe(w)))}d=`{${h.join(", ")}}`}return`${a}${c?"("+c+")":""}[${d}]: ${i.replace(Ui,"\n  ")}`}("\n"+i.message,d,a,c),i.ngTokenPath=d,i[Fi]=null,i}(m,s,"R3InjectorError",this.source)}throw m}finally{dn(h),ts(d)}}resolveInjectorInitializers(){const s=ts(this),a=dn(void 0);try{const c=this.get(Sf.multi,yt,ze.Self);for(const d of c)d()}finally{ts(s),dn(a)}}toString(){const s=[],a=this.records;for(const c of a.keys())s.push(fe(c));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ye(205,!1)}processProvider(s){let a=eu(s=K(s))?s:K(s&&s.provide);const c=function ib(i){return Um(i)?cc(void 0,i.useValue):cc(function b0(i,s,a){let c;if(eu(i)){const d=K(i);return nr(d)||xf(d)}if(Um(i))c=()=>K(i.useValue);else if(function D0(i){return!(!i||!i.useFactory)}(i))c=()=>i.useFactory(...Yn(i.deps||[]));else if(function E0(i){return!(!i||!i.useExisting)}(i))c=()=>fn(K(i.useExisting));else{const d=K(i&&(i.useClass||i.provide));if(!function sb(i){return!!i.deps}(i))return nr(d)||xf(d);c=()=>new d(...Yn(i.deps))}return c}(i),cd)}(s);if(eu(s)||!0!==s.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=cc(void 0,cd,!0),d.factory=()=>Yn(d.multi),this.records.set(a,d)),a=s,d.multi.push(s)}this.records.set(a,c)}hydrate(s,a){return a.value===cd&&(a.value=nb,a.value=a.factory()),"object"==typeof a.value&&a.value&&function ob(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function xf(i){const s=wr(i),a=null!==s?s.factory:nr(i);if(null!==a)return a;if(i instanceof sn)throw new ye(204,!1);if(i instanceof Function)return function rb(i){const s=i.length;if(s>0)throw function Fs(i,s){const a=[];for(let c=0;c<i;c++)a.push(s);return a}(s,"?"),new ye(204,!1);const a=function Dn(i){const s=i&&(i[Ir]||i[xi]);if(s){const a=function qi(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new ye(204,!1)}function cc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function $m(i){return!!i.\u0275providers}function Mf(i,s){for(const a of i)Array.isArray(a)?Mf(a,s):$m(a)?Mf(a.\u0275providers,s):s(a)}class ab{}class cb{resolveComponentFactory(s){throw function ub(i){const s=Error(`No component factory found for ${fe(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let jo=(()=>{class i{}return i.NULL=new cb,i})();function A0(){return Ho(Bn(),_e())}function Ho(i,s){return new tu(hr(i,s))}let tu=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=A0,i})();function lb(i){return i instanceof tu?i.nativeElement:i}class dd{}let db=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function hb(){const i=_e(),a=Wt(Bn().index,i);return(Zn(a)?a:i)[11]}(),i})(),fb=(()=>{class i{}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:()=>null}),i})();class x0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const M0=new x0("14.2.12"),Rf={};function Nf(i){return i.ngOriginalError}class nu{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Nf(s);for(;a&&Nf(a);)a=Nf(a);return a||null}}function is(i){return i instanceof Function?i():i}function Hm(i,s,a){let c=i.length;for(;;){const d=i.indexOf(s,a);if(-1===d)return d;if(0===d||i.charCodeAt(d-1)<=32){const h=s.length;if(d+h===c||i.charCodeAt(d+h)<=32)return d}a=d+1}}const Of="ng-template";function wb(i,s,a){let c=0;for(;c<i.length;){let d=i[c++];if(a&&"class"===d){if(d=i[c],-1!==Hm(d.toLowerCase(),s,0))return!0}else if(1===d){for(;c<i.length&&"string"==typeof(d=i[c++]);)if(d.toLowerCase()===s)return!0;return!1}}return!1}function N0(i){return 4===i.type&&i.value!==Of}function Ib(i,s,a){return s===(4!==i.type||a?i.value:Of)}function P0(i,s,a){let c=4;const d=i.attrs||[],h=function k0(i){for(let s=0;s<i.length;s++)if(Nl(i[s]))return s;return i.length}(d);let m=!1;for(let w=0;w<s.length;w++){const E=s[w];if("number"!=typeof E){if(!m)if(4&c){if(c=2|1&c,""!==E&&!Ib(i,E,a)||""===E&&1===s.length){if($i(c))return!1;m=!0}}else{const b=8&c?E:s[++w];if(8&c&&null!==i.attrs){if(!wb(i.attrs,b,a)){if($i(c))return!1;m=!0}continue}const R=ax(8&c?"class":E,d,N0(i),a);if(-1===R){if($i(c))return!1;m=!0;continue}if(""!==b){let B;B=R>h?"":d[R+1].toLowerCase();const Y=8&c?B:null;if(Y&&-1!==Hm(Y,b,0)||2&c&&b!==B){if($i(c))return!1;m=!0}}}}else{if(!m&&!$i(c)&&!$i(E))return!1;if(m&&$i(E))continue;m=!1,c=E|1&c}}return $i(c)||m}function $i(i){return 0==(1&i)}function ax(i,s,a,c){if(null===s)return-1;let d=0;if(c||!a){let h=!1;for(;d<s.length;){const m=s[d];if(m===i)return d;if(3===m||6===m)h=!0;else{if(1===m||2===m){let w=s[++d];for(;"string"==typeof w;)w=s[++d];continue}if(4===m)break;if(0===m){d+=4;continue}}d+=h?1:2}return-1}return function Eb(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const c=i[a];if("number"==typeof c)return-1;if(c===s)return a;a++}return-1}(s,i)}function fd(i,s,a=!1){for(let c=0;c<s.length;c++)if(P0(i,s[c],a))return!0;return!1}function zm(i,s){return i?":not("+s.trim()+")":s}function bb(i){let s=i[0],a=1,c=2,d="",h=!1;for(;a<i.length;){let m=i[a];if("string"==typeof m)if(2&c){const w=i[++a];d+="["+m+(w.length>0?'="'+w+'"':"")+"]"}else 8&c?d+="."+m:4&c&&(d+=" "+m);else""!==d&&!$i(m)&&(s+=zm(h,d),d=""),c=m,h=h||!$i(c);a++}return""!==d&&(s+=zm(h,d)),s}const xt={};function O0(i){Wm(Ft(),_e(),vn()+i,!1)}function Wm(i,s,a,c){if(!c)if(3==(3&s[2])){const h=i.preOrderCheckHooks;null!==h&&ju(s,h,a)}else{const h=i.preOrderHooks;null!==h&&Rs(s,h,0,a)}Ni(a)}function Km(i,s=null,a=null,c){const d=Mb(i,s,a,c);return d.resolveInjectorInitializers(),d}function Mb(i,s=null,a=null,c,d=new Set){const h=[a||yt,XD(i)];return c=c||("object"==typeof i?void 0:fe(i)),new Bm(h,s||ld(),c||null,d)}let Mt=(()=>{class i{static create(a,c){if(Array.isArray(a))return Km({name:""},c,a,"");{const d=a.name??"";return Km({name:d},a.parent,a.providers,d)}}}return i.THROW_IF_NOT_FOUND=So,i.NULL=new _0,i.\u0275prov=Ht({token:i,providedIn:"any",factory:()=>fn(uc)}),i.__NG_ELEMENT_ID__=-1,i})();function iu(i,s=ze.Default){const a=_e();return null===a?fn(i,s):Ku(Bn(),a,K(i),s)}function W0(){throw new Error("invalid")}function aw(i,s){const a=i.contentQueries;if(null!==a)for(let c=0;c<a.length;c+=2){const d=a[c],h=a[c+1];if(-1!==h){const m=i.data[h];bl(d),m.contentQueries(2,s[h],h)}}}function fc(i,s,a,c,d,h,m,w,E,b,A){const R=s.blueprint.slice();return R[0]=d,R[2]=76|c,(null!==A||i&&1024&i[2])&&(R[2]|=1024),Sa(R),R[3]=R[15]=i,R[8]=a,R[10]=m||i&&i[10],R[11]=w||i&&i[11],R[12]=E||i&&i[12]||null,R[9]=b||i&&i[9]||null,R[6]=h,R[20]=function ym(){return cf++}(),R[21]=A,R[16]=2==s.type?i[16]:R,R}function pc(i,s,a,c,d){let h=i.data[s];if(null===h)h=function Dd(i,s,a,c,d){const h=Lu(),m=wl(),E=i.data[s]=function cw(i,s,a,c,d,h){return{type:a,index:c,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,a,s,c,d);return null===i.firstChild&&(i.firstChild=E),null!==h&&(m?null==h.child&&null!==E.parent&&(h.child=E):null===h.next&&(h.next=E)),E}(i,s,a,c,d),function Fh(){return Et.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=a,h.value=c,h.attrs=d;const m=function Fu(){const i=Et.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return jr(h,!0),h}function gc(i,s,a,c){if(0===a)return-1;const d=s.length;for(let h=0;h<a;h++)s.push(c),i.blueprint.push(c),i.data.push(null);return d}function uw(i,s,a){Bu(s);try{const c=i.viewQuery;null!==c&&_y(1,c,a);const d=i.template;null!==d&&Hb(i,s,d,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&aw(i,s),i.staticViewQueries&&_y(2,i.viewQuery,a);const h=i.components;null!==h&&function jb(i,s){for(let a=0;a<s.length;a++)iC(i,s[a])}(s,h)}catch(c){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),c}finally{s[2]&=-5,wo()}}function mc(i,s,a,c){const d=s[2];if(128!=(128&d)){Bu(s);try{Sa(s),function Ma(i){return Et.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Hb(i,s,a,2,c);const m=3==(3&d);if(m){const b=i.preOrderCheckHooks;null!==b&&ju(s,b,null)}else{const b=i.preOrderHooks;null!==b&&Rs(s,b,0,null),Al(s,0)}if(function nC(i){for(let s=Ks(i);null!==s;s=rs(s)){if(!s[2])continue;const a=s[9];for(let c=0;c<a.length;c++){const d=a[c],h=d[3];0==(512&d[2])&&Aa(h,1),d[2]|=512}}}(s),function tC(i){for(let s=Ks(i);null!==s;s=rs(s))for(let a=10;a<s.length;a++){const c=s[a],d=c[1];Zi(c)&&mc(d,c,d.template,c[8])}}(s),null!==i.contentQueries&&aw(i,s),m){const b=i.contentCheckHooks;null!==b&&ju(s,b)}else{const b=i.contentHooks;null!==b&&Rs(s,b,1),Al(s,1)}!function uy(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let c=0;c<a.length;c++){const d=a[c];if(d<0)Ni(~d);else{const h=d,m=a[++c],w=a[++c];Uh(m,h),w(2,s[h])}}}finally{Ni(-1)}}(i,s);const w=i.components;null!==w&&function cy(i,s){for(let a=0;a<s.length;a++)rC(i,s[a])}(s,w);const E=i.viewQuery;if(null!==E&&_y(2,E,c),m){const b=i.viewCheckHooks;null!==b&&ju(s,b)}else{const b=i.viewHooks;null!==b&&Rs(s,b,2),Al(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Aa(s[3],-1))}finally{wo()}}}function Hb(i,s,a,c,d){const h=vn(),m=2&c;try{Ni(-1),m&&s.length>22&&Wm(i,s,22,!1),a(c,d)}finally{Ni(h)}}function ly(i,s,a){!xa()||(function Zb(i,s,a,c){const d=a.directiveStart,h=a.directiveEnd;i.firstCreatePass||Ps(a,s),g(c,s);const m=a.initialInputs;for(let w=d;w<h;w++){const E=i.data[w],b=mi(E);b&&Gf(s,a,E);const A=Ji(s,i,w,a);g(A,s),null!==m&&Xb(0,w-d,A,E,0,m),b&&(Wt(a.index,s)[8]=A)}}(i,s,a,hr(a,s)),128==(128&a.flags)&&function gy(i,s,a){const c=a.directiveStart,d=a.directiveEnd,h=a.index,m=function q_(){return Et.lFrame.currentDirectiveIndex}();try{Ni(h);for(let w=c;w<d;w++){const E=i.data[w],b=s[w];Vu(w),(null!==E.hostBindings||0!==E.hostVars||null!==E.hostAttrs)&&fw(E,b)}}finally{Ni(-1),Vu(m)}}(i,s,a))}function bd(i,s,a=hr){const c=s.localNames;if(null!==c){let d=s.index+1;for(let h=0;h<c.length;h+=2){const m=c[h+1],w=-1===m?a(s,i):i[m];i[d++]=w}}}function dy(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=hy(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function hy(i,s,a,c,d,h,m,w,E,b){const A=22+c,R=A+d,B=function Wb(i,s){const a=[];for(let c=0;c<s;c++)a.push(c<i?null:xt);return a}(A,R),Y="function"==typeof b?b():b;return B[1]={type:i,blueprint:B,template:a,queries:null,viewQuery:w,declTNode:s,data:B.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:E,consts:Y,incompleteFirstPass:!1}}function Hf(i,s,a,c){const d=gw(s);null===a?d.push(c):(d.push(a),i.firstCreatePass&&sC(i).push(c,d.length-1))}function lw(i,s,a){for(let c in i)if(i.hasOwnProperty(c)){const d=i[c];(a=null===a?{}:a).hasOwnProperty(c)?a[c].push(s,d):a[c]=[s,d]}return a}function fy(i,s){const c=s.directiveEnd,d=i.data,h=s.attrs,m=[];let w=null,E=null;for(let b=s.directiveStart;b<c;b++){const A=d[b],R=A.inputs,B=null===h||N0(s)?null:eC(R,h);m.push(B),w=lw(R,b,w),E=lw(A.outputs,b,E)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=w,s.outputs=E}function dw(i,s){const a=Wt(s,i);16&a[2]||(a[2]|=32)}function py(i,s,a,c){let d=!1;if(xa()){const h=function Yb(i,s,a){const c=i.directiveRegistry;let d=null;if(c)for(let h=0;h<c.length;h++){const m=c[h];fd(a,m.selectors,!1)&&(d||(d=[]),La(Ps(a,s),i,m.type),mi(m)?(Wf(i,a),d.unshift(m)):d.push(m))}return d}(i,s,a),m=null===c?null:{"":-1};if(null!==h){d=!0,Qb(a,i.data.length,h.length);for(let A=0;A<h.length;A++){const R=h[A];R.providersResolver&&R.providersResolver(R)}let w=!1,E=!1,b=gc(i,s,h.length,null);for(let A=0;A<h.length;A++){const R=h[A];a.mergedAttrs=ka(a.mergedAttrs,R.hostAttrs),Jb(i,a,s,b,R),wx(b,R,m),null!==R.contentQueries&&(a.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(a.flags|=128);const B=R.type.prototype;!w&&(B.ngOnChanges||B.ngOnInit||B.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!E&&(B.ngOnChanges||B.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),E=!0),b++}fy(i,a)}m&&function _x(i,s,a){if(s){const c=i.localNames=[];for(let d=0;d<s.length;d+=2){const h=a[s[d+1]];if(null==h)throw new ye(-301,!1);c.push(s[d],h)}}}(a,c,m)}return a.mergedAttrs=ka(a.mergedAttrs,a.attrs),d}function zf(i,s,a,c,d,h){const m=h.hostBindings;if(m){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const E=~s.index;(function vx(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=E&&w.push(E),w.push(c,d,m)}}function fw(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function Wf(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function wx(i,s,a){if(a){if(s.exportAs)for(let c=0;c<s.exportAs.length;c++)a[s.exportAs[c]]=i;mi(s)&&(a[""]=i)}}function Qb(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function Jb(i,s,a,c,d){i.data[c]=d;const h=d.factory||(d.factory=nr(d.type)),m=new Hr(h,mi(d),iu);i.blueprint[c]=m,a[c]=m,zf(i,s,0,c,gc(i,a,d.hostVars,xt),d)}function Gf(i,s,a){const c=hr(s,i),d=dy(a),h=i[10],m=us(i,fc(i,d,null,a.onPush?32:16,c,s,h,h.createRenderer(c,a),null,null,null));i[s.index]=m}function no(i,s,a,c,d,h){const m=hr(i,s);!function my(i,s,a,c,d,h,m){if(null==h)i.removeAttribute(s,d,a);else{const w=null==m?re(h):m(h,c||"",d);i.setAttribute(s,d,w,a)}}(s[11],m,h,i.value,a,c,d)}function Xb(i,s,a,c,d,h){const m=h[s];if(null!==m){const w=c.setInput;for(let E=0;E<m.length;){const b=m[E++],A=m[E++],R=m[E++];null!==w?c.setInput(a,R,b,A):a[A]=R}}}function eC(i,s){let a=null,c=0;for(;c<s.length;){const d=s[c];if(0!==d)if(5!==d){if("number"==typeof d)break;i.hasOwnProperty(d)&&(null===a&&(a=[]),a.push(d,i[d],s[c+1])),c+=2}else c+=2;else c+=4}return a}function pw(i,s,a,c){return new Array(i,!0,!1,s,null,0,c,a,null,null)}function rC(i,s){const a=Wt(s,i);if(Zi(a)){const c=a[1];48&a[2]?mc(c,a,c.template,a[8]):a[5]>0&&yy(a)}}function yy(i){for(let c=Ks(i);null!==c;c=rs(c))for(let d=10;d<c.length;d++){const h=c[d];if(Zi(h))if(512&h[2]){const m=h[1];mc(m,h,m.template,h[8])}else h[5]>0&&yy(h)}const a=i[1].components;if(null!==a)for(let c=0;c<a.length;c++){const d=Wt(a[c],i);Zi(d)&&d[5]>0&&yy(d)}}function iC(i,s){const a=Wt(s,i),c=a[1];(function qf(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(c,a),uw(c,a,a[8])}function us(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function vy(i){for(;i;){i[2]|=32;const s=qs(i);if(Pu(i)&&!s)return i;i=s}return null}function Kf(i,s,a,c=!0){const d=s[10];d.begin&&d.begin();try{mc(i,s,i.template,a)}catch(m){throw c&&mw(s,m),m}finally{d.end&&d.end()}}function _y(i,s,a){bl(0),s(i,a)}function gw(i){return i[7]||(i[7]=[])}function sC(i){return i.cleanup||(i.cleanup=[])}function mw(i,s){const a=i[9],c=a?a.get(nu,null):null;c&&c.handleError(s)}function Cd(i,s,a,c,d){for(let h=0;h<a.length;){const m=a[h++],w=a[h++],E=s[m],b=i.data[m];null!==b.setInput?b.setInput(E,d,c,w):E[w]=d}}function ro(i,s,a){const c=function Ca(i,s){return En(s[i])}(s,i);!function _m(i,s,a){i.setValue(s,a)}(i[11],c,a)}function Yf(i,s,a){let c=a?i.styles:null,d=a?i.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const w=s[m];"number"==typeof w?h=w:1==h?d=Ne(d,w):2==h&&(c=Ne(c,w+": "+s[++m]+";"))}a?i.styles=c:i.stylesWithoutHost=c,a?i.classes=d:i.classesWithoutHost=d}function Td(i,s,a,c,d=!1){for(;null!==a;){const h=s[a.index];if(null!==h&&c.push(En(h)),kr(h))for(let w=10;w<h.length;w++){const E=h[w],b=E[1].firstChild;null!==b&&Td(E[1],E,b,c)}const m=a.type;if(8&m)Td(i,s,a.child,c);else if(32&m){const w=Ka(a,s);let E;for(;E=w();)c.push(E)}else if(16&m){const w=Sm(s,a);if(Array.isArray(w))c.push(...w);else{const E=qs(s[16]);Td(E[1],E,w,c,!0)}}a=d?a.projectionNext:a.next}return c}class Sd{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return Td(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(kr(s)){const a=s[8],c=a?a.indexOf(this):-1;c>-1&&(wm(s,c),rr(a,c))}this._attachedToViewContainer=!1}r0(this._lView[1],this._lView)}onDestroy(s){Hf(this._lView[1],this._lView,null,s)}markForCheck(){vy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Kf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ye(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function t0(i,s){Qa(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ye(902,!1);this._appRef=s}}class yw extends Sd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Kf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class wy extends jo{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=x(s);return new cs(a,this.ngModule)}}function vw(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class bx{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,c){const d=this.injector.get(s,Rf,c);return d!==Rf||a===Rf?d:this.parentInjector.get(s,a,c)}}class cs extends ab{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function Cb(i){return i.map(bb).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return vw(this.componentDef.inputs)}get outputs(){return vw(this.componentDef.outputs)}create(s,a,c,d){let h=(d=d||this.ngModule)instanceof $o?d:d?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new bx(s,h):s,w=m.get(dd,null);if(null===w)throw new ye(407,!1);const E=m.get(fb,null),b=w.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",R=c?function Gb(i,s,a){return i.selectRootElement(s,a===nt.ShadowDom)}(b,c,this.componentDef.encapsulation):Jl(b,A,function oC(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(A)),B=this.componentDef.onPush?288:272,Y=hy(0,null,null,1,0,null,null,null,null,null),ae=fc(null,Y,null,B,null,null,w,b,E,m,null);let Se,Ue;Bu(ae);try{const Ge=function _w(i,s,a,c,d,h){const m=a[1];a[22]=i;const E=pc(m,22,2,"#host",null),b=E.mergedAttrs=s.hostAttrs;null!==b&&(Yf(E,b,!0),null!==i&&(Pi(d,i,b),null!==E.classes&&wf(d,i,E.classes),null!==E.styles&&_f(d,i,E.styles)));const A=c.createRenderer(i,s),R=fc(a,dy(s),null,s.onPush?32:16,a[22],E,c,A,h||null,null,null);return m.firstCreatePass&&(La(Ps(E,a),m,s.type),Wf(m,E),Qb(E,a.length,1)),us(a,R),a[22]=R}(R,this.componentDef,ae,w,b);if(R)if(c)Pi(b,R,["ng-version",M0.full]);else{const{attrs:ct,classes:ge}=function Tb(i){const s=[],a=[];let c=1,d=2;for(;c<i.length;){let h=i[c];if("string"==typeof h)2===d?""!==h&&s.push(h,i[++c]):8===d&&a.push(h);else{if(!$i(d))break;d=h}c++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);ct&&Pi(b,R,ct),ge&&ge.length>0&&wf(b,R,ge.join(" "))}if(Ue=Ta(Y,22),void 0!==a){const ct=Ue.projection=[];for(let ge=0;ge<this.ngContentSelectors.length;ge++){const ft=a[ge];ct.push(null!=ft?Array.from(ft):null)}}Se=function aC(i,s,a,c){const d=a[1],h=function hw(i,s,a){const c=Bn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),Jb(i,c,s,gc(i,s,1,null),a),fy(i,c));const d=Ji(s,i,c.directiveStart,c);g(d,s);const h=hr(c,s);return h&&g(h,s),d}(d,a,s);if(i[8]=a[8]=h,null!==c)for(const w of c)w(h,s);if(s.contentQueries){const w=Bn();s.contentQueries(1,h,w.directiveStart)}const m=Bn();return!d.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Ni(m.index),zf(a[1],m,0,m.directiveStart,m.directiveEnd,s),fw(s,h)),h}(Ge,this.componentDef,ae,[Ey]),uw(Y,ae,null)}finally{wo()}return new Iy(this.componentType,Se,Ho(Ue,ae),ae,Ue)}}class Iy extends class T0{}{constructor(s,a,c,d,h){super(),this.location=c,this._rootLView=d,this._tNode=h,this.instance=a,this.hostView=this.changeDetectorRef=new yw(d),this.componentType=s}setInput(s,a){const c=this._tNode.inputs;let d;if(null!==c&&(d=c[s])){const h=this._rootLView;Cd(h[1],h,d,s,a),dw(h,this._tNode.index)}}get injector(){return new Va(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Ey(){const i=Bn();Na(_e()[1],i)}let Qf=null;function oo(){if(!Qf){const i=Dt.Symbol;if(i&&i.iterator)Qf=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const c=s[a];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Qf=c)}}}return Qf}function Ad(i){return!!xd(i)&&(Array.isArray(i)||!(i instanceof Map)&&oo()in i)}function xd(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function sr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function Jf(i,s,a,c){const d=_e();return sr(d,Ra(),s)&&(Ft(),no(hn(),d,i,s,a,c)),Jf}function Mw(i,s,a,c,d,h,m,w){const E=_e(),b=Ft(),A=i+22,R=b.firstCreatePass?function My(i,s,a,c,d,h,m,w,E){const b=s.consts,A=pc(s,i,4,m||null,yi(b,w));py(s,a,A,yi(b,E)),Na(s,A);const R=A.tViews=hy(2,A,c,d,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,b);return null!==s.queries&&(s.queries.template(s,A),R.queries=s.queries.embeddedTView(A)),A}(A,b,E,s,a,c,d,h,m):b.data[A];jr(R,!1);const B=E[11].createComment("");yf(b,E,B,R),g(B,E),us(E,E[A]=pw(B,E,B,R)),go(R)&&ly(b,E,R),null!=m&&bd(E,R,w)}function Ny(i,s,a){const c=_e();return sr(c,Ra(),s)&&function pn(i,s,a,c,d,h,m,w){const E=hr(s,a);let A,b=s.inputs;!w&&null!=b&&(A=b[c])?(Cd(i,a,A,c,d),Nu(s)&&dw(a,s.index)):3&s.type&&(c=function qb(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(c),d=null!=m?m(d,s.value||"",c):d,h.setProperty(E,c,d))}(Ft(),hn(),c,i,s,c[11],a,!1),Ny}function Md(i,s,a,c,d){const m=d?"class":"style";Cd(i,a,s.inputs[m],m,c)}function Ec(i,s,a,c){const d=_e(),h=Ft(),m=22+i,w=d[11],E=d[m]=Jl(w,s,function Sl(){return Et.lFrame.currentNamespace}()),b=h.firstCreatePass?function hC(i,s,a,c,d,h,m){const w=s.consts,b=pc(s,i,2,d,yi(w,h));return py(s,a,b,yi(w,m)),null!==b.attrs&&Yf(b,b.attrs,!1),null!==b.mergedAttrs&&Yf(b,b.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,b),b}(m,h,d,0,s,a,c):h.data[m];jr(b,!0);const A=b.mergedAttrs;null!==A&&Pi(w,E,A);const R=b.classes;null!==R&&wf(w,E,R);const B=b.styles;return null!==B&&_f(w,E,B),64!=(64&b.flags)&&yf(h,d,E,b),0===function ml(){return Et.lFrame.elementDepthCount}()&&g(E,d),function jg(){Et.lFrame.elementDepthCount++}(),go(b)&&(ly(h,d,b),function zb(i,s,a){if(Ts(s)){const d=s.directiveEnd;for(let h=s.directiveStart;h<d;h++){const m=i.data[h];m.contentQueries&&m.contentQueries(1,a[h],h)}}}(h,b,d)),null!==c&&bd(d,b),Ec}function Rd(){let i=Bn();wl()?function Uu(){Et.lFrame.isParent=!1}():(i=i.parent,jr(i,!1));const s=i;!function yl(){Et.lFrame.elementDepthCount--}();const a=Ft();return a.firstCreatePass&&(Na(a,i),Ts(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Hu(i){return 0!=(16&i.flags)}(s)&&Md(a,s,_e(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function zu(i){return 0!=(32&i.flags)}(s)&&Md(a,s,_e(),s.stylesWithoutHost,!1),Rd}function Nd(i,s,a,c){return Ec(i,s,a,c),Rd(),Nd}function ep(i){return!!i&&"function"==typeof i.then}function Oy(i){return!!i&&"function"==typeof i.subscribe}const Pw=Oy;function Ly(i,s,a,c){const d=_e(),h=Ft(),m=Bn();return function tp(i,s,a,c,d,h,m,w){const E=go(c),A=i.firstCreatePass&&sC(i),R=s[8],B=gw(s);let Y=!0;if(3&c.type||w){const Ue=hr(c,s),Ge=w?w(Ue):Ue,ct=B.length,ge=w?qt=>w(En(qt[c.index])):c.index;let ft=null;if(!w&&E&&(ft=function Ow(i,s,a,c){const d=i.cleanup;if(null!=d)for(let h=0;h<d.length-1;h+=2){const m=d[h];if(m===a&&d[h+1]===c){const w=s[7],E=d[h+2];return w.length>E?w[E]:null}"string"==typeof m&&(h+=2)}return null}(i,s,d,c.index)),null!==ft)(ft.__ngLastListenerFn__||ft).__ngNextListenerFn__=h,ft.__ngLastListenerFn__=h,Y=!1;else{h=np(c,s,R,h,!1);const qt=a.listen(Ge,d,h);B.push(h,qt),A&&A.push(d,ge,ct,ct+1)}}else h=np(c,s,R,h,!1);const ae=c.outputs;let Se;if(Y&&null!==ae&&(Se=ae[d])){const Ue=Se.length;if(Ue)for(let Ge=0;Ge<Ue;Ge+=2){const an=s[Se[Ge]][Se[Ge+1]].subscribe(h),Du=B.length;B.push(h,an),A&&A.push(d,c.index,Du,-(Du+1))}}}(h,d,d[11],m,i,s,0,c),Ly}function Lw(i,s,a,c){try{return!1!==a(c)}catch(d){return mw(i,d),!1}}function np(i,s,a,c,d){return function h(m){if(m===Function)return c;vy(2&i.flags?Wt(i.index,s):s);let E=Lw(s,0,c,m),b=h.__ngNextListenerFn__;for(;b;)E=Lw(s,0,b,m)&&E,b=b.__ngNextListenerFn__;return d&&!1===E&&(m.preventDefault(),m.returnValue=!1),E}}function ds(i,s=""){const a=_e(),c=Ft(),d=i+22,h=c.firstCreatePass?pc(c,d,1,s,null):c.data[d],m=a[d]=function gf(i,s){return i.createText(s)}(a[11],s);yf(c,a,m,h),jr(h,!1)}function up(i){return cp("",i,""),up}function cp(i,s,a){const c=_e(),d=function wc(i,s,a,c){return sr(i,Ra(),a)?s+re(a)+c:xt}(c,i,s,a);return d!==xt&&ro(c,vn(),d),cp}const Cc=void 0;var Qy=["en",[["a","p"],["AM","PM"],Cc],[["AM","PM"],Cc,Cc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cc,"{1} 'at' {0}",Cc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Ux(i){const a=Math.floor(Math.abs(i)),c=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===c?1:5}];let Xo={};function vp(i){const s=function $x(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=ea(s);if(a)return a;const c=s.split("-")[0];if(a=ea(c),a)return a;if("en"===c)return Qy;throw new ye(701,!1)}function Tc(i){return vp(i)[at.PluralCase]}function ea(i){return i in Xo||(Xo[i]=Dt.ng&&Dt.ng.common&&Dt.ng.common.locales&&Dt.ng.common.locales[i]),Xo[i]}var at=(()=>((at=at||{})[at.LocaleId=0]="LocaleId",at[at.DayPeriodsFormat=1]="DayPeriodsFormat",at[at.DayPeriodsStandalone=2]="DayPeriodsStandalone",at[at.DaysFormat=3]="DaysFormat",at[at.DaysStandalone=4]="DaysStandalone",at[at.MonthsFormat=5]="MonthsFormat",at[at.MonthsStandalone=6]="MonthsStandalone",at[at.Eras=7]="Eras",at[at.FirstDayOfWeek=8]="FirstDayOfWeek",at[at.WeekendRange=9]="WeekendRange",at[at.DateFormat=10]="DateFormat",at[at.TimeFormat=11]="TimeFormat",at[at.DateTimeFormat=12]="DateTimeFormat",at[at.NumberSymbols=13]="NumberSymbols",at[at.NumberFormats=14]="NumberFormats",at[at.CurrencyCode=15]="CurrencyCode",at[at.CurrencySymbol=16]="CurrencySymbol",at[at.CurrencyName=17]="CurrencyName",at[at.Currencies=18]="Currencies",at[at.Directionality=19]="Directionality",at[at.PluralCase=20]="PluralCase",at[at.ExtraData=21]="ExtraData",at))();const Sc="en-US";let bi=Sc;class na{}class vv{}function ZC(i,s){return new _v(i,s??null)}class _v extends na{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wy(this);const c=qe(s);this._bootstrapComponents=is(c.bootstrap),this._r3Injector=Mb(s,a,[{provide:na,useValue:this},{provide:jo,useValue:this.componentFactoryResolver}],fe(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Lp extends vv{constructor(s){super(),this.moduleType=s}create(s){return new _v(this.moduleType,s)}}class bI extends na{constructor(s,a,c){super(),this.componentFactoryResolver=new wy(this),this.instance=null;const d=new Bm([...s,{provide:na,useValue:this},{provide:jo,useValue:this.componentFactoryResolver}],a||ld(),c,new Set(["environment"]));this.injector=d,d.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function Nc(i,s,a=null){return new bI(i,s,a).injector}let YC=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const c=w0(0,a.type),d=c.length>0?Nc([c],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,d)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=Ht({token:i,providedIn:"environment",factory:()=>new i(fn($o))}),i})();function CI(i){i.getStandaloneInjector=s=>s.get(YC).getOrCreateStandaloneInjector(i)}function Tv(i,s,a,c,d,h){const m=s+a;return sr(i,m,d)?function Ei(i,s,a){return i[s]=a}(i,m+1,h?c.call(h,d):c(d)):function kc(i,s){const a=i[s];return a===xt?void 0:a}(i,m+1)}function Gd(i,s){const a=Ft();let c;const d=i+22;a.firstCreatePass?(c=function qd(i,s){if(s)for(let a=s.length-1;a>=0;a--){const c=s[a];if(i===c.name)return c}}(s,a.pipeRegistry),a.data[d]=c,c.onDestroy&&(a.destroyHooks||(a.destroyHooks=[])).push(d,c.onDestroy)):c=a.data[d];const h=c.factory||(c.factory=nr(c.type)),m=dn(iu);try{const w=Wu(!1),E=h();return Wu(w),function Rw(i,s,a,c){a>=i.data.length&&(i.data[a]=null,i.blueprint[a]=null),s[a]=c}(a,_e(),d,E),E}finally{dn(m)}}function $p(i,s,a){const c=i+22,d=_e(),h=function Ki(i,s){return i[s]}(d,c);return function Kd(i,s){return i[1].data[s].pure}(d,c)?Tv(d,function On(){const i=Et.lFrame;let s=i.bindingRootIndex;return-1===s&&(s=i.bindingRootIndex=i.tView.bindingStartIndex),s}(),s,h.transform,a,h):h.transform(a)}function zi(i){return s=>{setTimeout(i,void 0,s)}}const ui=class cu extends y.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,c){let d=s,h=a||(()=>null),m=c;if(s&&"object"==typeof s){const E=s;d=E.next?.bind(E),h=E.error?.bind(E),m=E.complete?.bind(E)}this.__isAsync&&(h=zi(h),d&&(d=zi(d)),m&&(m=zi(m)));const w=super.subscribe({next:d,error:h,complete:m});return s instanceof U.w0&&s.add(w),w}};function jp(){return this._results[oo()]()}class Hp{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=oo(),c=Hp.prototype;c[a]||(c[a]=jp)}get changes(){return this._changes||(this._changes=new ui)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const c=this;c.dirty=!1;const d=cn(s);(this._changesDetected=!function Oi(i,s,a){if(i.length!==s.length)return!1;for(let c=0;c<i.length;c++){let d=i[c],h=s[c];if(a&&(d=a(d),h=a(h)),h!==d)return!1}return!0}(c._results,d,a))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let on=(()=>{class i{}return i.__NG_ELEMENT_ID__=Yd,i})();const zp=on,Zd=class extends zp{constructor(s,a,c){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=c}createEmbeddedView(s,a){const c=this._declarationTContainer.tViews,d=fc(this._declarationLView,c,s,16,null,c.declTNode,null,null,null,null,a||null);d[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(d[19]=m.createEmbeddedView(c)),uw(c,d,s),new Sd(d)}};function Yd(){return Wp(Bn(),_e())}function Wp(i,s){return 4&i.type?new Zd(s,i,Ho(i,s)):null}let Qd=(()=>{class i{}return i.__NG_ELEMENT_ID__=nT,i})();function nT(){return lo(Bn(),_e())}const rT=Qd,FI=class extends rT{constructor(s,a,c){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=c}get element(){return Ho(this._hostTNode,this._hostLView)}get injector(){return new Va(this._hostTNode,this._hostLView)}get parentInjector(){const s=Oa(this._hostTNode,this._hostLView);if(tm(s)){const a=Qi(s,this._hostLView),c=Ns(s);return new Va(a[1].data[c+8],a)}return new Va(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=UI(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,c){let d,h;"number"==typeof c?d=c:null!=c&&(d=c.index,h=c.injector);const m=s.createEmbeddedView(a||{},h);return this.insert(m,d),m}createComponent(s,a,c,d,h){const m=s&&!function ki(i){return"function"==typeof i}(s);let w;if(m)w=a;else{const R=a||{};w=R.index,c=R.injector,d=R.projectableNodes,h=R.environmentInjector||R.ngModuleRef}const E=m?s:new cs(x(s)),b=c||this.parentInjector;if(!h&&null==E.ngModule){const B=(m?b:this.parentInjector).get($o,null);B&&(h=B)}const A=E.create(b,d,void 0,h);return this.insert(A.hostView,w),A}insert(s,a){const c=s._lView,d=c[1];if(function $g(i){return kr(i[3])}(c)){const A=this.indexOf(s);if(-1!==A)this.detach(A);else{const R=c[3],B=new FI(R,R[6],R[3]);B.detach(B.indexOf(s))}}const h=this._adjustIndex(a),m=this._lContainer;!function bD(i,s,a,c){const d=10+c,h=a.length;c>0&&(a[d-1][4]=s),c<h-10?(s[4]=a[d],Ls(a,10+c,s)):(a.push(s),s[4]=null),s[3]=a;const m=s[17];null!==m&&a!==m&&function CD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(m,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(d,c,m,h);const w=Xl(h,m),E=c[11],b=wi(E,m[7]);return null!==b&&function mf(i,s,a,c,d,h){c[0]=d,c[6]=s,Qa(i,c,a,1,d,h)}(d,m[6],E,c,b,w),s.attachToViewContainerRef(),Ls(lu(m),h,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=UI(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),c=wm(this._lContainer,a);c&&(rr(lu(this._lContainer),a),r0(c[1],c))}detach(s){const a=this._adjustIndex(s,-1),c=wm(this._lContainer,a);return c&&null!=rr(lu(this._lContainer),a)?new Sd(c):null}_adjustIndex(s,a=0){return s??this.length+a}};function UI(i){return i[8]}function lu(i){return i[8]||(i[8]=[])}function lo(i,s){let a;const c=s[i.index];if(kr(c))a=c;else{let d;if(8&i.type)d=En(c);else{const h=s[11];d=h.createComment("");const m=hr(i,s);Uo(h,wi(h,m),d,function ic(i,s){return i.nextSibling(s)}(h,m),!1)}s[i.index]=a=pw(c,s,d,i),us(s,a)}return new FI(a,i,s)}class sa{constructor(s){this.queryList=s,this.matches=null}clone(){return new sa(this.queryList)}setDirty(){this.queryList.setDirty()}}class xv{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const c=null!==s.contentQueries?s.contentQueries[0]:a.length,d=[];for(let h=0;h<c;h++){const m=a.getByIndex(h);d.push(this.queries[m.indexInDeclarationView].clone())}return new xv(d)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Ov(s,a).matches&&this.queries[a].setDirty()}}class $I{constructor(s,a,c=null){this.predicate=s,this.flags=a,this.read=c}}class Gp{constructor(s=[]){this.queries=s}elementStart(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let c=0;c<this.length;c++){const d=null!==a?a.length:0,h=this.getByIndex(c).embeddedTView(s,d);h&&(h.indexInDeclarationView=c,null!==a?a.push(h):a=[h])}return null!==a?new Gp(a):null}template(s,a){for(let c=0;c<this.queries.length;c++)this.queries[c].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Mv{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Mv(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let c=s.parent;for(;null!==c&&8&c.type&&c.index!==a;)c=c.parent;return a===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const h=c[d];this.matchTNodeWithReadOption(s,a,jI(a,h)),this.matchTNodeWithReadOption(s,a,Ua(a,s,h,!1,!1))}else c===on?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,Ua(a,s,c,!1,!1))}matchTNodeWithReadOption(s,a,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===tu||d===Qd||d===on&&4&a.type)this.addMatch(a.index,-2);else{const h=Ua(a,s,d,!1,!1);null!==h&&this.addMatch(a.index,h)}else this.addMatch(a.index,c)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function jI(i,s){const a=i.localNames;if(null!==a)for(let c=0;c<a.length;c+=2)if(a[c]===s)return a[c+1];return null}function Rv(i,s,a,c){return-1===a?function HI(i,s){return 11&i.type?Ho(i,s):4&i.type?Wp(i,s):null}(s,i):-2===a?function Nv(i,s,a){return a===tu?Ho(s,i):a===on?Wp(s,i):a===Qd?lo(s,i):void 0}(i,s,c):Ji(i,i[1],a,s)}function Pv(i,s,a,c){const d=s[19].queries[c];if(null===d.matches){const h=i.data,m=a.matches,w=[];for(let E=0;E<m.length;E+=2){const b=m[E];w.push(b<0?null:Rv(s,h[b],m[E+1],a.metadata.read))}d.matches=w}return d.matches}function qp(i,s,a,c){const d=i.queries.getByIndex(a),h=d.matches;if(null!==h){const m=Pv(i,s,d,a);for(let w=0;w<h.length;w+=2){const E=h[w];if(E>0)c.push(m[w/2]);else{const b=h[w+1],A=s[-E];for(let R=10;R<A.length;R++){const B=A[R];B[17]===B[3]&&qp(B[1],B,b,c)}if(null!==A[9]){const R=A[9];for(let B=0;B<R.length;B++){const Y=R[B];qp(Y[1],Y,b,c)}}}}}return c}function Kp(i){const s=_e(),a=Ft(),c=Dl();bl(c+1);const d=Ov(a,c);if(i.dirty&&function Bg(i){return 4==(4&i[2])}(s)===(2==(2&d.metadata.flags))){if(null===d.matches)i.reset([]);else{const h=d.crossesNgTemplate?qp(a,s,c,[]):Pv(a,s,d,c);i.reset(h,lb),i.notifyOnChanges()}return!0}return!1}function zI(i,s,a,c){const d=Ft();if(d.firstCreatePass){const h=Bn();(function Jd(i,s,a){null===i.queries&&(i.queries=new Gp),i.queries.track(new Mv(s,a))})(d,new $I(s,a,c),h.index),function kv(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(d,i),2==(2&a)&&(d.staticContentQueries=!0)}!function Fc(i,s,a){const c=new Hp(4==(4&a));Hf(i,s,c,c.destroy),null===s[19]&&(s[19]=new xv),s[19].queries.push(new sa(c))}(d,_e(),a)}function WI(){return function Zp(i,s){return i[19].queries[s].queryList}(_e(),Dl())}function Ov(i,s){return i.queries.getByIndex(s)}function ms(...i){}const Qe=new sn("Application Initializer");let dt=(()=>{class i{constructor(a){this.appInits=a,this.resolve=ms,this.reject=ms,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const a=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const h=this.appInits[d]();if(ep(h))a.push(h);else if(Pw(h)){const m=new Promise((w,E)=>{h.subscribe({complete:w,error:E})});a.push(m)}}Promise.all(a).then(()=>{c()}).catch(d=>{this.reject(d)}),0===a.length&&c(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(fn(Qe,8))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const fE=new sn("AppId",{providedIn:"root",factory:function Be(){return`${Ie()}${Ie()}${Ie()}`}});function Ie(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Gn=new sn("Platform Initializer"),pE=new sn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gE=new sn("appBootstrapListener");let dT=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const rh=new sn("LocaleId",{providedIn:"root",factory:()=>zr(rh,ze.Optional|ze.SkipSelf)||function hT(){return typeof $localize<"u"&&$localize.locale||Sc}()}),fT=new sn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Tt{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let jc=(()=>{class i{compileModuleSync(a){return new Lp(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const c=this.compileModuleSync(a),h=is(qe(a).declarations).reduce((m,w)=>{const E=x(w);return E&&m.push(new cs(E)),m},[]);return new Tt(c,h)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Ve=(()=>Promise.resolve(0))();function zc(i){typeof Zone>"u"?Ve.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class ur{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ui(!1),this.onMicrotaskEmpty=new ui(!1),this.onStable=new ui(!1),this.onError=new ui(!1),typeof Zone>"u")throw new ye(908,!1);Zone.assertZonePatched();const d=this;if(d._nesting=0,d._outer=d._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;d._inner=d._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&a,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function Hv(){let i=Dt.requestAnimationFrame,s=Dt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const c=s[Zone.__symbol__("OriginalDelegate")];c&&(s=c)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function ih(i){const s=()=>{!function mT(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Dt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,tg(i),i.isCheckStableRunning=!0,Wc(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),tg(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,c,d,h,m,w)=>{try{return zv(i),a.invokeTask(d,h,m,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||i.shouldCoalesceRunChangeDetection)&&s(),Zr(i)}},onInvoke:(a,c,d,h,m,w,E)=>{try{return zv(i),a.invoke(d,h,m,w,E)}finally{i.shouldCoalesceRunChangeDetection&&s(),Zr(i)}},onHasTask:(a,c,d,h)=>{a.hasTask(d,h),c===d&&("microTask"==h.change?(i._hasPendingMicrotasks=h.microTask,tg(i),Wc(i)):"macroTask"==h.change&&(i.hasPendingMacrotasks=h.macroTask))},onHandleError:(a,c,d,h)=>(a.handleError(d,h),i.runOutsideAngular(()=>i.onError.emit(h)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ur.isInAngularZone())throw new ye(909,!1)}static assertNotInAngularZone(){if(ur.isInAngularZone())throw new ye(909,!1)}run(s,a,c){return this._inner.run(s,a,c)}runTask(s,a,c,d){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+d,s,gT,ms,ms);try{return h.runTask(m,a,c)}finally{h.cancelTask(m)}}runGuarded(s,a,c){return this._inner.runGuarded(s,a,c)}runOutsideAngular(s){return this._outer.run(s)}}const gT={};function Wc(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function tg(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function zv(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Zr(i){i._nesting--,Wc(i)}class Wv{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ui,this.onMicrotaskEmpty=new ui,this.onStable=new ui,this.onError=new ui}run(s,a,c){return s.apply(a,c)}runGuarded(s,a,c){return s.apply(a,c)}runOutsideAngular(s){return s()}runTask(s,a,c,d){return s.apply(a,c)}}const Gv=new sn(""),qv=new sn("");let Gc,oa=(()=>{class i{constructor(a,c,d){this._ngZone=a,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Gc||(function te(i){Gc=i}(d),d.addToWindow(c)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ur.assertNotInAngularZone(),zc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())zc(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(a)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,c,d){let h=-1;c&&c>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),a(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:a,timeoutId:h,updateCb:d})}whenStable(a,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,c,d){return[]}}return i.\u0275fac=function(a){return new(a||i)(fn(ur),fn(ng),fn(qv))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac}),i})(),ng=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,c){this._applications.set(a,c)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,c=!0){return Gc?.findTestabilityInTree(this,a,c)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),cr=null;const yE=new sn("AllowMultipleToken"),yu=new sn("PlatformDestroyListeners");class Kv{constructor(s,a){this.name=s,this.token=a}}function aa(i,s,a=[]){const c=`Platform: ${s}`,d=new sn(c);return(h=[])=>{let m=Xn();if(!m||m.injector.get(yE,!1)){const w=[...a,...h,{provide:d,useValue:!0}];i?i(w):function vT(i){if(cr&&!cr.get(yE,!1))throw new ye(400,!1);cr=i;const s=i.get(rn);(function Fr(i){const s=i.get(Gn,null);s&&s.forEach(a=>a())})(i)}(function Cn(i=[],s){return Mt.create({name:s,providers:[{provide:Vm,useValue:"platform"},{provide:yu,useValue:new Set([()=>cr=null])},...i]})}(w,c))}return function _E(i){const s=Xn();if(!s)throw new ye(401,!1);return s}()}}function Xn(){return cr?.get(rn)??null}let rn=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,c){const d=function vu(i,s){let a;return a="noop"===i?new Wv:("zone.js"===i?void 0:i)||new ur(s),a}(c?.ngZone,function Yv(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(c)),h=[{provide:ur,useValue:d}];return d.run(()=>{const m=Mt.create({providers:h,parent:this.injector,name:a.moduleType.name}),w=a.create(m),E=w.injector.get(nu,null);if(!E)throw new ye(402,!1);return d.runOutsideAngular(()=>{const b=d.onError.subscribe({next:A=>{E.handleError(A)}});w.onDestroy(()=>{rg(this._modules,w),b.unsubscribe()})}),function Yr(i,s,a){try{const c=a();return ep(c)?c.catch(d=>{throw s.runOutsideAngular(()=>i.handleError(d)),d}):c}catch(c){throw s.runOutsideAngular(()=>i.handleError(c)),c}}(E,d,()=>{const b=w.injector.get(dt);return b.runInitializers(),b.donePromise.then(()=>(function LC(i){kt(i,"Expected localeId to be defined"),"string"==typeof i&&(bi=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(rh,Sc)||Sc),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,c=[]){const d=wE({},c);return function yT(i,s,a){const c=new Lp(a);return Promise.resolve(c)}(0,0,a).then(h=>this.bootstrapModuleFactory(h,d))}_moduleDoBootstrap(a){const c=a.injector.get(Nn);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new ye(403,!1);a.instance.ngDoBootstrap(c)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ye(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const a=this._injector.get(yu,null);a&&(a.forEach(c=>c()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(fn(Mt))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function wE(i,s){return Array.isArray(s)?s.reduce(wE,i):{...i,...s}}let Nn=(()=>{class i{constructor(a,c,d){this._zone=a,this._injector=c,this._exceptionHandler=d,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new P.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),m=new P.y(w=>{let E;this._zone.runOutsideAngular(()=>{E=this._zone.onStable.subscribe(()=>{ur.assertNotInAngularZone(),zc(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const b=this._zone.onUnstable.subscribe(()=>{ur.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{E.unsubscribe(),b.unsubscribe()}});this.isStable=(0,oe.T)(h,m.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,c){const d=a instanceof ab;if(!this._injector.get(dt).done)throw!d&&De(a),new ye(405,false);let m;m=d?a:this._injector.get(jo).resolveComponentFactory(a),this.componentTypes.push(m.componentType);const w=function vE(i){return i.isBoundToModule}(m)?void 0:this._injector.get(na),b=m.create(Mt.NULL,[],c||m.selector,w),A=b.location.nativeElement,R=b.injector.get(Gv,null);return R?.registerApplication(A),b.onDestroy(()=>{this.detachView(b.hostView),rg(this.components,b),R?.unregisterApplication(A)}),this._loadComponent(b),b}tick(){if(this._runningTick)throw new ye(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const c=a;this._views.push(c),c.attachToAppRef(this)}detachView(a){const c=a;rg(this._views,c),c.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gE,[]).concat(this._bootstrapListeners).forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>rg(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new ye(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(fn(ur),fn($o),fn(nu))},i.\u0275prov=Ht({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function rg(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let ua=!0,ig=!1;function IE(){return ig=!0,ua}function sh(){if(ig)throw new Error("Cannot enable prod mode after platform setup.");ua=!1}let oh=(()=>{class i{}return i.__NG_ELEMENT_ID__=EE,i})();function EE(i){return function ca(i,s,a){if(Nu(i)&&!a){const c=Wt(i.index,s);return new Sd(c,c)}return 47&i.type?new Sd(s[16],s):null}(Bn(),_e(),16==(16&i))}class ln{constructor(){}supports(s){return Ad(s)}create(s){return new bE(s)}}const bT=(i,s)=>s;class bE{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||bT}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,c=this._removalsHead,d=0,h=null;for(;a||c;){const m=!c||a&&a.currentIndex<uh(c,d,h)?a:c,w=uh(m,d,h),E=m.currentIndex;if(m===c)d--,c=c._nextRemoved;else if(a=a._next,null==m.previousIndex)d++;else{h||(h=[]);const b=w-d,A=E-d;if(b!=A){for(let B=0;B<b;B++){const Y=B<h.length?h[B]:h[B]=0,ae=Y+B;A<=ae&&ae<b&&(h[B]=Y+1)}h[m.previousIndex]=A-b}}w!==E&&s(m,w,E)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Ad(s))throw new ye(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let d,h,m,a=this._itHead,c=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)h=s[w],m=this._trackByFn(w,h),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,h,m,w)),Object.is(a.item,h)||this._addIdentityChange(a,h)):(a=this._mismatch(a,h,m,w),c=!0),a=a._next}else d=0,function cC(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[oo()]();let c;for(;!(c=a.next()).done;)s(c.value)}}(s,w=>{m=this._trackByFn(d,w),null!==a&&Object.is(a.trackById,m)?(c&&(a=this._verifyReinsertion(a,w,m,d)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,m,d),c=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,c,d){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,h,d)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,h,d)):s=this._addAfter(new Eu(a,c),h,d),s}_verifyReinsertion(s,a,c,d){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==h?s=this._reinsertAfter(h,s._prev,d):s.currentIndex!=d&&(s.currentIndex=d,this._addToMoves(s,d)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const d=s._prevRemoved,h=s._nextRemoved;return null===d?this._removalsHead=h:d._nextRemoved=h,null===h?this._removalsTail=d:h._prevRemoved=d,this._insertAfter(s,a,c),this._addToMoves(s,c),s}_moveAfter(s,a,c){return this._unlink(s),this._insertAfter(s,a,c),this._addToMoves(s,c),s}_addAfter(s,a,c){return this._insertAfter(s,a,c),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,c){const d=null===a?this._itHead:a._next;return s._next=d,s._prev=a,null===d?this._itTail=s:d._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Qc),this._linkedRecords.put(s),s.currentIndex=c,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,c=s._next;return null===a?this._itHead=c:a._next=c,null===c?this._itTail=a:c._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qc),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class Eu{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class CT{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===a||a<=c.currentIndex)&&Object.is(c.trackById,s))return c;return null}remove(s){const a=s._prevDup,c=s._nextDup;return null===a?this._head=c:a._nextDup=c,null===c?this._tail=a:c._prevDup=a,null===this._head}}class Qc{constructor(){this.map=new Map}put(s){const a=s.trackById;let c=this.map.get(a);c||(c=new CT,this.map.set(a,c)),c.add(s)}get(s,a){const d=this.map.get(s);return d?d.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uh(i,s,a){const c=i.previousIndex;if(null===c)return c;let d=0;return a&&c<a.length&&(d=a[c]),c+s+d}class ch{constructor(){}supports(s){return s instanceof Map||xd(s)}create(){return new CE}}class CE{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||xd(s)))throw new ye(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(c,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,c),this._appendAfter=a,a=a._next;else{const h=this._getOrCreateRecordForKey(d,c);a=this._insertBeforeOrAppend(a,h)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let c=a;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const c=s._prev;return a._next=s,a._prev=c,s._prev=a,c&&(c._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const d=this._records.get(s);this._maybeAddToChanges(d,a);const h=d._prev,m=d._next;return h&&(h._next=m),m&&(m._prev=h),d._next=null,d._prev=null,d}const c=new TE(s);return this._records.set(s,c),c.currentValue=a,this._addToAdditions(c),c}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(c=>a(s[c],c))}}class TE{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lr(){return new t_([new ln])}let t_=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(null!=c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||lr()),deps:[[i,new js,new _n]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(null!=c)return c;throw new ye(901,!1)}}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:lr}),i})();function SE(){return new lg([new ch])}let lg=(()=>{class i{constructor(a){this.factories=a}static create(a,c){if(c){const d=c.factories.slice();a=a.concat(d)}return new i(a)}static extend(a){return{provide:i,useFactory:c=>i.create(a,c||SE()),deps:[[i,new js,new _n]]}}find(a){const c=this.factories.find(d=>d.supports(a));if(c)return c;throw new ye(901,!1)}}return i.\u0275prov=Ht({token:i,providedIn:"root",factory:SE}),i})();const la=aa(null,"core",[]);let Jc=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(fn(Nn))},i.\u0275mod=Bt({type:i}),i.\u0275inj=St({}),i})();function AT(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(lt,Te,O)=>{O.d(Te,{Z:()=>ye});var y=O(2090),U=O(4859),P=O(9681),oe=O(1877);class we{constructor(re,ue){this._delegate=re,this.firebase=ue,(0,P._addComponent)(re,new U.wA("app-compat",()=>this,"PUBLIC")),this.container=re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(re){this._delegate.automaticDataCollectionEnabled=re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(re=>{this._delegate.checkDestroyed(),re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(re,ue=P._DEFAULT_ENTRY_NAME){var Ke;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(re);return!Ze.isInitialized()&&"EXPLICIT"===(null===(Ke=Ze.getComponent())||void 0===Ke?void 0:Ke.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:ue})}_removeServiceInstance(re,ue=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(re).clearInstance(ue)}_addComponent(re){(0,P._addComponent)(this._delegate,re)}_addOrOverwriteComponent(re){(0,P._addOrOverwriteComponent)(this._delegate,re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ce=new y.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function Ne(){const He=function fe(He){const re={},ue={__esModule:!0,initializeApp:function Pe(J,ee={}){const ce=P.initializeApp(J,ee);if((0,y.r3)(re,ce.name))return re[ce.name];const W=new He(ce,ue);return re[ce.name]=W,W},app:Ze,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function le(J){const ee=J.name,ce=ee.replace("-compat","");if(P._registerComponent(J)&&"PUBLIC"===J.type){const W=(q=Ze())=>{if("function"!=typeof q[ce])throw Ce.create("invalid-app-argument",{appName:ee});return q[ce]()};void 0!==J.serviceProps&&(0,y.ZB)(W,J.serviceProps),ue[ce]=W,He.prototype[ce]=function(...q){return this._getService.bind(this,ee).apply(this,J.multipleInstances?q:[])}}return"PUBLIC"===J.type?ue[ce]:null},removeApp:function Ke(J){delete re[J]},useAsService:function Le(J,ee){return"serverAuth"===ee?null:ee},modularAPIs:P}};function Ze(J){if(!(0,y.r3)(re,J=J||P._DEFAULT_ENTRY_NAME))throw Ce.create("no-app",{appName:J});return re[J]}return ue.default=ue,Object.defineProperty(ue,"apps",{get:function ve(){return Object.keys(re).map(J=>re[J])}}),Ze.App=He,ue}(we);return He.INTERNAL=Object.assign(Object.assign({},He.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function re(ue){(0,y.ZB)(He,ue)},createSubscribe:y.ne,ErrorFactory:y.LL,deepExtend:y.ZB}),He}(),j=new oe.Yd("@firebase/app-compat");if((0,y.jU)()&&void 0!==self.firebase){j.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const He=self.firebase.SDK_VERSION;He&&He.indexOf("LITE")>=0&&j.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ye=$;!function ke(He){(0,P.registerVersion)("@firebase/app-compat","0.1.39",He)}()},9681:(lt,Te,O)=>{O.r(Te),O.d(Te,{FirebaseError:()=>oe.ZR,SDK_VERSION:()=>Ai,_DEFAULT_ENTRY_NAME:()=>kt,_addComponent:()=>Xt,_addOrOverwriteComponent:()=>Ht,_apps:()=>Jt,_clearComponents:()=>fi,_components:()=>An,_getProvider:()=>St,_registerComponent:()=>Ot,_removeServiceInstance:()=>wr,deleteApp:()=>vs,getApp:()=>Er,getApps:()=>xi,initializeApp:()=>Ir,onLog:()=>Un,registerVersion:()=>qn,setLogLevel:()=>dn});var y=O(5861),U=O(4859),P=O(1877),oe=O(2090),we=O(8766);class me{constructor(pe){this.container=pe}getPlatformInfoString(){return this.container.getProviders().map(We=>{if(function Ce(je){return"VERSION"===je.getComponent()?.type}(We)){const ut=We.getImmediate();return`${ut.library}/${ut.version}`}return null}).filter(We=>We).join(" ")}}const fe="@firebase/app",$=new P.Yd("@firebase/app"),kt="[DEFAULT]",Fe={[fe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Jt=new Map,An=new Map;function Xt(je,pe){try{je.container.addComponent(pe)}catch(We){$.debug(`Component ${pe.name} failed to register with FirebaseApp ${je.name}`,We)}}function Ht(je,pe){je.container.addOrOverwriteComponent(pe)}function Ot(je){const pe=je.name;if(An.has(pe))return $.debug(`There were multiple attempts to register component ${pe}.`),!1;An.set(pe,je);for(const We of Jt.values())Xt(We,je);return!0}function St(je,pe){const We=je.container.getProvider("heartbeat").getImmediate({optional:!0});return We&&We.triggerHeartbeat(),je.container.getProvider(pe)}function wr(je,pe,We=kt){St(je,pe).clearInstance(We)}function fi(){An.clear()}const Dn=new oe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class qi{constructor(pe,We,ut){this._isDeleted=!1,this._options=Object.assign({},pe),this._config=Object.assign({},We),this._name=We.name,this._automaticDataCollectionEnabled=We.automaticDataCollectionEnabled,this._container=ut,this.container.addComponent(new U.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this.checkDestroyed(),this._automaticDataCollectionEnabled=pe}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(pe){this._isDeleted=pe}checkDestroyed(){if(this.isDeleted)throw Dn.create("app-deleted",{appName:this._name})}}const Ai="9.14.0";function Ir(je,pe={}){let We=je;"object"!=typeof pe&&(pe={name:pe});const ut=Object.assign({name:kt,automaticDataCollectionEnabled:!1},pe),ht=ut.name;if("string"!=typeof ht||!ht)throw Dn.create("bad-app-name",{appName:String(ht)});if(We||(We=(0,oe.aH)()),!We)throw Dn.create("no-options");const Bt=Jt.get(ht);if(Bt){if((0,oe.vZ)(We,Bt.options)&&(0,oe.vZ)(ut,Bt.config))return Bt;throw Dn.create("duplicate-app",{appName:ht})}const V=new U.H0(ht);for(const H of An.values())V.addComponent(H);const L=new qi(We,ut,V);return Jt.set(ht,L),L}function Er(je=kt){const pe=Jt.get(je);if(!pe&&je===kt)return Ir();if(!pe)throw Dn.create("no-app",{appName:je});return pe}function xi(){return Array.from(Jt.values())}function vs(je){return ze.apply(this,arguments)}function ze(){return(ze=(0,y.Z)(function*(je){const pe=je.name;Jt.has(pe)&&(Jt.delete(pe),yield Promise.all(je.container.getProviders().map(We=>We.delete())),je.isDeleted=!0)})).apply(this,arguments)}function qn(je,pe,We){var ut;let ht=null!==(ut=Fe[je])&&void 0!==ut?ut:je;We&&(ht+=`-${We}`);const Bt=ht.match(/\s|\//),V=pe.match(/\s|\//);if(Bt||V){const L=[`Unable to register library "${ht}" with version "${pe}":`];return Bt&&L.push(`library name "${ht}" contains illegal characters (whitespace or "/")`),Bt&&V&&L.push("and"),V&&L.push(`version name "${pe}" contains illegal characters (whitespace or "/")`),void $.warn(L.join(" "))}Ot(new U.wA(`${ht}-version`,()=>({library:ht,version:pe}),"VERSION"))}function Un(je,pe){if(null!==je&&"function"!=typeof je)throw Dn.create("invalid-log-argument");(0,P.Am)(je,pe)}function dn(je){(0,P.Ub)(je)}const mn="firebase-heartbeat-store";let yn=null;function nn(){return yn||(yn=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(je,pe)=>{0===pe&&je.createObjectStore(mn)}}).catch(je=>{throw Dn.create("idb-open",{originalErrorMessage:je.message})})),yn}function nt(){return(nt=(0,y.Z)(function*(je){var pe;try{return(yield nn()).transaction(mn).objectStore(mn).get(Kn(je))}catch(We){if(We instanceof oe.ZR)$.warn(We.message);else{const ut=Dn.create("idb-get",{originalErrorMessage:null===(pe=We)||void 0===pe?void 0:pe.message});$.warn(ut.message)}}})).apply(this,arguments)}function Dt(je,pe){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,y.Z)(function*(je,pe){var We;try{const ht=(yield nn()).transaction(mn,"readwrite");return yield ht.objectStore(mn).put(pe,Kn(je)),ht.done}catch(ut){if(ut instanceof oe.ZR)$.warn(ut.message);else{const ht=Dn.create("idb-set",{originalErrorMessage:null===(We=ut)||void 0===We?void 0:We.message});$.warn(ht.message)}}})).apply(this,arguments)}function Kn(je){return`${je.name}!${je.options.appId}`}class br{constructor(pe){this.container=pe,this._heartbeatsCache=null;const We=this.container.getProvider("app").getImmediate();this._storage=new Vt(We),this._heartbeatsCachePromise=this._storage.read().then(ut=>(this._heartbeatsCache=ut,ut))}triggerHeartbeat(){var pe=this;return(0,y.Z)(function*(){const ut=pe.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ht=bt();if(null===pe._heartbeatsCache&&(pe._heartbeatsCache=yield pe._heartbeatsCachePromise),pe._heartbeatsCache.lastSentHeartbeatDate!==ht&&!pe._heartbeatsCache.heartbeats.some(Bt=>Bt.date===ht))return pe._heartbeatsCache.heartbeats.push({date:ht,agent:ut}),pe._heartbeatsCache.heartbeats=pe._heartbeatsCache.heartbeats.filter(Bt=>{const V=new Date(Bt.date).valueOf();return Date.now()-V<=2592e6}),pe._storage.overwrite(pe._heartbeatsCache)})()}getHeartbeatsHeader(){var pe=this;return(0,y.Z)(function*(){if(null===pe._heartbeatsCache&&(yield pe._heartbeatsCachePromise),null===pe._heartbeatsCache||0===pe._heartbeatsCache.heartbeats.length)return"";const We=bt(),{heartbeatsToSend:ut,unsentEntries:ht}=function pi(je,pe=1024){const We=[];let ut=je.slice();for(const ht of je){const Bt=We.find(V=>V.agent===ht.agent);if(Bt){if(Bt.dates.push(ht.date),tr(We)>pe){Bt.dates.pop();break}}else if(We.push({agent:ht.agent,dates:[ht.date]}),tr(We)>pe){We.pop();break}ut=ut.slice(1)}return{heartbeatsToSend:We,unsentEntries:ut}}(pe._heartbeatsCache.heartbeats),Bt=(0,oe.L)(JSON.stringify({version:2,heartbeats:ut}));return pe._heartbeatsCache.lastSentHeartbeatDate=We,ht.length>0?(pe._heartbeatsCache.heartbeats=ht,yield pe._storage.overwrite(pe._heartbeatsCache)):(pe._heartbeatsCache.heartbeats=[],pe._storage.overwrite(pe._heartbeatsCache)),Bt})()}}function bt(){return(new Date).toISOString().substring(0,10)}class Vt{constructor(pe){this.app=pe,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,y.Z)(function*(){return!!(0,oe.hl)()&&(0,oe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var pe=this;return(0,y.Z)(function*(){return(yield pe._canUseIndexedDBPromise)&&(yield function tt(je){return nt.apply(this,arguments)}(pe.app))||{heartbeats:[]}})()}overwrite(pe){var We=this;return(0,y.Z)(function*(){var ut;if(yield We._canUseIndexedDBPromise){const Bt=yield We.read();return Dt(We.app,{lastSentHeartbeatDate:null!==(ut=pe.lastSentHeartbeatDate)&&void 0!==ut?ut:Bt.lastSentHeartbeatDate,heartbeats:pe.heartbeats})}})()}add(pe){var We=this;return(0,y.Z)(function*(){var ut;if(yield We._canUseIndexedDBPromise){const Bt=yield We.read();return Dt(We.app,{lastSentHeartbeatDate:null!==(ut=pe.lastSentHeartbeatDate)&&void 0!==ut?ut:Bt.lastSentHeartbeatDate,heartbeats:[...Bt.heartbeats,...pe.heartbeats]})}})()}}function tr(je){return(0,oe.L)(JSON.stringify({version:2,heartbeats:je})).length}!function In(je){Ot(new U.wA("platform-logger",pe=>new me(pe),"PRIVATE")),Ot(new U.wA("heartbeat",pe=>new br(pe),"PRIVATE")),qn(fe,"0.8.4",je),qn(fe,"0.8.4","esm2017"),qn("fire-js","")}("")},4859:(lt,Te,O)=>{O.d(Te,{H0:()=>fe,wA:()=>P});var y=O(5861),U=O(2090);class P{constructor($,j,K){this.name=$,this.instanceFactory=j,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const oe="[DEFAULT]";class we{constructor($,j){this.name=$,this.container=j,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const j=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(j)){const K=new U.BH;if(this.instancesDeferred.set(j,K),this.isInitialized(j)||this.shouldAutoInitialize())try{const Oe=this.getOrInitializeService({instanceIdentifier:j});Oe&&K.resolve(Oe)}catch{}}return this.instancesDeferred.get(j).promise}getImmediate($){var j;const K=this.normalizeInstanceIdentifier($?.identifier),Oe=null!==(j=$?.optional)&&void 0!==j&&j;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if(Oe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(ke){if(Oe)return null;throw ke}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function Ce(Ne){return"EAGER"===Ne.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:oe})}catch{}for(const[j,K]of this.instancesDeferred.entries()){const Oe=this.normalizeInstanceIdentifier(j);try{const ke=this.getOrInitializeService({instanceIdentifier:Oe});K.resolve(ke)}catch{}}}}clearInstance($=oe){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,y.Z)(function*(){const j=Array.from($.instances.values());yield Promise.all([...j.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...j.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=oe){return this.instances.has($)}getOptions($=oe){return this.instancesOptions.get($)||{}}initialize($={}){const{options:j={}}=$,K=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Oe=this.getOrInitializeService({instanceIdentifier:K,options:j});for(const[ke,ye]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(ke)&&ye.resolve(Oe);return Oe}onInit($,j){var K;const Oe=this.normalizeInstanceIdentifier(j),ke=null!==(K=this.onInitCallbacks.get(Oe))&&void 0!==K?K:new Set;ke.add($),this.onInitCallbacks.set(Oe,ke);const ye=this.instances.get(Oe);return ye&&$(ye,Oe),()=>{ke.delete($)}}invokeOnInitCallbacks($,j){const K=this.onInitCallbacks.get(j);if(K)for(const Oe of K)try{Oe($,j)}catch{}}getOrInitializeService({instanceIdentifier:$,options:j={}}){let K=this.instances.get($);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=$,Ne===oe?void 0:Ne),options:j}),this.instances.set($,K),this.instancesOptions.set($,j),this.invokeOnInitCallbacks(K,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,K)}catch{}var Ne;return K||null}normalizeInstanceIdentifier($=oe){return this.component?this.component.multipleInstances?$:oe:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class fe{constructor($){this.name=$,this.providers=new Map}addComponent($){const j=this.getProvider($.name);if(j.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);j.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const j=new we($,this);return this.providers.set($,j),j}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Te,O)=>{O.d(Te,{Am:()=>Ne,Ub:()=>fe,Yd:()=>Ce,in:()=>U});const y=[];var U=(()=>{return($=U||(U={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",U;var $})();const P={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},oe=U.INFO,we={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},me=($,j,...K)=>{if(j<$.logLevel)return;const Oe=(new Date).toISOString(),ke=we[j];if(!ke)throw new Error(`Attempted to log a message with an invalid logType (value: ${j})`);console[ke](`[${Oe}]  ${$.name}:`,...K)};class Ce{constructor(j){this.name=j,this._logLevel=oe,this._logHandler=me,this._userLogHandler=null,y.push(this)}get logLevel(){return this._logLevel}set logLevel(j){if(!(j in U))throw new TypeError(`Invalid value "${j}" assigned to \`logLevel\``);this._logLevel=j}setLogLevel(j){this._logLevel="string"==typeof j?P[j]:j}get logHandler(){return this._logHandler}set logHandler(j){if("function"!=typeof j)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=j}get userLogHandler(){return this._userLogHandler}set userLogHandler(j){this._userLogHandler=j}debug(...j){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...j),this._logHandler(this,U.DEBUG,...j)}log(...j){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...j),this._logHandler(this,U.VERBOSE,...j)}info(...j){this._userLogHandler&&this._userLogHandler(this,U.INFO,...j),this._logHandler(this,U.INFO,...j)}warn(...j){this._userLogHandler&&this._userLogHandler(this,U.WARN,...j),this._logHandler(this,U.WARN,...j)}error(...j){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...j),this._logHandler(this,U.ERROR,...j)}}function fe($){y.forEach(j=>{j.setLogLevel($)})}function Ne($,j){for(const K of y){let Oe=null;j&&j.level&&(Oe=P[j.level]),K.userLogHandler=null===$?null:(ke,ye,...He)=>{const re=He.map(ue=>{if(null==ue)return null;if("string"==typeof ue)return ue;if("number"==typeof ue||"boolean"==typeof ue)return ue.toString();if(ue instanceof Error)return ue.message;try{return JSON.stringify(ue)}catch{return null}}).filter(ue=>ue).join(" ");ye>=(Oe??ke.logLevel)&&$({level:U[ye].toLowerCase(),message:re,args:He,type:ke.name})}}}},8766:(lt,Te,O)=>{O.d(Te,{Lj:()=>Pe,X3:()=>Ze});var y=O(5861);let P,oe;const Ce=new WeakMap,fe=new WeakMap,Ne=new WeakMap,$=new WeakMap,j=new WeakMap;let ke={get(ee,ce,W){if(ee instanceof IDBTransaction){if("done"===ce)return fe.get(ee);if("objectStoreNames"===ce)return ee.objectStoreNames||Ne.get(ee);if("store"===ce)return W.objectStoreNames[1]?void 0:W.objectStore(W.objectStoreNames[0])}return ue(ee[ce])},set:(ee,ce,W)=>(ee[ce]=W,!0),has:(ee,ce)=>ee instanceof IDBTransaction&&("done"===ce||"store"===ce)||ce in ee};function re(ee){return"function"==typeof ee?function He(ee){return ee!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ee)?function(...ce){return ee.apply(Ke(this),ce),ue(Ce.get(this))}:function(...ce){return ue(ee.apply(Ke(this),ce))}:function(ce,...W){const q=ee.call(Ke(this),ce,...W);return Ne.set(q,ce.sort?ce.sort():[ce]),ue(q)}}(ee):(ee instanceof IDBTransaction&&function Oe(ee){if(fe.has(ee))return;const ce=new Promise((W,q)=>{const ie=()=>{ee.removeEventListener("complete",X),ee.removeEventListener("error",xe),ee.removeEventListener("abort",xe)},X=()=>{W(),ie()},xe=()=>{q(ee.error||new DOMException("AbortError","AbortError")),ie()};ee.addEventListener("complete",X),ee.addEventListener("error",xe),ee.addEventListener("abort",xe)});fe.set(ee,ce)}(ee),((ee,ce)=>ce.some(W=>ee instanceof W))(ee,function we(){return P||(P=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ee,ke):ee)}function ue(ee){if(ee instanceof IDBRequest)return function K(ee){const ce=new Promise((W,q)=>{const ie=()=>{ee.removeEventListener("success",X),ee.removeEventListener("error",xe)},X=()=>{W(ue(ee.result)),ie()},xe=()=>{q(ee.error),ie()};ee.addEventListener("success",X),ee.addEventListener("error",xe)});return ce.then(W=>{W instanceof IDBCursor&&Ce.set(W,ee)}).catch(()=>{}),j.set(ce,ee),ce}(ee);if($.has(ee))return $.get(ee);const ce=re(ee);return ce!==ee&&($.set(ee,ce),j.set(ce,ee)),ce}const Ke=ee=>j.get(ee);function Ze(ee,ce,{blocked:W,upgrade:q,blocking:ie,terminated:X}={}){const xe=indexedDB.open(ee,ce),Me=ue(xe);return q&&xe.addEventListener("upgradeneeded",et=>{q(ue(xe.result),et.oldVersion,et.newVersion,ue(xe.transaction))}),W&&xe.addEventListener("blocked",()=>W()),Me.then(et=>{X&&et.addEventListener("close",()=>X()),ie&&et.addEventListener("versionchange",()=>ie())}).catch(()=>{}),Me}function Pe(ee,{blocked:ce}={}){const W=indexedDB.deleteDatabase(ee);return ce&&W.addEventListener("blocked",()=>ce()),ue(W).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],le=["put","add","delete","clear"],Le=new Map;function J(ee,ce){if(!(ee instanceof IDBDatabase)||ce in ee||"string"!=typeof ce)return;if(Le.get(ce))return Le.get(ce);const W=ce.replace(/FromIndex$/,""),q=ce!==W,ie=le.includes(W);if(!(W in(q?IDBIndex:IDBObjectStore).prototype)||!ie&&!ve.includes(W))return;const X=function(){var xe=(0,y.Z)(function*(Me,...et){const jt=this.transaction(Me,ie?"readwrite":"readonly");let kt=jt.store;return q&&(kt=kt.index(et.shift())),(yield Promise.all([kt[W](...et),ie&&jt.done]))[0]});return function(et){return xe.apply(this,arguments)}}();return Le.set(ce,X),X}!function ye(ee){ke=ee(ke)}(ee=>({...ee,get:(ce,W,q)=>J(ce,W)||ee.get(ce,W,q),has:(ce,W)=>!!J(ce,W)||ee.has(ce,W)}))},5861:(lt,Te,O)=>{function y(P,oe,we,me,Ce,fe,Ne){try{var $=P[fe](Ne),j=$.value}catch(K){return void we(K)}$.done?oe(j):Promise.resolve(j).then(me,Ce)}function U(P){return function(){var oe=this,we=arguments;return new Promise(function(me,Ce){var fe=P.apply(oe,we);function Ne(j){y(fe,me,Ce,Ne,$,"next",j)}function $(j){y(fe,me,Ce,Ne,$,"throw",j)}Ne(void 0)})}}O.d(Te,{Z:()=>U})}},lt=>{lt(lt.s=3654)}]);